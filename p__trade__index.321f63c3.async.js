(self.webpackChunk=self.webpackChunk||[]).push([[939],{10079:function(e,n,t){"use strict";var i=t(97857),r=t.n(i),a=t(49677),s=t.n(a),l=t(67527),o=(t(62435),t(86074));n.Z=function(e){var n=Object.assign({},(s()(e),e)),t=n.dropdownStyle?Object.assign({padding:"8px 4px"},n.dropdownStyle):{padding:"8px 4px"};return(0,o.jsx)(l.Z,r()({dropdownStyle:t},n))}},31917:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var i=t(62435),r=t(77438),a=t(33114),s="pagination___qS7Hi",l="button___th9PV",o=t(86074);function u(e){var n=e.data,t=e.pageIndex,u=e.setPageIndex,c=e._data,d=(0,i.useMemo)((function(){return t===Math.ceil((null==c?void 0:c.length)/a.I)}),[t,c]);return(0,o.jsxs)("div",{className:s,children:[t>a.Q&&(0,o.jsx)(r.Z,{className:l,type:"c20",onClick:function(){u(t-1)},children:(0,o.jsx)("div",{children:"Prev"})}),n&&n.length>=a.I&&!d&&(0,o.jsx)(r.Z,{className:l,type:"c20",onClick:function(){u(t+1)},children:(0,o.jsx)("div",{children:"Next"})})]})}},21650:function(e,n,t){"use strict";t.d(n,{ET:function(){return d},FB:function(){return s},Qo:function(){return l},VZ:function(){return u},YO:function(){return o},bD:function(){return a},pQ:function(){return c}});var i=t(58926),r=t(24069),a=0,s="Long",l="Short",o="Market",u="Limit",c=((0,r.Jl)(1,30),{"5m":300,"15m":900,"1h":3600,"4h":14400,"1d":86400});function d(e,n){return n?(0,i.jY)(e)+"address/"+n:(0,i.jY)(e)}},78025:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ks}});var i=t(19632),r=t.n(i),a=t(5574),s=t.n(a),l=t(34713),o=t(62435),u=t(4480),c=t(95591),d=t(9783),p=t.n(d),m=t(97857),v=t.n(m),y=t(96695),f=t.n(y),x=t(15009),g=t.n(x),h=t(99289),_=t.n(h),b=t(75081),j=t(94184),N=t.n(j),P=t(33290),T=t(60088),L=t(79697),k=t(41519),w=t(12444),C=t.n(w),S=t(72004),I=t.n(S),M=t(31996),F=t.n(M),D=t(26037),O=t.n(D),A=t(66457),z=t(22537),R=function(e){return null!=e&&e.length?"("+((null==e?void 0:e.length)>=99?"99+":e.length)+")":""},E=t(25098),Z=t.n(E),Q=t(86237),B=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"_f","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint8","name":"reason","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"int256","name":"dPNL","type":"int256"}],"name":"DeleteOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint256","name":"size","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"collateral","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"triggerPrice","type":"uint256"},{"indexed":false,"internalType":"bool","name":"triggerAbove","type":"bool"},{"indexed":false,"internalType":"uint256","name":"tp","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sl","type":"uint256"},{"indexed":false,"internalType":"uint128","name":"fromOrder","type":"uint128"},{"indexed":false,"internalType":"bool","name":"isKeepLev","type":"bool"}],"name":"UpdateOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"indexed":false,"internalType":"int256","name":"collateralDeltaAfter","type":"int256"},{"indexed":false,"internalType":"uint256","name":"sizeDelta","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"int256","name":"pnl","type":"int256"},{"indexed":false,"internalType":"int256[]","name":"fees","type":"int256[]"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"collateralToken","type":"address"},{"indexed":false,"internalType":"address","name":"indexToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"category","type":"uint256"},{"indexed":false,"internalType":"uint64","name":"fromOrder","type":"uint64"}],"name":"UpdatePosition","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_market","type":"address"}],"name":"addMarket","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"_markets","type":"address[]"},{"internalType":"bool[]","name":"_isIncreaseList","type":"bool[]"},{"internalType":"uint256[]","name":"_orderIDList","type":"uint256[]"},{"internalType":"bool[]","name":"_isLongList","type":"bool[]"}],"name":"cancelOrderList","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"uint256","name":"_oraclePrice","type":"uint256"},{"internalType":"bool","name":"isOpen","type":"bool"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isExec","type":"bool"},{"internalType":"uint8","name":"liqState","type":"uint8"},{"internalType":"uint64","name":"_fromOrder","type":"uint64"},{"internalType":"bytes32","name":"_refCode","type":"bytes32"},{"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"internalType":"uint8","name":"execNum","type":"uint8"},{"internalType":"uint256[]","name":"inputs","type":"uint256[]"}],"internalType":"struct MarketDataTypes.UpdatePositionInputs","name":"_vars","type":"tuple"}],"name":"decreasePosition","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"components":[{"internalType":"uint8","name":"version","type":"uint8"},{"internalType":"uint32","name":"updatedAtBlock","type":"uint32"},{"internalType":"uint8","name":"triggerAbove","type":"uint8"},{"internalType":"address","name":"account","type":"address"},{"internalType":"uint48","name":"extra3","type":"uint48"},{"internalType":"uint128","name":"collateral","type":"uint128"},{"internalType":"uint128","name":"size","type":"uint128"},{"internalType":"uint128","name":"price","type":"uint128"},{"internalType":"uint128","name":"extra1","type":"uint128"},{"internalType":"uint64","name":"orderID","type":"uint64"},{"internalType":"uint64","name":"extra2","type":"uint64"},{"internalType":"uint128","name":"extra0","type":"uint128"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"internalType":"struct Order.Props","name":"order","type":"tuple"},{"components":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"uint256","name":"_oraclePrice","type":"uint256"},{"internalType":"bool","name":"isOpen","type":"bool"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isExec","type":"bool"},{"internalType":"uint8","name":"liqState","type":"uint8"},{"internalType":"uint64","name":"_fromOrder","type":"uint64"},{"internalType":"bytes32","name":"_refCode","type":"bytes32"},{"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"internalType":"uint8","name":"execNum","type":"uint8"},{"internalType":"uint256[]","name":"inputs","type":"uint256[]"}],"internalType":"struct MarketDataTypes.UpdatePositionInputs","name":"inputs","type":"tuple"},{"internalType":"uint8","name":"reason","type":"uint8"},{"internalType":"int256","name":"dPNL","type":"int256"}],"internalType":"struct MarketOrderCallBackIntl.DeleteOrderEvent","name":"e","type":"tuple"}],"name":"deleteOrderCallback","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"getAccountSize","outputs":[{"internalType":"uint256","name":"sizesL","type":"uint256"},{"internalType":"uint256","name":"sizesS","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getGlobalPNL","outputs":[{"internalType":"int256","name":"pnl","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getGlobalSize","outputs":[{"internalType":"uint256","name":"sizesLong","type":"uint256"},{"internalType":"uint256","name":"sizesShort","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarkets","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantAndRevoke","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"gv","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"uint256","name":"_oraclePrice","type":"uint256"},{"internalType":"bool","name":"isOpen","type":"bool"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isExec","type":"bool"},{"internalType":"uint8","name":"liqState","type":"uint8"},{"internalType":"uint64","name":"_fromOrder","type":"uint64"},{"internalType":"bytes32","name":"_refCode","type":"bytes32"},{"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"internalType":"uint8","name":"execNum","type":"uint8"},{"internalType":"uint256[]","name":"inputs","type":"uint256[]"}],"internalType":"struct MarketDataTypes.UpdatePositionInputs","name":"_inputs","type":"tuple"}],"name":"increasePosition","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_gv","type":"address"},{"internalType":"address","name":"vr","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"initialized","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_market","type":"address"}],"name":"removeMarket","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"uint256","name":"_oraclePrice","type":"uint256"},{"internalType":"bool","name":"isOpen","type":"bool"},{"internalType":"bool","name":"isCreate","type":"bool"},{"components":[{"internalType":"uint8","name":"version","type":"uint8"},{"internalType":"uint32","name":"updatedAtBlock","type":"uint32"},{"internalType":"uint8","name":"triggerAbove","type":"uint8"},{"internalType":"address","name":"account","type":"address"},{"internalType":"uint48","name":"extra3","type":"uint48"},{"internalType":"uint128","name":"collateral","type":"uint128"},{"internalType":"uint128","name":"size","type":"uint128"},{"internalType":"uint128","name":"price","type":"uint128"},{"internalType":"uint128","name":"extra1","type":"uint128"},{"internalType":"uint64","name":"orderID","type":"uint64"},{"internalType":"uint64","name":"extra2","type":"uint64"},{"internalType":"uint128","name":"extra0","type":"uint128"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"internalType":"struct Order.Props","name":"_order","type":"tuple"},{"internalType":"uint256[]","name":"inputs","type":"uint256[]"}],"internalType":"struct MarketDataTypes.UpdateOrderInputs","name":"_vars","type":"tuple"}],"name":"updateOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"uint256","name":"_oraclePrice","type":"uint256"},{"internalType":"bool","name":"isOpen","type":"bool"},{"internalType":"bool","name":"isCreate","type":"bool"},{"components":[{"internalType":"uint8","name":"version","type":"uint8"},{"internalType":"uint32","name":"updatedAtBlock","type":"uint32"},{"internalType":"uint8","name":"triggerAbove","type":"uint8"},{"internalType":"address","name":"account","type":"address"},{"internalType":"uint48","name":"extra3","type":"uint48"},{"internalType":"uint128","name":"collateral","type":"uint128"},{"internalType":"uint128","name":"size","type":"uint128"},{"internalType":"uint128","name":"price","type":"uint128"},{"internalType":"uint128","name":"extra1","type":"uint128"},{"internalType":"uint64","name":"orderID","type":"uint64"},{"internalType":"uint64","name":"extra2","type":"uint64"},{"internalType":"uint128","name":"extra0","type":"uint128"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"internalType":"struct Order.Props","name":"_order","type":"tuple"},{"internalType":"uint256[]","name":"inputs","type":"uint256[]"}],"internalType":"struct MarketDataTypes.UpdateOrderInputs","name":"_event","type":"tuple"}],"name":"updateOrderCallback","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newA","type":"address"}],"name":"updatePositionBook","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"components":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"uint256","name":"_oraclePrice","type":"uint256"},{"internalType":"bool","name":"isOpen","type":"bool"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isExec","type":"bool"},{"internalType":"uint8","name":"liqState","type":"uint8"},{"internalType":"uint64","name":"_fromOrder","type":"uint64"},{"internalType":"bytes32","name":"_refCode","type":"bytes32"},{"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"internalType":"uint8","name":"execNum","type":"uint8"},{"internalType":"uint256[]","name":"inputs","type":"uint256[]"}],"internalType":"struct MarketDataTypes.UpdatePositionInputs","name":"inputs","type":"tuple"},{"components":[{"internalType":"address","name":"market","type":"address"},{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"uint32","name":"lastTime","type":"uint32"},{"internalType":"uint216","name":"extra3","type":"uint216"},{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"averagePrice","type":"uint256"},{"internalType":"int256","name":"entryFundingRate","type":"int256"},{"internalType":"int256","name":"realisedPnl","type":"int256"},{"internalType":"uint256","name":"extra0","type":"uint256"},{"internalType":"uint256","name":"extra1","type":"uint256"},{"internalType":"uint256","name":"extra2","type":"uint256"}],"internalType":"struct Position.Props","name":"position","type":"tuple"},{"internalType":"int256[]","name":"fees","type":"int256[]"},{"internalType":"address","name":"collateralToken","type":"address"},{"internalType":"address","name":"indexToken","type":"address"},{"internalType":"int256","name":"collateralDeltaAfter","type":"int256"}],"internalType":"struct MarketPositionCallBackIntl.UpdatePositionEvent","name":"_event","type":"tuple"}],"name":"updatePositionCallback","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"uint256","name":"_oraclePrice","type":"uint256"},{"internalType":"bool","name":"isOpen","type":"bool"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isExec","type":"bool"},{"internalType":"uint8","name":"liqState","type":"uint8"},{"internalType":"uint64","name":"_fromOrder","type":"uint64"},{"internalType":"bytes32","name":"_refCode","type":"bytes32"},{"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"internalType":"uint8","name":"execNum","type":"uint8"},{"internalType":"uint256[]","name":"inputs","type":"uint256[]"}],"internalType":"struct MarketDataTypes.UpdatePositionInputs","name":"_inputs","type":"tuple"}],"name":"validateIncreasePosition","outputs":[],"stateMutability":"view","type":"function"},{"inputs":[],"name":"vaultRouter","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),H=t(24069),V=Q.s(""),U=function(e){F()(y,e);var n,t,i,r,a,s,l,o,u,c,d,m=O()(y);function y(e,n,t,i){var r;return C()(this,y),r=m.call(this,e,n,B.Mt),p()(Z()(r),"_market",void 0),p()(Z()(r),"_account",void 0),r._market=t,r._account=i,r}return I()(y,[{key:"getClassName",value:function(){return"MarketRouter"}},{key:"allowance",value:(d=_()(g()().mark((function e(n){var t;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._market._ctoken.allowance(n,this._address);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"approve",value:(c=_()(g()().mark((function e(n,t,i){var r,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._market._ctoken,e.next=3,r.allowance(n,this._address);case 3:if(!e.sent.lt(t)&&!i){e.next=9;break}return a=(0,H._b)(1e3),e.next=8,r.approve(this._address,t.mul(a));case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return c.apply(this,arguments)})},{key:"buildUpdateOrderParam",value:function(e){var n=e.price,t=e.pay,i=void 0===t?"0":t,r=e.size,a=void 0===r?200:r,s=e.tp,l=void 0===s?0:s,o=e.sl,u=void 0===o?0:o,c=e.isLong,d=e.userReferrerCode,p=void 0===d?V:d,m=e.isOpen,v=void 0!==m&&m,y=e.isKeepLev,f=e.orderID,x=void 0===f?"0":f,g=e.isCreate,h=void 0===g||g;return{_market:e._market,_isLong:c,_oraclePrice:"0",isOpen:v,isCreate:h,_order:{account:this._account,version:"0",updatedAtBlock:"0",triggerAbove:"0",extra3:y?"1":"0",collateral:i,size:a,price:n,extra1:l,orderID:x,extra2:"0",extra0:u,refCode:p},inputs:v?[i]:[]}}},{key:"buildDecreasePositionParam",value:function(e){var n=e.price,t=e.isKeepLev,i=void 0!==t&&t,r=e.size,a=e.isLong,s=void 0===a||a,l=e.pay,o=e.userReferrerCode,u=void 0===o?V:o;return{_market:e._market,_isLong:s,_oraclePrice:"0",isOpen:!1,_account:this._account,_sizeDelta:r,_price:n,_slippage:"30",_isExec:!1,liqState:"0",_fromOrder:"0",_refCode:u,collateralDelta:l||"0",execNum:"0",inputs:[i?"1":"0"]}}},{key:"buildIncreasePositionParam",value:function(e){var n=e.price,t=e.tp,i=void 0===t?0:t,r=e.sl,a=void 0===r?0:r,s=e.pay,l=void 0===s?20:s,o=e.size,u=void 0===o?200:o,c=e.isLong,d=void 0===c||c,p=e.userReferrerCode,m=void 0===p?V:p;return v()(v()({},e),{},{_isLong:d,_oraclePrice:"0",isOpen:!0,_account:this._account,_sizeDelta:u,_price:n,_slippage:"30",_isExec:!1,liqState:"0",_fromOrder:"18446744073709551615",_refCode:m,collateralDelta:l,execNum:"0",inputs:[i,a]})}},{key:"setPendingTxns",value:function(e){this._PendingTxns=e}},{key:"increaseTrade",value:(u=_()(g()().mark((function e(n,t,i,r){var a,s,l,o,u,c,d,p;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.approve(this._account,i);case 2:if(!e.sent){e.next=11;break}return a=n.tpPrice,s=n.slPrice,l=n.payDelta,o=n.sizeDelta,u=n.isLong,c=n.price,d=this.buildIncreasePositionParam({tp:a,sl:s,pay:l,size:o,isLong:u,price:c,userReferrerCode:t,_market:this._market._address}),console.log("increasePosition",d,n),e.next=9,this.send("increasePosition",[d],r);case 9:return p=e.sent,e.abrupt("return",p);case 11:return e.abrupt("return",Promise.resolve(""));case 12:case"end":return e.stop()}}),e,this)}))),function(e,n,t,i){return u.apply(this,arguments)})},{key:"decreaseTrade",value:(o=_()(g()().mark((function e(n,t){var i,r,a,s,l,o,u,c,d,p;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.tpPrice,r=n.slPrice,a=n.payDelta,s=n.sizeDelta,l=n.isLong,o=n.price,u=n.isKeepLev,c=n.market,d=this.buildDecreasePositionParam({tp:i,sl:r,pay:a,size:s,isLong:l,price:o,userReferrerCode:t||V,isKeepLev:u,_market:c}),e.next=4,this.send("decreasePosition",[d]);case 4:return p=e.sent,e.abrupt("return",p);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return o.apply(this,arguments)})},{key:"increaseOrder",value:(l=_()(g()().mark((function e(n,t,i){var r,a,s,l,o,u,c,d,p;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.tpPrice,a=n.slPrice,s=n.payDelta,l=n.sizeDelta,o=n.isLong,u=n.price,c=n._market,d=this.buildUpdateOrderParam(v()(v()({},n),{},{price:u,userReferrerCode:t,pay:s,size:l,isLong:o,tp:r,sl:a,isOpen:!0,_market:c})),console.log("increaseOrder",d),e.next=5,this.send("updateOrder",[d],i);case 5:return p=e.sent,e.abrupt("return",p);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return l.apply(this,arguments)})},{key:"decreaseOrder",value:(s=_()(g()().mark((function e(n,t,i){var r,a,s,l,o,u,c,d,p;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.tpPrice,a=n.slPrice,s=n.payDelta,l=n.sizeDelta,o=n.isLong,u=n.price,c=n.market,d=this.buildUpdateOrderParam(v()(v()({},n),{},{price:u,userReferrerCode:t,pay:s,size:l,isLong:o,tp:r,sl:a,isOpen:!1,_market:c})),console.log("decreaseOrder",d),e.next=5,this.send("updateOrder",[d],i);case 5:return p=e.sent,e.abrupt("return",p);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return s.apply(this,arguments)})},{key:"increaseCollateral",value:(a=_()(g()().mark((function e(n,t,i){var r,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.buildIncreasePositionParam({pay:n,price:0,size:0,_market:i,isLong:t}),console.log("increaseCollateral",r),e.next=4,this.send("increasePosition",[r]);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return a.apply(this,arguments)})},{key:"decreaseCollateral",value:(r=_()(g()().mark((function e(n,t,i){var r,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.buildDecreasePositionParam({pay:n,price:0,size:0,isLong:t,_market:i}),console.log("decreaseCollateral",r),e.next=4,this.send("decreasePosition",[r]);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return r.apply(this,arguments)})},{key:"cancelOrderList",value:(i=_()(g()().mark((function e(n,t,i,r){var a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrderList",[r,n,t,i]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,t,r){return i.apply(this,arguments)})},{key:"getFundFee",value:(t=_()(g()().mark((function e(n,t,i){var r,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==n||null===(r=n.reader)||void 0===r?void 0:r.getFundingFee(null==n?void 0:n.accountAddress,i,t);case 2:return a=e.sent,e.abrupt("return",n.market.formatNum(a));case 4:case"end":return e.stop()}}),e)}))),function(e,n,i){return t.apply(this,arguments)})},{key:"getFundFeeRete",value:(n=_()(g()().mark((function e(n,t,i){var r,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.reader.getFundingRate(i,t);case 2:return r=e.sent,a=n.market.formatFeeOrRate(null==r?void 0:r[0]),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),function(e,t,i){return n.apply(this,arguments)})}]),y}(A.k),q=t(61895),Y=t(36493),J=t(20238),G=t(5729),K=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint8","name":"reason","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"DeleteOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint256","name":"size","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"collateral","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"triggerPrice","type":"uint256"},{"indexed":false,"internalType":"bool","name":"triggerAbove","type":"bool"},{"indexed":false,"internalType":"uint256","name":"tp","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sl","type":"uint256"}],"name":"UpdateOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"int256","name":"collateralDelta","type":"int256"},{"indexed":false,"internalType":"uint256","name":"sizeDelta","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"int256","name":"pnl","type":"int256"},{"components":[{"internalType":"int256","name":"_totoalFees","type":"int256"},{"internalType":"int256","name":"_execFee","type":"int256"},{"internalType":"int256","name":"_fundFee","type":"int256"},{"internalType":"int256","name":"_tradeFee","type":"int256"}],"indexed":false,"internalType":"struct MarketStorage.FeesVars","name":"fees","type":"tuple"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"collateralToken","type":"address"},{"indexed":false,"internalType":"address","name":"indexToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"category","type":"uint256"},{"indexed":false,"internalType":"bool","name":"fromOrder","type":"bool"}],"name":"UpdatePosition","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_FACTORY","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_POS_KEEPER","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"_isIncrease","type":"bool"},{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"cancelOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool[]","name":"_isIncreaseList","type":"bool[]"},{"internalType":"uint256[]","name":"_orderIDList","type":"uint256[]"},{"internalType":"bool[]","name":"_isLongList","type":"bool[]"}],"name":"cancelOrderList","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"collateralToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bool","name":"","type":"bool"}],"name":"decreaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"decreaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"decreaseTrade2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_orderKey","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"name":"execOrderKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"feeRouter","outputs":[{"internalType":"contract IFeeRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collateralDelta","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_payDelta","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"increaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"indexToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookLong","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_key","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"isLiquidate","outputs":[{"internalType":"uint256","name":"_state","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"bool","name":"","type":"bool"}],"name":"liquidatePosition","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"keys","type":"bytes32[]"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"liquidatePositionByKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"market2","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"marketAddressesProvider","outputs":[{"internalType":"contract IMarketAddressesProvider","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookLong","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookShort","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"positionBook","outputs":[{"internalType":"contract IPositionBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_m","type":"address"}],"name":"setMarket2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"address","name":"ob","type":"address"}],"name":"setOrderBook","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_r","type":"address"}],"name":"setRef","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_spread","type":"uint256"}],"name":"setSpread","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"spread","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"updateDecreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"updateIncreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vault","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),W=t(25122),X="0.003",$=function(e){F()(y,e);var n,t,i,r,a,s,l,o,u,c,d,m,v=O()(y);function y(e,n,t,i,r,a){var s;return C()(this,y),s=v.call(this,e,n,K.Mt,t),p()(Z()(s),"_args",void 0),p()(Z()(s),"_valid",void 0),p()(Z()(s),"_fee",void 0),p()(Z()(s),"_ctoken",void 0),s._args=i,s._valid=r,s._fee=a,s._ctoken=new W.a(e,n,i.collateralToken,void 0),s}return I()(y,[{key:"getClassName",value:function(){return"Market"}},{key:"getCollateralToken",value:function(){return this._ctoken}},{key:"getOpenFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.openFeeRate))&&void 0!==e?e:X}},{key:"getCloseFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.closeFeeRate))&&void 0!==e?e:X}},{key:"getExecFee",value:function(){return this.formatNum(this._fee.execFee)}},{key:"getCleanFee",value:function(){var e;return this.formatNum(null===(e=this._fee)||void 0===e?void 0:e.liquidateFee)}},{key:"getSlippageDecimals",value:function(e){var n=4;return this._valid.slippageDigits.isZero()||(n=this._valid.slippageDigits.toNumber()),(0,H.H2)(e,n)}},{key:"getFeeDecimals",value:function(e){return(0,H.H2)(e,8)}},{key:"getNumDecimals",value:function(e){var n=18;return this._args.tokenDigits.isZero()||(n=this._args.tokenDigits.toNumber()),(0,H.H2)(e,n)}},{key:"parseNumber",value:function(e,n){return(0,H.H2)(e,n)}},{key:"getPriceDecimals",value:function(e){return(0,H.H2)(e,30)}},{key:"formatPrice",value:function(e){return(0,H.dN)(e,30)}},{key:"getTokenDigits",value:function(){return this._args.tokenDigits.toNumber()}},{key:"formatNum",value:function(e,n,t,i){return(0,H.dN)(e,this._args.tokenDigits.toNumber(),n,t,i)}},{key:"formatFeeOrRate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return(0,H.dN)(e,n)}},{key:"formatPercentage",value:function(e){return(0,H.H2)(e,2)}},{key:"allowance",value:(m=_()(g()().mark((function e(n){var t;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollateralToken().allowance(n,this._address);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"approve",value:(d=_()(g()().mark((function e(n,t,i){var r,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new W.a(this._library,this._chainId,this._args.collateralToken,void 0),e.next=3,r.allowance(n,this._address);case 3:if(!e.sent.lt(t)&&!i){e.next=9;break}return a=(0,H._b)(1e3),e.next=8,r.approve(this._address,t.mul(a));case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return d.apply(this,arguments)})},{key:"increaseTrade",value:(c=_()(g()().mark((function e(n,t,i,r){var a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.approve(n.account,i);case 2:if(!e.sent){e.next=8;break}return e.next=6,this.send("increaseTrade",[n.isLimit,n.payDelta,n.sizeDelta,n.price,n.tpPrice,n.slPrice,n.slippage,n.isLong,t],r);case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",Promise.resolve(""));case 9:case"end":return e.stop()}}),e,this)}))),function(e,n,t,i){return c.apply(this,arguments)})},{key:"decreaseTrade",value:(u=_()(g()().mark((function e(n,t){var i;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseTrade",[n.isLimit,n.sizeDelta,n.isKeepLev,n.price,n.slippage,n.isLong,t]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return u.apply(this,arguments)})},{key:"increaseCollateral",value:(o=_()(g()().mark((function e(n,t){var i;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("increaseCollateral",[n,t]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return o.apply(this,arguments)})},{key:"decreaseCollateral",value:(l=_()(g()().mark((function e(n,t){var i;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseCollateral",[(0,H._b)(n),t]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return l.apply(this,arguments)})},{key:"updateIncreaseOrder",value:(s=_()(g()().mark((function e(n,t,i,r,a){var s;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateIncreaseOrder",[n,t,i,r,a]);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,t,i,r){return s.apply(this,arguments)})},{key:"updateDecreaseOrder",value:(a=_()(g()().mark((function e(n,t,i){var r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateDecreaseOrder",[n,t,i]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return a.apply(this,arguments)})},{key:"cancelOrder",value:(r=_()(g()().mark((function e(n,t,i){var r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrder",[n,t,i]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return r.apply(this,arguments)})},{key:"cancelOrderList",value:(i=_()(g()().mark((function e(n,t,i){var r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrderList",[n,t,i]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return i.apply(this,arguments)})},{key:"getCtokenDecimals",value:(t=_()(g()().mark((function e(){var n,t,i;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=this._ctoken)||void 0===n||null===(t=n._contract)||void 0===t?void 0:t.decimals();case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"formatCToken",value:(n=_()(g()().mark((function e(n){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,H.dN)(n,6));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}]),y}(A.k),ee=function(e){F()(l,e);var n,t,i,r,a,s=O()(l);function l(e,n){return C()(this,l),s.call(this,e,n,G.Mt)}return I()(l,[{key:"getClassName",value:function(){return"MarketReader"}},{key:"getMarket",value:(a=_()(g()().mark((function e(n){var t,i;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getMarket",n);case 2:return t=e.sent,i=new $(this._library,this._chainId,n,t.mktOuts,t.validOuts,t.feeOuts),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getFundingRate",value:(r=_()(g()().mark((function e(n,t){var i;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingRate",n,t);case 2:return i=e.sent,console.log("result "+t,i),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return r.apply(this,arguments)})},{key:"getFundingFee",value:(i=_()(g()().mark((function e(n,t,i){var r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingFee",n,t,i);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return i.apply(this,arguments)})},{key:"getPositions",value:(t=_()(g()().mark((function e(n,t){var i;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getPositions",n,t||J.dE);case 2:return null==(i=e.sent)||i.forEach((function(e){e.realisedPnl.mul(e.hasProfit?1:-1)})),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"availableLiquidity",value:(n=_()(g()().mark((function e(n,t,i){var r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("availableLiquidity",t,n,i);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,i){return n.apply(this,arguments)})}]),l}(A.k),ne=function(){var e=_()(g()().mark((function e(n,t,i,r,a,s,l){var o,u,c,d;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new ee(s,i),e.next=3,o.getMarket(r);case 3:return u=e.sent,c=new U(s,i,u,l),console.log("marketSelection",u),u.setChainId(i),c.setPendingTxns(t),d=v()(v()({},{accountAddress:"",isLimit:!1,isLong:!0,price:"0",amount:"0",size:"0",pay:"0",leverage:"10",entryPrice:"0",liqPrice:"0",positionFee:"0",executionFee:"0",fundFeeRate:"0",availableLiquidity:"0",slippage:"0.3",openFeeRate:"0",closeFeeRate:"0",Positions:[],Orders:[],Trades:[]}),{},{symbol:(0,Y.D4)(a),accountAddress:l,reader:o,market:u,marketRouter:c,library:s,marketName:a,avlb:"",ctokenDecimals:0,cleanFee:""}),e.next=11,te(d,n);case 11:return d=e.sent,e.abrupt("return",d);case 13:case"end":return e.stop()}}),e)})));return function(n,t,i,r,a,s,l){return e.apply(this,arguments)}}();function te(e,n){return ie.apply(this,arguments)}function ie(){return(ie=_()(g()().mark((function e(n,t){var i,r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.entryPrice=t,!n.market){e.next=28;break}return e.prev=2,e.next=5,n.market.getCtokenDecimals();case 5:n.ctokenDecimals=e.sent,n.openFeeRate=n.market.getOpenFeeRate(),n.closeFeeRate=n.market.getCloseFeeRate(),n.executionFee=n.market.getExecFee(),n.cleanFee=null==n||null===(i=n.market)||void 0===i?void 0:i.getCleanFee(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("getDefaultSwap",e.t0);case 15:if(!n.accountAddress){e.next=28;break}return e.prev=16,e.next=19,n.market.getCollateralToken().balanceOf(n.accountAddress);case 19:return r=e.sent,e.next=22,n.market.formatCToken(r);case 22:n.avlb=e.sent,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(16),console.log("getCollateralToken",e.t1);case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,null,[[2,12],[16,25]])})))).apply(this,arguments)}var re={getEstimatedPNL:function(e){var n=e.isLong,t=e.entryPrice,i=e.price,r=e.size,a=n?1:-1;return(0,q.Q6)(a).multipliedBy(i.minus(t)).multipliedBy(r).dividedBy(t)},getEntryPriceDisplay:function(e,n,t,i,r){var a=(0,q.Q6)((null==r?void 0:r.averagePrice)||0),s=e;if(r){var l=(0,q.Q6)((null==r?void 0:r.PNL)||0);if(!i){var o=(0,q.Q6)((null==r?void 0:r.averagePrice)||0);l=(0,q.Q6)(t?1:-1).multipliedBy(e.minus(o)).multipliedBy((0,q.Q6)(r.size)).dividedBy(o)}var u=n.plus(r.size||0);s=e.multipliedBy(u).dividedBy(u[t?"plus":"minus"](l))}return{rise:s.minus(a).toNumber(),mergePositionPrice:s,existingPositionPrice:a}},getFeeRate:function(e,n){return(0,q.Q6)(1).dividedBy(n).plus(e)},getExecFee:function(e){return(0,q.Q6)(e)},getFundFee:function(e,n){return _()(g()().mark((function t(){var i,r,a;return g()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null==e||null===(i=e.reader)||void 0===i?void 0:i.getFundingFee(null==e?void 0:e.accountAddress,null==e||null===(r=e.market)||void 0===r?void 0:r._address,n);case 2:return a=t.sent,t.abrupt("return",e.market.formatNum(a));case 4:case"end":return t.stop()}}),t)})))()},getFundFeeRete:function(e,n){return _()(g()().mark((function t(){var i,r;return g()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.reader.getFundingRate(e.market._address,n);case 2:return i=t.sent,r=e.market.formatFeeOrRate(null==i?void 0:i[0]),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))()},getFundFeeRateLimit:function(e,n){var t;if(!e)return"0";var i=(0,q.Q6)("0.0000208333"),r=i;return(0,q.Q6)(e).abs().minus(i).gt(0)&&(r=r.multipliedBy(n?1:-1)),null===(t=r)||void 0===t?void 0:t.toString()},getFundFeeRateDisplay:function(e){return e?(0,q.Q6)(e).multipliedBy(100).toFixed(4,1):"-"},getConfirmStat:function(e){var n=e.pay,t=e.openFee,i=e.executionFee,r=e.size,a=e.leverageOption,s=e.existingPosition,l=e.hasExistingPosition,o=e.cleanFee;return{getCollateralDisplay:function(){var e=n.minus(t).minus(i),r=e;return l&&s&&(r=(0,q.Q6)(s.initialCollateral).minus((0,q.Q6)(s.fundingFee||0)).plus(n).minus(t).minus(i)),{rise:r.minus(e).toNumber(),mergePositionPrice:r,existingPositionPrice:(0,q.Q6)(null==s?void 0:s.initialCollateral)}},getLigPriceDisplay:function(e,n,t,i){var r=(0,q.Q6)((null==s?void 0:s.liqPrice)||"0"),a=re.getNextLiqPrice({size:this.getNextSizeDisplay().mergePositionPrice,collateral:this.getCollateralDisplay().mergePositionPrice,isLong:t,fundingFee:(0,q.Q6)(0),positionFeeRate:i,entryPrice:e,maxLeverage:n,cleanFee:o},"test");return{rise:a.minus(r).toNumber(),existingPositionPrice:r,mergePositionPrice:a}},getLeverageDisplay:function(){var e=(0,q.Q6)(a);if(!l)return{rise:0,existingPositionPrice:e,mergePositionPrice:e};var n=this.getCollateralDisplay(),t=this.getNextSizeDisplay().mergePositionPrice.dividedBy(n.mergePositionPrice);return{rise:t.minus(e).toNumber(),existingPositionPrice:(0,q.Q6)((null==s?void 0:s.leverage)||"0"),mergePositionPrice:t}},getNextSizeDisplay:function(){var e=(0,q.Q6)(l&&(null==s?void 0:s.size)||0),n=r.plus(e),t=s?e:n;return{existingPositionPrice:t,mergePositionPrice:n,rise:n.minus(t).toNumber()}}}},getNextLiqPrice:function(e,n){var t=e.size,i=e.entryPrice,r=e.isLong,a=e.positionFeeRate,s=e.fundingFee,l=e.maxLeverage,o=e.collateral,u=e.amount,c=e.cleanFee;if(t.eq(0))return(0,q.Q6)(0);null==l&&(l=(0,q.Q6)(200)),null==u&&(u=(0,q.Q6)(0));var d=t.dividedBy(l||30),p="".concat(t.toNumber(),"/").concat(l||30,"}");c.gt(d)&&(d=c,p="5");var m=t.multipliedBy(a||0),v="".concat(t.toNumber()," * ").concat(null==a?void 0:a.toNumber()),y=t.minus(o).plus(s).plus(m).plus(d),f="".concat(t.toNumber()," - ").concat(o.toNumber()," + ").concat(s.toNumber(),"+ ").concat(v," + ").concat(p);r||(y=t.plus(o).minus(s).minus(m).minus(d),f="".concat(t.toNumber()," + ").concat(o.toNumber()," - ").concat(s.toNumber()," - ").concat(v," - ").concat(p)),null!=u&&y[r?"minus":"plus"](u);var x=y.dividedBy(t).multipliedBy(i);return n&&console.log(n,"(".concat(f,")/").concat(t.toNumber(),"*").concat(i.toNumber())),x},getCoinBasedSizeByUSD:function(e,n){return e.dividedBy(n)},getNextPay:function(e,n,t,i){return(0,q.Q6)(e).multipliedBy(re.getFeeRate(t,i)).multipliedBy((0,q.Q6)(n))},getNextAmount:function(e,n,t,i){return e.gt(0)&&n.gt(0)?e.dividedBy(re.getFeeRate(t,i)).dividedBy(n):(0,q.Q6)(0)},getSize:function(e,n,t){return e.gt(0)?(0,q.Q6)(e).dividedBy(re.getFeeRate(n,t)):(0,q.Q6)(0)},getPayBySize:function(e,n,t){return!e||e.eq(0)?(0,q.Q6)(0):e.multipliedBy(re.getFeeRate(n,t))},getOpenFee:function(e,n){return e.multipliedBy(n)}},ae=function(){var e=_()(g()().mark((function e(n,t){var i,r,a,s,l,o,u,c,d,p,m,y,f,x;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n.accountAddress&&""!=n.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,n.reader.getPositions(n.accountAddress);case 4:a=e.sent,s=[],a=null===(i=a)||void 0===i||null===(r=i.filter((function(e){return+e.size>0})))||void 0===r?void 0:r.sort((function(e,n){var t,i;return+(null==n||null===(t=n.lastTime)||void 0===t?void 0:t.toString())-+(null==e||null===(i=e.lastTime)||void 0===i?void 0:i.toString())})),l=0;case 8:if(!(l<a.length)){e.next=25;break}return d=a[l],e.next=12,n.marketRouter.getFundFee(n,null===(o=a[l])||void 0===o?void 0:o.isLong,a[l].market);case 12:return p=e.sent,e.next=15,n.reader.getMarket(null==d?void 0:d.market);case 15:return m=e.sent,y=m.getOpenFeeRate(),f=m.getExecFee(),e.next=20,n.marketRouter.getFundFeeRete(n,null===(u=a)||void 0===u||null===(c=u[l])||void 0===c?void 0:c.isLong,a[l].market);case 20:x=e.sent,s.push(se(n,v()(v()({},a[l]),{},{fundingFee:p,fundFeeRate:x}),n.accountAddress,y,f,t));case 22:l++,e.next=8;break;case 25:return e.abrupt("return",s);case 26:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function se(e,n,t,i,r,a){var s=e.marketRouter._market;try{var l,o,u=v()(v()({},n),{},{pair:null==a||null===(l=a.find((function(e){return e.address===n.market})))||void 0===l?void 0:l.name,account:t,isLong:n.isLong,size:s.formatNum(n.size),collateral:"0",averagePrice:s.formatPrice(n.averagePrice),fundingFee:(null==n?void 0:n.fundingFee)||"0",realisedPnl:s.formatNum(n.realisedPnl),hasProfit:n.hasProfit,lastTime:n.lastTime,side:n.isLong?"Long":"Short",leverage:"",netValue:"0",PNL:"0",PNLRate:"0",liqPrice:"0",initialCollateral:s.formatNum(n.collateral),fundFeeDay:"0",openCloseFees:"0",PNLAfterFees:"0",orderIDs:null==n?void 0:n.orderIDs,feeRate:i,executionFee:r});u.collateral=(0,q.Q6)(u.initialCollateral).minus(u.fundingFee).toString(),u.leverage="0"===u.collateral?"0":(0,q.Q6)(u.size).dividedBy(u.collateral).toString();var c=i.toString(),d=null==s||null===(o=s._valid)||void 0===o?void 0:o.maxLev,p=(0,q.Q6)((null==d?void 0:d.toNumber())||100),m=(0,q.Q6)(null==e?void 0:e.cleanFee);return u.liqPrice=le(u,i,p,(0,q.Q6)(c),m),u}catch(e){console.log("convertRow",e)}return{}}function le(e,n,t,i,r,a){var s,l=e.fundingFee,o=e.isLong,u=e.collateral,c=e.size,d=(0,q.Q6)(c).multipliedBy(n);return e.positionFee=d.toString(),null===(s=re.getNextLiqPrice({size:(0,q.Q6)(c),collateral:(0,q.Q6)(u),isLong:o,fundingFee:(0,q.Q6)(l),positionFeeRate:i,entryPrice:(0,q.Q6)(null==e?void 0:e.averagePrice),maxLeverage:t,cleanFee:r},a))||void 0===s?void 0:s.toString()}function oe(e,n,t){var i=(0,q.Q6)(e.initialCollateral),r=(0,q.Q6)(e.indexPrice),a=(0,q.Q6)(e.averagePrice),s=(0,q.Q6)(e.size),l=(0,q.Q6)(e.isLong?1:-1).multipliedBy(r.minus(a)).multipliedBy(s).dividedBy(a);e.PNL=l.toString(),function(e,n,t){var i,r,a,s,l=(0,q.Q6)(e.size),o=(0,q.Q6)(n),u=l.multipliedBy(o).multipliedBy(2);e.openCloseFee=null===(i=l.multipliedBy(o).multipliedBy(1))||void 0===i?void 0:i.toString(),e.fundFeeDay=l.multipliedBy(t).multipliedBy(24).toString(),e.PNLAfterFees=null===(r=(0,q.Q6)(null==e?void 0:e.PNL).minus(u).minus((0,q.Q6)(null==e?void 0:e.fundingFee)))||void 0===r?void 0:r.toString(),e.pnlAfterFeesRate=null===(a=(0,q.Q6)(null==e?void 0:e.PNLAfterFees).div((0,q.Q6)(null==e?void 0:e.initialCollateral)))||void 0===a||null===(s=a.multipliedBy(100))||void 0===s?void 0:s.toString()}(e,n,t);var o=i.plus(l).minus(null==e?void 0:e.fundingFee).minus(null==e?void 0:e.openCloseFee);return e.PNLRate=l.div(i).multipliedBy(100).toString(),e.netValue=o.toString(),l.toString()}var ue=t(239),ce=t(21650),de=Object.keys(ce.pQ).map((function(e){return{label:e,value:e}})),pe=(0,u.cn)({key:"coinBased",default:void 0,effects_UNSTABLE:[k.I]}),me=(0,u.cn)({key:"periodAtom",default:"15m",effects_UNSTABLE:[k.I]}),ve=(0,u.nZ)({key:"isCoinBased",get:function(e){return"USD"!==(0,e.get)(pe)}}),ye=(0,u.cn)({key:"Position",default:[]}),fe=(0,u.cn)({key:"Orders",default:[]}),xe=(0,u.cn)({key:"Trades",default:[]}),ge=(0,u.cn)({key:"isHideOtherPairsAtom",default:!1}),he=(0,u.nZ)({key:"positionSelector",get:function(e){var n=e.get,t=n(ue.O7);return n(ye).filter((function(e){var t;return!n(ge)||e.pair===(null===(t=n(ue.bI))||void 0===t?void 0:t.name)})).map((function(e){var n,i,r=v()(v()({},e),{},{indexPrice:(0,L.Z)(t)?"-":null===(n=t[(0,Y.do)(e.pair).toLowerCase()])||void 0===n||null===(i=n.indexPrice)||void 0===i?void 0:i.toString()});return oe(r,null==e?void 0:e.feeRate,null==e?void 0:e.fundFeeRate),r}))}}),_e=(0,u.nZ)({key:"ordersSelector",get:function(e){var n=e.get,t=n(ue.O7);return n(fe).filter((function(e){var t;return!n(ge)||e.pair===(null===(t=n(ue.bI))||void 0===t?void 0:t.name)})).map((function(e){var n,i;return v()(v()({},e),{},{indexPrice:(0,L.Z)(t)?"-":null===(n=t[(0,Y.do)(e.pair).toLowerCase()])||void 0===n||null===(i=n.indexPrice)||void 0===i?void 0:i.toString()})}))}}),be=(0,u.nZ)({key:"tradeSelector",get:function(e){var n=e.get;return n(xe).filter((function(e){var t;return!n(ge)||e.market===(null===(t=n(ue.bI))||void 0===t?void 0:t.name)}))}}),je=(0,u.nZ)({key:"positionCountSelector",get:function(e){var n=e.get;return R(n(ye))}}),Ne=(0,u.nZ)({key:"orderCount",get:function(e){var n=e.get;return R(n(fe))}}),Pe=t(17158),Te=Object.defineProperty,Le=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ce=(e,n,t)=>n in e?Te(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Se=e=>o.createElement("svg",((e,n)=>{for(var t in n||(n={}))ke.call(n,t)&&Ce(e,t,n[t]);if(Le)for(var t of Le(n))we.call(n,t)&&Ce(e,t,n[t]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("g",{filter:"url(#more_svg__b)",clipPath:"url(#more_svg__a)"},o.createElement("path",{d:"m16.8 9-4.837 7.2L7.2 9h9.6Z",fill:"#fff"})),o.createElement("defs",null,o.createElement("clipPath",{id:"more_svg__a"},o.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})),o.createElement("filter",{id:"more_svg__b",x:3.199,y:9,width:17.6,height:15.2,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),o.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),o.createElement("feOffset",{dy:4}),o.createElement("feGaussianBlur",{stdDeviation:2}),o.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),o.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),o.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_313_1951"}),o.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_313_1951",result:"shape"}))));var Ie="btn___r1nTS",Me="targetSelect___WQeay",Fe="menu___rnv_7",De="menus___KY35b",Oe="menuItem___wEjP0",Ae="activeItem___kB1Rj",ze=t(67390),Re=t(86074),Ee=function(e){var n=e.options,t=e.onChange,i=e.value,r=ze.c[i.name];return(0,Re.jsx)("div",{className:Fe,children:(0,Re.jsxs)(Pe.v,{children:[(0,Re.jsxs)(Pe.v.Button,{className:Ie,children:[(0,Re.jsx)(r,{}),(0,Re.jsx)("div",{className:Me,children:null==i?void 0:i.name}),(0,Re.jsx)(Se,{})]}),(0,Re.jsx)(Pe.v.Items,{as:"div",className:De,children:(n||[]).map((function(e,n){return(0,Re.jsx)(Pe.v.Item,{children:function(n){var i=n.active;return(0,Re.jsx)("div",{className:N()(Oe,p()({},Ae,i)),onClick:function(){t(e)},children:(0,Re.jsx)("span",{style:{marginLeft:5},children:e.name})})}},n)}))})]})})},Ze="tab___AIepu",Qe="stats___m5w55",Be="periodTab___AU1Sf",He="tabItem___K48RO",Ve="active___yzxjn",Ue="statsLabel___h81vX",qe="statsValue___haDDX",Ye=function(e){var n=e.options,t=e.stats,i=e.value,r=e.className,a=e.onChange;return(0,Re.jsxs)("div",{className:N()(Ze,r),children:[(0,Re.jsx)("ul",{className:Be,children:n.map((function(e){return(0,Re.jsx)("li",{onClick:function(){return a(e.value)},className:N()(He,p()({},Ve,e.value===i)),children:e.label},e.value)}))}),(0,Re.jsxs)("div",{className:N()(Qe,null==t?void 0:t.className),children:[(0,Re.jsx)("span",{className:Ue,children:"O"}),(0,Re.jsx)("span",{className:qe,children:(null==t?void 0:t.O)||"-"}),(0,Re.jsx)("span",{className:Ue,children:"H"}),(0,Re.jsx)("span",{className:qe,children:(null==t?void 0:t.H)||"-"}),(0,Re.jsx)("span",{className:Ue,children:"L"}),(0,Re.jsx)("span",{className:qe,children:(null==t?void 0:t.L)||"-"}),(0,Re.jsx)("span",{className:Ue,children:"C"}),(0,Re.jsx)("span",{className:qe,children:(null==t?void 0:t.C)||"-"})]})]})},Je=t(38860),Ge=t(74595),Ke=t(37432),We=t(96714),Xe=t(72167);var $e=60*-(new Date).getTimezoneOffset(),en=function(e,n){return{width:e,height:n,layout:{backgroundColor:"rgba(255, 255, 255, 0)",textColor:"#78808E",fontFamily:"Relative"},localization:{timeFormatter:function(e){return n=e-$e,(0,Xe.Z)(1e3*n,"dd MMM yyyy, h:mm a");var n}},grid:{vertLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2},horzLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2}},timeScale:{rightOffset:5,borderVisible:!1,barSpacing:5,timeVisible:!0,fixLeftEdge:!0},priceScale:{borderVisible:!1},crosshair:{horzLine:{color:"#aaa",labelBackgroundColor:"#4a4f58"},vertLine:{color:"#aaa",labelBackgroundColor:"#4a4f58"},mode:0}}},nn=function(e){return e?e.gt(0)?"+".concat(e.toFixed(2,1)):"".concat(e.toFixed(2,1)):"-"},tn={main:"main___baTli",chart:"chart___CLGMg",loadingContainer:"loadingContainer___dxaj2",kchart:"kchart___QYDyz",periodTab:"periodTab___cinp7",header:"header___AT8K5",indexPriceContainer:"indexPriceContainer___vWNqA",currentPrice:"currentPrice___wEDGk",headerRight:"headerRight___fs_Ys",priceBox:"priceBox___yHFEN",title:"title___tV3f3",price:"price___e2U86",percentage:"percentage___S6CTj",negative:"negative___R8NaS",positive:"positive___XgCl2"},rn=function(e){var n,t,i,r,a,l,d,m,y,x=e.indexPrice,h=(0,o.useRef)(),j=(0,o.useState)(),L=s()(j,2),k=L[0],w=L[1],C=(0,o.useState)(!1),S=s()(C,2),I=S[0],M=S[1],F=(0,o.useState)(),D=s()(F,2),O=D[0],A=D[1],z=(0,o.useState)(),R=s()(z,2),E=R[0],Z=R[1],Q=(0,Ke.x)().chainId,B=Ge.I.useContainer().platform,H=(0,u.sJ)(ue.O7),V=(0,u.sJ)(ue.tr),U=(0,u.FV)(me),J=s()(U,2),G=J[0],K=J[1],W=(0,u.FV)(ue.bI),X=s()(W,2),$=X[0],ee=X[1],ne=null===(n=(0,Y.do)(null==$?void 0:$.name))||void 0===n?void 0:n.toLowerCase(),te=(0,c.ZP)([ne&&G?"getKLines":null,ne,G,B],{fetcher:(y=_()(g()().mark((function e(){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Je.w_)({symbol:ne,period:G},B);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return y.apply(this,arguments)})}),ie=te.data,re=te.isLoading,ae=E&&ne&&G?"subscribeKLines":null;(0,T.Z)([ae,ne,G,B],(function(){return ae&&ne&&G?(0,Je.fK)({symbol:ne,period:G},B,(function(e){if(!ie)return function(){};E.update(e)})):function(){}}));var se=function(e){if(e)return{Change:e["24Change"],ChangeRate:e["24ChangeRate"],Hige:e["24Height"],Low:e["24Low"]}}(H[ne]),le=(0,o.useCallback)((function(e){if(e.time){var n,t=f()(e.seriesPrices.values());try{var i=function(){var t=n.value;return w((function(n){return n&&n.time===e.time?n:v()({time:e.time},t)})),"break"};for(t.s();!(n=t.n()).done;){if("break"===i())break}}catch(e){t.e(e)}finally{t.f()}}else w(null)}),[w]);(0,o.useEffect)((function(){var e,n;if(!O&&h.current){var t=(0,P.C2)(h.current,en(null===(e=h.current)||void 0===e?void 0:e.offsetWidth,null===(n=h.current)||void 0===n?void 0:n.offsetHeight));t.subscribeCrosshairMove(le);var i=t.addCandlestickSeries({lineColor:"#5472cc",topColor:"rgba(49, 69, 131, 0.4)",bottomColor:"rgba(42, 64, 103, 0.0)",lineWidth:2,priceLineColor:"#4a4f58",downColor:"#e45561",wickDownColor:"#e45561",upColor:"#70d785",wickUpColor:"#70d785",borderVisible:!1});A(t),Z(i)}}),[]),(0,o.useEffect)((function(){if(O){var e=function(){h.current&&O.resize(h.current.offsetWidth,h.current.offsetHeight)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[O]),(0,o.useEffect)((function(){E&&ie&&ie.length&&(E.setData(ie),I||M(!0))}),[ie,E,I]);var oe=(0,o.useMemo)((function(){var e;if(ie){var n=k||ie[ie.length-1];if(n){return{className:N()((e={},p()(e,tn.positive,n.open<=n.close),p()(e,tn.negative,n.open>n.close),e)),O:(0,q.Q6)(n.open).toFixed(2,1),H:(0,q.Q6)(n.high).toFixed(2,1),L:(0,q.Q6)(n.low).toFixed(2,1),C:(0,q.Q6)(n.close).toFixed(2,1)}}}}),[k,ie]);return(0,Re.jsxs)("div",{className:tn.main,children:[(0,Re.jsxs)("div",{className:tn.header,children:[(0,Re.jsxs)("div",{className:tn.indexPriceContainer,children:[$?(0,Re.jsx)(Ee,{options:V||[],value:$,onChange:function(e){return ee(v()({},e))},chainId:Q}):null,(0,Re.jsxs)("div",{className:tn.currentPrice,children:["$",x||We.P]})]}),(0,Re.jsx)("div",{className:tn.headerRight,children:[{title:"24h Change",text:"".concat(nn(null==se?void 0:se.Change)," ").concat(nn(null==se?void 0:se.ChangeRate),"%"),className:N()(tn.percentage,(r={},p()(r,tn.positive,null==se||null===(t=se.Change)||void 0===t?void 0:t.gt(0)),p()(r,tn.negative,null==se||null===(i=se.Change)||void 0===i?void 0:i.lt(0)),r))},{title:"24h High",text:null!==(a=null==se||null===(l=se.Hige)||void 0===l?void 0:l.toFixed(2,1))&&void 0!==a?a:We.P,className:tn.price},{title:"24h Low",text:null!==(d=null==se||null===(m=se.Low)||void 0===m?void 0:m.toFixed(2,1))&&void 0!==d?d:We.P,className:tn.price}].map((function(e,n){return(0,Re.jsxs)("div",{className:tn.priceBox,children:[(0,Re.jsx)("span",{className:tn.title,children:e.title}),(0,Re.jsx)("span",{className:"".concat(tn.text," ").concat(e.className),children:e.text})]},n)}))})]}),(0,Re.jsxs)("div",{className:tn.kchart,children:[(0,Re.jsx)(Ye,{stats:oe,className:tn.periodTab,value:G,onChange:K,options:de}),(0,Re.jsx)("div",{className:tn.chart,ref:h,children:(0,Re.jsx)("div",{className:tn.loadingContainer,children:re&&(0,Re.jsx)(b.Z,{size:"large"})})})]})]})},an=t(77438),sn=t(28469),ln=t(20243),on="trade____bxq4",un=t(49808),cn=t(78621),dn=t(31917),pn=t(33114),mn="colorGrn___KLrrw",vn="colorRed___dWF0l",yn=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return+e>=0?(0,Re.jsx)("span",{className:N()(p()({},mn,t)),children:"".concat((0,q.dp)(e).display({prefix:"+$"}),"(").concat((0,q.dp)(n).display({prefix:"+",suffix:"%",defaultDisplay:"-%"}),")")}):(0,Re.jsx)("span",{className:N()(p()({},vn,t)),children:"".concat((0,q.dp)(Math.abs(+e)).display({prefix:"-$"}),"(").concat((0,q.dp)(Math.abs(+n)).display({prefix:"-",suffix:"%",defaultDisplay:"-%"}),")")})},fn="card___tsQVf",xn="overlay___ZUkbJ",gn="text___k9r6s",hn="table___aXY5t",_n="colorGrn___kLWyZ",bn="colorRed___i8TYm",jn="containerH5___PZhTu",Nn="orderListItem___HY67m",Pn="pair___pZNcc",Tn="pairLeft___iDcUx",Ln="pos___M0sff",kn="limit___uwUie",wn="orderListItemContent___Nz2ZH",Cn="label___RLBGg",Sn="long___fQO97",In="short___X_7_i",Mn=function(e){var n=e.data;return(0,Re.jsx)("div",{className:jn,children:n.map((function(e){var n;return(0,Re.jsxs)("div",{className:Nn,children:[(0,Re.jsxs)("div",{className:Pn,children:[(0,Re.jsxs)("div",{className:Tn,children:[(0,Re.jsx)("div",{children:e.market}),(0,Re.jsx)("div",{className:N()(Ln,(n={},p()(n,Sn,e.isLong),p()(n,In,!e.isLong),n)),children:e.isLong?"Long":"Short"})]}),(0,Re.jsx)("div",{className:kn,children:(0,Re.jsx)(cn._H,{id:"Limit"})})]}),[{renderTitle:function(){return(0,Re.jsx)(cn._H,{id:"Size"})},value:(0,q.dp)(e.size,2).display()},{renderTitle:function(){return(0,Re.jsx)(cn._H,{id:"Collateral"})},value:(0,q.dp)(e.collateral,2).display({prefix:null!=e&&e.isIncrease?"+$":"-$"})},{renderTitle:function(){return(0,Re.jsx)(cn._H,{id:"Price"})},value:"Canceled"===e.status||"Request"===e.status?(0,q.dp)(e.price).display({prefix:e.triggerAbove?">$":"<$"}):(0,q.dp)(e.price).display()},{renderTitle:function(){return"PNL"},value:"-"!==(null==e?void 0:e.PNL)?yn(null==e?void 0:e.PNL,(Math.floor(1e4*+(null==e?void 0:e.PNLRate))/100).toString()):"-"},{renderTitle:function(){return(0,Re.jsx)(cn._H,{id:"Time"})},value:(0,We.m)(null==e?void 0:e.timestamp)||""},{renderTitle:function(){return(0,Re.jsx)(cn._H,{id:"Status"})},value:e.status}].map((function(e,n){return(0,Re.jsxs)("div",{className:wn,children:[(0,Re.jsx)("span",{className:Cn,children:e.renderTitle()}),(0,Re.jsx)("span",{className:gn,children:e.value})]})}))]})}))})},Fn=t(39965),Dn=t(96963),On=t(94320),An=t(5975),zn=t(58926),Rn=t(98330),En=function(e){var n=e.data,t=(0,Rn.Z)().t,i=(0,Ke.x)().chainId,r=function(e){var n,t,i,r,a=e.type,s=e.side,l=null==s||null===(n=s.split(" "))||void 0===n||null===(t=n[0])||void 0===t?void 0:t.toLowerCase();return null!=a&&null!==(i=a.toLowerCase())&&void 0!==i&&i.includes("deposit")?"+$":null!=a&&null!==(r=a.toLowerCase())&&void 0!==r&&r.includes("withdraw")?"-$":"open"===l?"+$":"close"===l?"-$":"$"},a=[{title:t("Pair"),width:"10%",key:"market",dataIndex:"market"},{width:"10%",title:t("Side"),render:function(e){var n;return(0,Re.jsx)("div",{className:N()((n={},p()(n,_n,"Long"===e.side||"Open Long"===e.side||"Close Short"===e.side),p()(n,bn,"Short"===e.side||"Open Short"===e.side||"Close Long"===e.side),n)),children:null==e?void 0:e.side})}},{width:"15%",title:t("Type"),dataIndex:"type",key:"type"},{width:"10%",title:t("Size"),dataIndex:"size",render:function(e){return(0,q.dp)(e).display()}},{width:"10%",title:t("Collateral"),render:function(e){return(0,q.dp)(e.collateral).display({prefix:r(e)})}},{width:"10%",title:t("Price"),dataIndex:"price",render:function(e,n){return"Canceled"===n.status||"Request"===n.status?(0,q.dp)(e).display({prefix:n.triggerAbove?">$":"<$"}):(0,q.dp)(e).display()}},{width:"10%",title:t("PNL"),render:function(e){return(0,Re.jsx)("span",{children:"-"!=(null==e?void 0:e.PNL)?yn(null==e?void 0:e.PNL,(Math.floor(1e4*+(null==e?void 0:e.PNLRate))/100).toString()):"-"})}},{width:"10%",title:t("Time"),dataIndex:"timestamp",key:"timestamp",render:function(e){return(0,We.m)(e)||""}},{width:"15%",title:t("Status"),dataIndex:"status",key:"Status",align:"right",render:function(e,n){var t=(0,zn.jY)(i)+"tx/"+n.hash;return n.cancelReason?(0,Re.jsx)(Dn.Z,{placement:"top",overlay:(0,Re.jsx)("div",{className:xn,children:(0,Re.jsx)(cn._H,{id:n.cancelReason})}),children:(0,Re.jsx)(An.Z,{href:t,target:"_blank",rel:"noopener noreferrer",children:(0,Re.jsx)(Fn.Z.Text,{className:gn,children:(0,Re.jsx)(cn._H,{id:e})})})}):(0,Re.jsx)(An.Z,{href:t,target:"_blank",rel:"noopener noreferrer",children:(0,Re.jsx)(Fn.Z.Text,{className:gn,children:(0,Re.jsx)(cn._H,{id:e})})})}}];return(0,Re.jsx)(On.Z,{className:hn,size:"small",columns:a,dataSource:n,bordered:!1,pagination:!1,emptyText:t("trades.noHistory")})},Zn=(0,Y.tq)()?Mn:En,Qn=function(e){var n=(0,u.sJ)(be),t=(0,o.useState)(pn.Q),i=s()(t,2),r=i[0],a=i[1],l=(0,o.useMemo)((function(){var e=r*pn.I,t=e-pn.I;return n.slice(t,e)}),[r,n]);return(0,Re.jsxs)("div",{className:fn,children:[(0,Re.jsx)(Zn,{data:l}),!(null==l||!l.length)&&(0,Re.jsx)(dn.Z,{data:l,pageIndex:r,setPageIndex:a,_data:n})]})},Bn=t(28722),Hn=function(){var e=_()(g()().mark((function e(n,t,i){var r,a,s;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,Bn.x7)(i),a='query myQuery {\n    orders(orderDirection: desc, orderBy: timestamp,where: {account: "'.concat(null==n?void 0:n.toLowerCase(),'", isDeleted: false}){\n          id\n          tp\n          sl\n          market\n          timestamp\n          collateral\n          triggerPrice\n          timestamp\n          isLong\n          isIncrease\n          orderId\n          size\n          triggerAbove\n          isLong\n          isKeepLev\n          fromOrder\n          fromPrice\n        }\n      }\n      '),e.next=4,(0,Bn.Dw)(r,a);case 4:return s=e.sent,e.abrupt("return",(null==s?void 0:s.orders)||[]);case 6:case"end":return e.stop()}}),e)})));return function(n,t,i){return e.apply(this,arguments)}}(),Vn=function(){var e=_()(g()().mark((function e(n,t){var i,r,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n.accountAddress&&null!=n.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Hn(n.accountAddress,null==n?void 0:n.marketName,null==n||null===(i=n.market)||void 0===i?void 0:i._chainId);case 4:return r=e.sent,a=[],r.forEach((function(e){var i=Un(e,n,t);a.push(i)})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function Un(e,n,t){var i,r,a,s,l,o,u,c,d,p=null!=e&&e.isIncrease?"Limit":"Trigger",m=null!=e&&e.isIncrease?"Open":"Close",y=e.isIncrease;n.openFeeRate;return v()(v()({},e),{},{pair:null==t||null===(i=t.find((function(n){return n.address.toLowerCase()===e.market})))||void 0===i?void 0:i.name,orderID:e.orderId,type:p,side:null!=e&&e.isLong?m+" Long":m+" Short",collateral:null==n||null===(r=n.market)||void 0===r||null===(a=r.formatNum(e.collateral))||void 0===a?void 0:a.toString(),triggerPrice:null==n||null===(s=n.market)||void 0===s?void 0:s.formatPrice(e.triggerPrice),tp:y?null==n||null===(l=n.market)||void 0===l?void 0:l.formatPrice(e.tp):"0",sl:y?null==n||null===(o=n.market)||void 0===o?void 0:o.formatPrice(e.sl):"0",time:(0,We.m)(e.timestamp),isIncrease:null==e?void 0:e.isIncrease,isLong:null==e?void 0:e.isLong,size:null!==(u=null==n||null===(c=n.market)||void 0===c?void 0:c.formatNum(null==e?void 0:e.size))&&void 0!==u?u:"0",fromPrice:null==n||null===(d=n.market)||void 0===d?void 0:d.formatPrice((null==e?void 0:e.fromPrice)||"0")})}function qn(e,n,t,i){var r=(0,q.Q6)(e);return(r.gt(0)?(0,q.Q6)(n).minus(r).multipliedBy((0,q.Q6)(t)).dividedBy(r):"0").toString()}var Yn,Jn,Gn=t(75291),Kn=t(71279),Wn=function(){var e=_()(g()().mark((function e(){var n,t,i,r,a,s,l=arguments;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:void 0,t=l.length>1?l[1]:void 0,i=(0,Bn.x7)(t),r=null!=n?'account:"'+(null==n?void 0:n.toLowerCase())+'"':"",a="query MyQuery {\n      trades(orderDirection: desc, orderBy: timestamp,where: {".concat(r,"}) {\n        collateral\n        pnl\n        price\n        size\n        side\n        timestamp\n        type\n        status\n        market\n        fromOrder\n        triggerAbove\n        hash\n      }\n    }\n      "),e.next=7,(0,Bn.Dw)(i,a);case 7:return s=e.sent,e.abrupt("return",null!=s&&s.trades?(0,Kn.Z)(null==s?void 0:s.trades,null==s?void 0:s.orders)||[]:(null==s?void 0:s.orders)||[]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xn=function(){var e=_()(g()().mark((function e(n,t){var i,r,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n.accountAddress&&null!=n.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Wn(n.accountAddress,null==n||null===(i=n.market)||void 0===i?void 0:i._chainId);case 4:return r=e.sent,a=[],r.forEach((function(e){a.push(tt(e,n,t))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();!function(e){e[e.Padding=0]="Padding",e[e.Liquidation=1]="Liquidation",e[e.PositionClosed=2]="PositionClosed",e[e.Executed=3]="Executed",e[e.TpAndSlExecuted=4]="TpAndSlExecuted",e[e.Canceled=5]="Canceled",e[e.SysCancel=6]="SysCancel",e[e.PartialLiquidation=7]="PartialLiquidation"}(Jn||(Jn={}));var $n=(Yn={},p()(Yn,Jn.Padding,"CancelReason.Padding"),p()(Yn,Jn.Liquidation,"CancelReason.Liquidation"),p()(Yn,Jn.PositionClosed,"CancelReason.PositionClosed"),p()(Yn,Jn.TpAndSlExecuted,"CancelReason.TpAndSlExecuted"),p()(Yn,Jn.SysCancel,"CancelReason.SysCancel"),p()(Yn,Jn.PartialLiquidation,"CancelReason.PartialLiquidation"),Yn),et={Undefined:Jn.Padding,Liquidation:Jn.Liquidation,"Position Closed":Jn.PositionClosed,Executed:Jn.Executed,"TP-SL Executed":Jn.TpAndSlExecuted,Canceled:Jn.Canceled,"System Cancel":Jn.SysCancel,"Parital Liquidation":Jn.PartialLiquidation},nt=["Request","Executed","Canceled"];function tt(e,n,t){var i,r=n.market,a=et[null==e?void 0:e.status],s=v()(v()({},e),{},{market:null==t||null===(i=t.find((function(n){return n.address.toLowerCase()===e.market})))||void 0===i?void 0:i.name,type:(0,Gn.Z)(null==e?void 0:e.type),size:(0,L.Z)(null==e?void 0:e.size)?"-":r.formatNum(null==e?void 0:e.size),collateral:r.formatNum(null==e?void 0:e.collateral),price:(0,L.Z)(null==e?void 0:e.price)?"-":r.formatPrice(null==e?void 0:e.price),cancelReason:nt.includes(e.status)?void 0:$n[a],status:nt.includes(e.status)?e.status:"Canceled"});return s.PNL=(0,L.Z)(e.pnl)||"Canceled"===s.status?"-":r.formatNum(null==e?void 0:e.pnl),s.PNLRate=(0,L.Z)(null==e?void 0:e.pnl)||0==s.collateral?"-":s.PNL/s.collateral,s}var it=t(335),rt="switch___V_gYU",at="rounded___Q_7Ny",st="switchEnabled___Ca9FC",lt=function(e){var n=e.checked,t=e.className,i=e.onChange;return(0,Re.jsx)(it.r,{checked:n,className:N()(rt,p()({},st,n),t),onChange:i,children:(0,Re.jsx)("div",{className:at})})},ot=t(23751),ut=function(){var e=(0,Ke.x)().chainId,n=(0,l.Ge)().library,t=(0,l.Ge)().account,i=(0,c.ZP)("".concat(e," + market")+"test",(function(){return(0,ot.t)(e,n)}),{refreshInterval:864e5,revalidateOnFocus:!1,revalidateIfStale:!1}).data,a=(0,o.useState)({}),u=s()(a,2),d=u[0],p=u[1],m=(0,o.useState)({}),y=s()(m,2),f=y[0],x=y[1],h=(0,o.useState)({}),b=s()(h,2),j=b[0],N=b[1],P=(0,o.useState)({}),T=s()(P,2),L=T[0],k=T[1],w=(0,o.useState)([]),C=s()(w,2),S=C[0],I=C[1],M=new ee(n,e);return(0,o.useEffect)((function(){var e=function(){var e=_()(g()().mark((function e(){var n,t,r,a,s;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return n=i.map((function(e){return M.getMarket(e.address)})),e.next=5,Promise.allSettled(n);case 5:t=e.sent,r={},a={},s=[],t.forEach((function(e){if("fulfilled"===e.status){var n,t=e.value;r[t._address]={openFeeRate:t.getOpenFeeRate(),closeFeeRate:t.getCloseFeeRate(),executionFee:t.getExecFee(),cleanFee:t.getCleanFee(),maxLev:(null===(n=t._valid.maxLev)||void 0===n?void 0:n.toNumber())||100},a[t._address.toLowerCase()]=v()({},r[t._address]),s.push(t)}else console.error(e.reason)})),p(r),k(a),I(s);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i]),(0,o.useEffect)((function(){var e=function(){var e=_()(g()().mark((function e(){var n,a,s,l,o;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return n=i.map((function(e){return M.getFundingFee(t,e.address,!0)})),a=i.map((function(e){return M.getFundingFee(t,e.address,!1)})),e.next=6,Promise.allSettled(r()(n));case 6:return s=e.sent,e.next=9,Promise.allSettled(r()(a));case 9:l=e.sent,o={},s.forEach((function(e,n){if("fulfilled"===e.status){e.value;o[i[n].address.toLowerCase()]=(0,H.dN)(e.value,18)}else console.error(e.reason)})),x(o),l.forEach((function(e,n){"fulfilled"===e.status?o[i[n].address.toLowerCase()]=(0,H.dN)(e.value,18):console.error(e.reason)})),N(o);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i]),{marketsInfo:d,marketsRaw:S,marketsInfoLowKey:L,marketsFundFeeLong:f,marketsFundFeeShort:j}},ct=t(70794),dt=t(90112),pt=t(26977),mt=Object.defineProperty,vt=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,xt=(e,n,t)=>n in e?mt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const gt=e=>o.createElement("svg",((e,n)=>{for(var t in n||(n={}))yt.call(n,t)&&xt(e,t,n[t]);if(vt)for(var t of vt(n))ft.call(n,t)&&xt(e,t,n[t]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m3 6 5 5 5-5",stroke:"#78808E",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));var ht=t(38478),_t="advanced___MBdTe",bt="header___ifyUh",jt="title___YOTQb",Nt="collectIcon___x8hbZ",Pt="collectedIcon___dhQWJ",Tt="item___oTlSJ",Lt="flex___RaHI3",kt="label___E6FRI",wt="questionIcon___bN9mo",Ct="overlay___eaqfY",St="var___pOK0z",It="panel____HyG6",Mt="openPanel___unKQ2",Ft=function(e){var n=(0,o.useState)(e.collect||!1),t=s()(n,2),i=t[0],r=t[1],a=e.ifSlippage,l=e.value,u=void 0===l?{}:l,c=e.stopLossPNL,d=e.onChange,m=e.ifStopLoss,y=e.ifTakeProfit,f=e.ifAll,x=e.tkpPNL,g=(0,Rn.Z)().t,h=(0,o.useMemo)((function(){return(0,Re.jsx)(cn._H,{id:"AdvancedProfit",values:{takeProfit:u.takeProfit||"--",tkpPNL:x||"--"}})}),[u.takeProfit,x]),_=(0,o.useMemo)((function(){return(0,Re.jsx)(cn._H,{id:"AdvancedStopLess",values:{stopLoss:u.stopLoss||"--",stopLossPNL:c||"--"}})}),[u.stopLoss,c]);return(0,Re.jsxs)("div",{className:_t,children:[(0,Re.jsxs)("div",{className:bt,onClick:function(){r((function(e){return!e}))},children:[(0,Re.jsx)("div",{className:jt,children:g("Advanced")}),(0,Re.jsx)(gt,{className:N()(Nt,p()({},Pt,i))})]}),(0,Re.jsxs)("div",{className:N()(It,p()({},Mt,i)),children:[(m||f)&&(0,Re.jsx)("div",{className:Tt,children:(0,Re.jsx)(pt.ZP,{decimals:2,value:u.stopLoss,onChange:function(e){d(v()(v()({},u),{},{stopLoss:e}))},label:(0,Re.jsxs)("div",{className:Lt,children:[(0,Re.jsx)("div",{className:kt,children:g("Stop Loss")}),(0,Re.jsx)(Dn.Z,{overlayStyle:{maxWidth:320},placement:"top",overlay:(0,Re.jsx)("div",{className:Ct,children:_}),children:(0,Re.jsx)(ht.r,{className:wt})})]}),children:(0,Re.jsx)("div",{className:St,children:"USD"})})}),(y||f)&&(0,Re.jsx)("div",{className:Tt,children:(0,Re.jsx)(pt.ZP,{decimals:2,value:u.takeProfit,onChange:function(e){d(v()(v()({},u),{},{takeProfit:e}))},label:(0,Re.jsxs)("div",{className:Lt,children:[(0,Re.jsx)("div",{className:kt,children:g("Take Profit")}),(0,Re.jsx)(Dn.Z,{overlayStyle:{maxWidth:320},placement:"top",overlay:(0,Re.jsx)("div",{className:Ct,children:h}),children:(0,Re.jsx)(ht.r,{className:wt})})]}),children:(0,Re.jsx)("div",{className:St,children:"USD"})})}),(a||f)&&(0,Re.jsx)("div",{className:Tt,children:(0,Re.jsx)(pt.ZP,{value:u.slippage,decimals:2,onChange:function(e){d(v()(v()({},u),{},{slippage:e}))},label:(0,Re.jsxs)("div",{className:Lt,children:[(0,Re.jsx)("div",{className:kt,children:g("Slippage")}),(0,Re.jsx)(Dn.Z,{overlayStyle:{maxWidth:320},placement:"top",overlay:(0,Re.jsx)("div",{className:Ct,children:g("Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are volatile.")}),children:(0,Re.jsx)(ht.r,{className:wt})})]}),children:(0,Re.jsx)("div",{className:St,children:"%"})})})]})]})},Dt=Object.defineProperty,Ot=Object.getOwnPropertySymbols,At=Object.prototype.hasOwnProperty,zt=Object.prototype.propertyIsEnumerable,Rt=(e,n,t)=>n in e?Dt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Et=e=>o.createElement("svg",((e,n)=>{for(var t in n||(n={}))At.call(n,t)&&Rt(e,t,n[t]);if(Ot)for(var t of Ot(n))zt.call(n,t)&&Rt(e,t,n[t]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M7.652 12h2.319L13.5 8 9.97 4H7.653l2.795 3.234H2.5v1.532h7.947L7.652 12Z"}));var Zt,Qt="field___AEG_L",Bt="label___JBZb5",Ht="value___dSa5M",Vt="nextValue___o1dcE",Ut="oldValue___XDLug",qt="arrowRed___HnTAV",Yt="arrowGrn___ttBc1",Jt=function(e,n,t,i,r){var a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=s.ntAppend,o=void 0===l?r:l,u=s.ntPrefix,c=void 0===u?i:u,d=s.displayDecimals,m=void 0===d?2:d,v=(0,Rn.Z)(),y=v.t,f=function(e,n){var t;return t={},p()(t,Yt,+e<+n),p()(t,qt,+e>+n),t},x=t&&+t!=+n;return(0,Re.jsx)(Re.Fragment,{children:(0,Re.jsxs)("div",{className:Qt,children:[e&&(0,Re.jsxs)("div",{className:Bt,children:[" ","string"==typeof e?y(e):e]}),(0,Re.jsxs)("div",{className:Ht,children:[(0,Re.jsx)("div",{className:N()((a={},p()(a,"".concat(Ht," ").concat(Ut),x),p()(a,Vt,!x),a)),children:!Number.isNaN(n)&&isFinite(+n)?"".concat(null!=s&&s.formatNowValue?s.formatNowValue(n):(0,q.dp)(n,m).display({suffix:r,prefix:i})):"-"}),x&&!Number.isNaN(t)&&isFinite(+t)&&(0,Re.jsxs)("div",{className:Vt,children:[(0,Re.jsx)("span",{className:N()(f(n,t)),children:(0,Re.jsx)(Et,{})}),null==s?void 0:s.defaultValue,!(null!=s&&s.defaultValue)&&"".concat(c||"").concat(null!=s&&s.formatNextValue?s.formatNextValue(t):(0,q.dp)(t,m).display({prefix:"",suffix:""})).concat(o||"")]})||""]})]})})},Gt={card:"card___fdBku",header:"header___mYjMg",title:"title___DaWZ7",right:"right___VLVON",switch:"switch___JvgPx",table:"table___fNLlk",pnl:"pnl___pZIIu",side:"side___qR1Jt",editCancel:"editCancel___JKw0Q",edit:"edit___DUhY3",submitBtn:"submitBtn___pc5K5",field:"field___bbKYP",label:"label___CTyu8",value:"value___madrW",old:"old___XZbZw",new:"new___sFZEB",colorGrn:"colorGrn___FQhdW",colorRed:"colorRed___WPYKL",container:"container___FOa3G",orderListItem:"orderListItem___Gatca",pair:"pair___FE70j",pairLeft:"pairLeft___qFO3w",pos:"pos___d4i57",limit:"limit___fouyr",orderListItemContent:"orderListItemContent___vcvzS",text:"text___Kq6d1",btnsH5:"btnsH5___X2Ryv",btnH5:"btnH5___PjA4_",long:"long___ViDnD",short:"short___GTRN3",warning:"warning___wpdDT",warningTitle:"warningTitle___Eykl4",warningYellow:"warningYellow___XY5d_"},Kt=function(e){return void 0===e||0==+e||(0,L.Z)(e)?"":(0,q.Q6)(e||"").toFixed(2,1)},Wt=function(e){var n,t,i=(0,Rn.Z)().t,r=ut().marketsInfoLowKey,a=e.isVisible,c=e.setIsVisible,d=e.row,p=e.tradeShowArgs,m=e.successCb,y=e.marketsFundFeeLong,f=e.marketsFundFeeShort,x=(0,o.useState)(Kt(null==d?void 0:d.triggerPrice)),g=s()(x,2),h=g[0],_=g[1],b=(0,l.Ge)(),j=b.active,N=b.account,P=(0,o.useState)(!1),T=s()(P,2),L=T[0],k=T[1],w=(0,o.useState)(Kt(null==d?void 0:d.sl)),C=s()(w,2),S=C[0],I=C[1],M=(0,o.useState)(Kt(null==d?void 0:d.tp)),F=s()(M,2),D=F[0],O=F[1],A=(0,u.sJ)(he),z=null==d?void 0:d.isLong,R=null==p||null===(n=p.market)||void 0===n||null===(t=n._valid)||void 0===t?void 0:t.maxLev,E=(0,q.Q6)((null==R?void 0:R.toNumber())||100),Z=d.indexPrice,B=(0,o.useMemo)((function(){if(A&&A.length>0){var e="".concat(z?"Long":"Short");return A.find((function(n){return n.pair===(null==d?void 0:d.pair)&&n.account===N&&n.side===e}))}return null}),[A,z]),H=(0,o.useMemo)((function(){return Boolean(B&&B.size&&(0,q.Q6)(B.size).gt(0))}),[B]),V=(0,o.useMemo)((function(){var e=r[null==d?void 0:d.market];if(e)return e}),[r]),U=(0,o.useMemo)((function(){var e,n;return d.isLong?null!==(e=y[d.market])&&void 0!==e?e:"0":null!==(n=f[d.market])&&void 0!==n?n:"0"}),[y,f,d.isLong]),Y=(0,o.useMemo)((function(){if(!V)return{_nextReceive:"0",receiveNeg:!1};var e=V.executionFee,n=V.openFeeRate,t=(0,q.Q6)(d.size).multipliedBy(n),i=(0,q.Q6)((null==B?void 0:B.fundingFee)||U).plus(e).plus(t),r=(0,q.Q6)(qn((null==B?void 0:B.averagePrice)||(null==d?void 0:d.fromPrice)||"0",h,d.size,d.isLong)),a=(0,q.Q6)(r).minus(i);return{_nextReceive:a,receiveNeg:null==a?void 0:a.lte(0)}}),[V,U,null==B?void 0:B.fundingFee]),J=Y._nextReceive,G=Y.receiveNeg,K=(0,o.useMemo)((function(){var e,n,t=h,i=(0,q.Q6)(null==d?void 0:d.size),r=null==p?void 0:p.executionFee,a=(0,q.Q6)(r||0),s=null==p?void 0:p.openFeeRate,l=(0,q.Q6)(s||0),o=re.getOpenFee(i,l),u=(0,q.Q6)(null!==(e=null==p?void 0:p.cleanFee)&&void 0!==e?e:"0"),c=re.getEntryPriceDisplay((0,q.Q6)(h),i,z,!1,B),m=re.getConfirmStat({size:(0,q.Q6)(null==d?void 0:d.size),leverageOption:0,executionFee:a,entryPrice:(0,q.Q6)(null==d?void 0:d.triggerPrice),existingPosition:B,positionFeeRate:(0,q.Q6)(s||0),hasExistingPosition:H,pay:(0,q.Q6)(null==d?void 0:d.collateral),openFee:o,cleanFee:u}),y=re.getConfirmStat({size:(0,q.Q6)(null==d?void 0:d.size),leverageOption:0,executionFee:a,entryPrice:c.mergePositionPrice,existingPosition:B,positionFeeRate:(0,q.Q6)(s||0),hasExistingPosition:H,pay:(0,q.Q6)(null==d?void 0:d.collateral),openFee:o,cleanFee:u}).getLigPriceDisplay(c.mergePositionPrice,E,z,l),f=m.getLigPriceDisplay((0,q.Q6)(null==d?void 0:d.triggerPrice),E,z,l),x=y.mergePositionPrice.toString(),g=B?null==B?void 0:B.liqPrice:f.mergePositionPrice.toString(),_=(0,q.Q6)(null==B?void 0:B.size).minus((0,q.Q6)(null==d?void 0:d.size)),b=null===(n=(0,q.Q6)(null==B?void 0:B.feeRate))||void 0===n?void 0:n.toString(),j=(0,q.Q6)(s),N=(0,q.Q6)(u),P=_.dividedBy((0,q.Q6)(null==B?void 0:B.size)),T=d.isKeepLev?P.multipliedBy(null==B?void 0:B.initialCollateral):(0,q.Q6)(null==B?void 0:B.initialCollateral).minus((0,q.Q6)(null==d?void 0:d.collateral));G&&(T=T.plus(Number(J)));var L=le(v()(v()({},d),{},{fundingFee:"0",size:_.toString(),collateral:T.toString(),averagePrice:null==B?void 0:B.averagePrice}),b,E,j,N);return{nextOrderPrice:t,nextLimitLiq:x,initLiqPrice:g,nextTriggerLiq:H?L:"0",initTriggerLiq:H?null==B?void 0:B.liqPrice:"0"}}),[h,null==B?void 0:B.PNL]),W=K.nextOrderPrice,X=K.nextLimitLiq,$=K.initLiqPrice,ee=K.nextTriggerLiq,ne=K.initTriggerLiq,te=(0,o.useMemo)((function(){return new ct.Z(h).isEqualTo(new ct.Z(null==d?void 0:d.triggerPrice))?$:X}),[h,E,Z,G]),ie=function(){var e=function(){if(!h)return{id:"enterPrice",defaultMessage:"Enter a price"};if(null!=d&&d.isIncrease)if(null!=d&&d.isLong){if(+h>=+Z)return{id:"priceAboveCurrent",defaultMessage:"Price above current price"};if(""!==S){if(+S>=+h)return{id:"stopLossAboveOrder",defaultMessage:"Stop loss above order price"};if(+S<=+X)return{id:"stopLossBelowLiq",defaultMessage:"Stop loss below liq.price"}}if(""!==D&&+D<=+h)return{id:"takeProfitBelowOrder",defaultMessage:"Take profit below order price"}}else{if(+h<=+Z)return{id:"priceBelowCurrent",defaultMessage:"Price below current price"};if(""!==S){if(+S<=+h)return{id:"stopLossBelowOrder",defaultMessage:"Stop loss below order price"};if(+S>=+X)return{id:"stopLossAboveLiq",defaultMessage:"Stop loss above liq.price"}}if(""!==D&&+D>=+h)return{id:"takeProfitAboveOrder",defaultMessage:"Take profit above order price"}}else if(null!=d&&d.isLong){if(+h<=+ee)return{id:"priceBelowLiq",defaultMessage:"Price below liq.price"}}else if(+h>=+ee)return{id:"priceAboveLiq",defaultMessage:"Price above liq.price"};return L?{id:"updatingOrder",defaultMessage:"Updating order..."}:{id:"",defaultMessage:""}}();return e.id?{btnTxt:e.id||e.defaultMessage,btnValid:!1}:{btnTxt:"updateOrder",btnValid:!0}},ae=(0,o.useMemo)((function(){return ie()}),[h,L,z,null==d?void 0:d.isIncrease,S,D,$,te,H,Z,X,ee]),se=ae.btnTxt,oe=ae.btnValid,ue=(0,o.useMemo)((function(){return[D?re.getEstimatedPNL({isLong:z,entryPrice:(0,q.Q6)(h),price:(0,q.Q6)(D),size:(0,q.Q6)(null==d?void 0:d.size)}).toFixed(2,1):"",S?re.getEstimatedPNL({isLong:z,entryPrice:(0,q.Q6)(h),price:(0,q.Q6)(S),size:(0,q.Q6)(null==d?void 0:d.size)}).toFixed(2,1):""]}),[D,S,z,h]),ce=s()(ue,2),de=ce[0],pe=ce[1];return(0,Re.jsx)("div",{className:Gt.modal,children:(0,Re.jsxs)(dt.Z,{title:i("Orders.editOrderTitle",{type:null==d?void 0:d.type}),onClose:function(){return c(!1)},visible:a,width:512,children:[(0,Re.jsx)(pt.tV,{value:h,onChange:_,decimals:2}),(null==d?void 0:d.isIncrease)&&(0,Re.jsx)(Ft,{value:{stopLoss:S,takeProfit:D},ifStopLoss:!0,ifTakeProfit:!0,onChange:function(e){I((null==e?void 0:e.stopLoss)||""),O((null==e?void 0:e.takeProfit)||"")},tkpPNL:de,stopLossPNL:pe}),(0,Re.jsxs)("div",{className:Gt.fields,children:[Jt(i("orderPrice"),null==d?void 0:d.triggerPrice,h,null!=d&&d.triggerAbove?">$":"<$","",{ntPrefix:+W<+Z?"<$":">$"}),Jt(i("indexPrice"),Z,"","$"),H?null!=d&&d.isIncrease?Jt(i("liqPrice"),$,X,"$"):Jt(i("liqPrice"),ne,ee,"$"):null!=d&&d.isIncrease?Jt(i("liqPrice"),X,"","$"):Jt(i("liqPrice"),"-","-","$")]}),(0,Re.jsx)(an.Z,{className:Gt.submitBtn,disabled:L||!oe,onClick:function(){j&&N&&(k(!0),function(e,n,t,i,r){console.log("-----editOrder-----",e,t,i,r);var a=n.market;return null!=e&&e.isIncrease?n.marketRouter.increaseOrder(v()(v()({},e),{},{price:a.getPriceDecimals(t),tpPrice:a.getPriceDecimals(i||0),slPrice:a.getPriceDecimals(r||0),account:n.accountAddress,isLimit:e.isIncrease,payDelta:a.parseNumber(e.collateral,18),sizeDelta:a.parseNumber(e.size,18),isKeepLev:!1,isCreate:!1,slippage:"0",isExec:!1,_market:e.market}),Q.s(""),null):n.marketRouter.decreaseOrder(v()(v()({},e),{},{price:a.getPriceDecimals(t),tpPrice:a.getPriceDecimals(i||0),slPrice:a.getPriceDecimals(r||0),account:n.accountAddress,isLimit:e.isIncrease,payDelta:a.parseNumber(e.collateral,18),sizeDelta:a.parseNumber(e.size,18),isKeepLev:!1,isCreate:!1,slippage:"0",isExec:!1,_market:e.market}),Q.s(""),null)}(d,p,h,D,S).then((function(e){m(),c(!1)})).catch((function(e){return console.log("confirm",e)})).finally((function(){k(!1)})))},children:i(se)})]})})},Xt=t(78575),$t="overlay___ob7Kb",ei="overlayTitle___Qu9fp",ni="overlayContent___FYtAF",ti="coinBaseSize____bRmf",ii=function(e){var n=e.usdSize,t=e.symbol,i=e.entryPrice,r=e.priceLabel||"Entry Price";return(0,Re.jsxs)("div",{className:$t,children:[(0,Re.jsxs)("div",{className:ei,children:["Size(",t,")"]}),(0,Re.jsx)("div",{children:"Size(".concat(t,")= Size(USD) / ").concat(r)}),(0,Re.jsx)("div",{children:"Size(USD): $".concat((0,q.Q6)(n).toFixed(Xt.Bx,1))}),(0,Re.jsx)("div",{children:"".concat(r,": $").concat((0,q.Q6)(i).toFixed(Xt.Bx,1))}),(0,Re.jsx)("div",{className:ni,children:(0,Re.jsx)(cn._H,{id:"Trading units using stable coins in BLEX such as USD, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."})})]})},ri=function(){return(0,Re.jsxs)("div",{className:$t,children:[(0,Re.jsx)("div",{className:ei,children:"Size(USD)"}),(0,Re.jsx)("div",{className:ni,children:(0,Re.jsx)(cn._H,{id:"Trading units using stable coins in BLEX such as USD, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."})})]})},ai=function(e){var n=e.usdSize,t=e.priceLabel,i=e.entryPrice,r=e.symbol;return(0,u.sJ)(ve)?(0,Re.jsx)(Dn.Z,{overlayStyle:{minWidth:340},overlay:(0,Re.jsx)(ii,{priceLabel:t,symbol:r,usdSize:n,entryPrice:i}),children:(0,Re.jsx)("div",{className:ti,children:"".concat((0,q.dp)(re.getCoinBasedSizeByUSD((0,q.Q6)(n),(0,q.Q6)(i)),4).display({suffix:" ".concat(r),prefix:""}))})}):(0,Re.jsx)(Dn.Z,{overlayStyle:{minWidth:340},overlay:(0,Re.jsx)(ri,{}),children:(0,Re.jsxs)("div",{className:ti,children:[" $",(0,q.Q6)(n).toFixed(2,1)]})})},si=t(48268),li=t(27484),oi=t.n(li),ui="buttons___aWMiP",ci="overlay___b12N7",di=function(e){var n=e.svgName,i=void 0===n?"edit":n,r=e.children,a=e.toolTipContent,s=e.overlayClass,l=void 0===s?ci:s,o=e.append,u=void 0===o?"svg":o,c=e.imgClass,d=e.overlayStyle;return(0,Re.jsx)("div",v()(v()({},e),{},{children:a?(0,Re.jsx)(Dn.Z,{placement:"top",overlayStyle:d||{minWidth:"auto"},overlay:(0,Re.jsx)("div",{className:l,children:(0,Re.jsx)("span",{children:a})}),children:(0,Re.jsx)("span",{children:i?(0,Re.jsx)("img",{src:t(77912)("./".concat(i,".").concat(u)),className:c}):r})}):(0,Re.jsx)("span",{style:{cursor:"default"},children:i?(0,Re.jsx)("img",{src:t(77912)("./".concat(i,".").concat(u)),className:c}):r})}))},pi=function(e){var n,t=e.buttons;return(0,Re.jsx)("div",{className:ui,children:null==t||null===(n=t.filter((function(e){return e.visible})))||void 0===n?void 0:n.map((function(e,n){return e.slot?e.slot:(0,Re.jsx)(di,v()({},e),e.id||n)}))})};!function(e){e[e.noPos=0]="noPos",e[e.orderSize=1]="orderSize",e[e.limitReached=2]="limitReached",e[e.stopLoss=3]="stopLoss"}(Zt||(Zt={}));var mi=(0,Y.tq)()?function(e){var n=e.orders,t=e.handleEdit,i=e.handleCancel;return(0,Re.jsx)("div",{className:Gt.container,children:n.map((function(e,n){var r,a;return(0,Re.jsxs)("div",{className:Gt.orderListItem,children:[(0,Re.jsxs)("div",{className:Gt.pair,children:[(0,Re.jsxs)("div",{className:Gt.pairLeft,children:[(0,Re.jsxs)("div",{children:[" ",e.pair," "]}),(0,Re.jsx)("div",{className:N()(Gt.pos,(r={},p()(r,Gt.long,e.isLong),p()(r,Gt.short,!e.isLong),r)),children:e.isLong?"Long":"Short"})]}),(0,Re.jsx)("div",{className:Gt.limit,children:(0,Re.jsx)(cn._H,{id:"Limit"})})]}),[{title:function(){return(0,Re.jsx)(cn._H,{id:"Size"})},value:(0,Re.jsx)(ai,{priceLabel:"Order Price",entryPrice:e.triggerPrice,symbol:(0,Y.D4)(e.pair),usdSize:e.size})},{title:function(){return(0,Re.jsx)(cn._H,{id:"Collateral"})},value:(0,Re.jsx)(si.Z,{value:+e.isIncrease?e.collateral:null===(a=Math.abs(+e.collateral))||void 0===a?void 0:a.toString(),prefix:+e.isIncrease?"$":"-$"})},{title:function(){return(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)(cn._H,{id:"Index"})," ",(0,Re.jsx)(cn._H,{id:"Price"})]})},value:(0,Re.jsx)(si.Z,{value:e.indexPrice,prefix:"$"})},{title:function(){return(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)(cn._H,{id:"Order"})," ",(0,Re.jsx)(cn._H,{id:"Price"})]})},value:(0,Re.jsx)(si.Z,{value:null==e?void 0:e.triggerPrice,prefix:null!=e&&e.triggerAbove?">$":"<$"})},{title:function(){return"TP/SL"},value:(0,Re.jsx)(si.y,{values:[{value:Number((null==e?void 0:e.tp)||0)>0?null==e?void 0:e.tp:void 0,prefix:"$"},{value:Number((null==e?void 0:e.sl)||0)>0?null==e?void 0:e.tp:void 0,prefix:"$"}]})},{title:function(){return(0,Re.jsx)(cn._H,{id:"Time"})},dataIndex:"time",value:e.time}].map((function(e,n){return(0,Re.jsxs)("div",{className:Gt.orderListItemContent,children:[(0,Re.jsx)("span",{className:Gt.label,children:e.title()}),(0,Re.jsx)("span",{className:Gt.text,children:e.value})]})})),(0,Re.jsxs)("div",{className:Gt.btnsH5,children:[(0,Re.jsx)("div",{className:Gt.btnH5,onClick:function(){return t(e,n)},children:(0,Re.jsx)(cn._H,{id:"Edit"})}),(0,Re.jsx)("div",{className:Gt.btnH5,onClick:function(){return i(e)},children:(0,Re.jsx)(cn._H,{id:"Cancel"})})]})]})}))})}:function(e){var n=e.orders,t=e.handleCancel,i=e.handleEdit,r=e.handleCancelAll,a=(0,u.sJ)(he),l=(0,Rn.Z)().t,o=[{width:"10%",title:function(){return(0,Re.jsx)(cn._H,{id:"Pair"})},dataIndex:"pair",render:function(e){return e||"-"}},{width:"10%",title:function(){return(0,Re.jsx)(cn._H,{id:"Side"})},key:"side",render:function(e){var n;return(0,Re.jsx)("div",{className:N()((n={},p()(n,Gt.colorGrn,(null==e?void 0:e.isLong)==(null==e?void 0:e.isIncrease)),p()(n,Gt.colorRed,(null==e?void 0:e.isLong)!==(null==e?void 0:e.isIncrease)),n)),children:null==e?void 0:e.side})}},{width:"8%",title:function(){return(0,Re.jsx)(cn._H,{id:"Type"})},dataIndex:"type",key:"type"},{width:"8%",title:function(){return(0,Re.jsx)(cn._H,{id:"Size"})},dataIndex:"size",key:"size",render:function(e,n){var t=(0,Y.D4)(n.pair);return(0,Re.jsx)(ai,{priceLabel:l("orderPrice"),entryPrice:n.triggerPrice,symbol:t,usdSize:e})}},{width:"8%",title:function(){return(0,Re.jsx)(cn._H,{id:"Collateral"})},key:"collateral",render:function(e){var n,t=+e.isIncrease?e.collateral:null===(n=Math.abs(+e.collateral))||void 0===n?void 0:n.toString(),i=+e.isIncrease?"+$":"-$";return(0,Re.jsx)(si.Z,{value:t,prefix:i})}},{width:"8%",title:function(){return(0,Re.jsx)(cn._H,{id:"indexPrice"})},render:function(e){return(0,Re.jsx)(si.Z,{value:e.indexPrice,prefix:"$"})}},{width:"8%",title:function(){return(0,Re.jsx)(cn._H,{id:"orderPrice"})},render:function(e){return(0,Re.jsx)(si.Z,{value:null==e?void 0:e.triggerPrice,prefix:null!=e&&e.triggerAbove?">$":"<$"})}},{width:"10%",title:function(){return(0,Re.jsx)(cn._H,{id:"tpSL"})},render:function(e){return(0,Re.jsx)(si.y,{values:[{value:Number((null==e?void 0:e.tp)||0)>0?null==e?void 0:e.tp:void 0,prefix:"$"},{value:Number((null==e?void 0:e.sl)||0)>0?null==e?void 0:e.sl:void 0,prefix:"$"}]})}},{width:"10%",title:function(){return(0,Re.jsx)(cn._H,{id:"Time"})},dataIndex:"time",key:"time"},{width:"15%",align:"right",title:null!=n&&n.length?(0,Re.jsx)("span",{onClick:r,className:"cp cMain",children:l("cancelAll")}):(0,Re.jsx)(Re.Fragment,{}),render:function(e,r,o){var u=function(e){var t=function(e,n){return(0,Re.jsxs)("div",{className:Gt.warning,children:[(0,Re.jsx)("div",{className:Gt.warningTitle,children:l("WARNING")}),(0,Re.jsx)("div",{className:Gt.warningContent,children:(0,Re.jsx)(cn._H,{id:"Orders."+Zt[e],values:{triggerAbove:n?"above":"below"}})})]})},i=e.sl,r=e.tp,o=e.type,u=e.isLong,c=e.pair,d=e.size,p=function(e,n){var t=a.find((function(t){return t.pair===e&&t.isLong===n}));return t?[!0,t]:[!1,{}]}(c,u),m=s()(p,2),v=m[0],y=m[1];if("Trigger"===o){if(!v)return[!0,t(0)];if(+d>+y.size)return[!0,t(1)]}if(+r>0||+i>0){var f=Number(null==e?void 0:e.liqPrice)||0;if(function(e,t){var i;return(null===(i=n.filter((function(n){return n.pair===e&&n.isLong===t&&"Trigger"===n.type})))||void 0===i?void 0:i.length)||0}(c,u)>=10)return[!0,t(2)];if(v&&+i>0&&(+i<f===u||+i>f==!u))return[!0,t(3,+i>f)]}return[!1,(0,Re.jsx)(Re.Fragment,{})]}(e),c=s()(u,2),d=c[0],p=c[1],m=function(e,n,t){return(0,Re.jsx)(cn._H,{id:"Orders.pnlText",values:{type:e,triggerPrice:t,PNL:n}})},v=[{svgName:"warningYellow",toolTipContent:p,visible:d,overlayClass:Gt.warningYellow,overlayStyle:{minWidth:320}},{svgName:"mainorder",toolTipContent:+e.tp>0||+e.sl>0?function(e){var n=e.tp,t=e.sl,i=(e.isLong,+n>0),r=+t>0,a=(0,q.dp)(qn(e.triggerPrice,n,e.size)||"").display({prefix:""}),s=(0,q.dp)(qn(e.triggerPrice,t,e.size)||"").display({prefix:""});return(0,Re.jsxs)("div",{className:Gt.warning,children:[(0,Re.jsx)("div",{className:Gt.warningTitle,children:(0,Re.jsx)(cn._H,{id:"Orders.tpOrSL"})}),(0,Re.jsxs)("div",{className:Gt.warningContent,children:[(0,Re.jsx)(cn._H,{id:"Orders.orderSet",values:{TP:i?"tp":"",and:i&&r?"and":"",SL:r?"sl":""}}),(0,Re.jsx)("br",{}),i&&m(l("tp"),a,n),(0,Re.jsx)("br",{}),r&&m(l("sl"),s,t)]})]})}(e):void 0,visible:"Limit"===e.type&&(+e.tp>0||+e.sl>0),overlayStyle:{minWidth:320}},{svgName:"suborder",toolTipContent:function(e,n){var t=(0,Y.D4)(n.pair),i=(0,q.dp)(qn(null!==n.fromPrice?n.fromPrice:n.indexPrice,n.triggerPrice,n.size,n.isLong)||"").display({prefix:""}),r=n.triggerPrice;return(0,Re.jsxs)("div",{className:Gt.warning,children:[(0,Re.jsx)("div",{className:Gt.warningTitle,children:(0,Re.jsx)(cn._H,{id:"Orders.tpOrSL"})}),(0,Re.jsxs)("div",{className:Gt.warningContent,children:[(0,Re.jsx)(cn._H,{id:"Orders.orderWithType",values:{type:e}}),(0,Re.jsx)("br",{}),function(e){return"".concat(e.isIncrease?l("Increase"):l("Close")," ").concat(t," ").concat(e.isLong?l("Long"):l("Short"),", ").concat(e.collateral," USD, ").concat(t," ").concat(l("Price"),": ").concat(e.indexPrice," USD, ").concat(oi()(1e3*+e.timestamp).format("DD MMM YYYY, HH:mm A"),". ")}(n),(0,Re.jsx)("br",{}),m(e,i,r)]})]})}(e.isLong===e.triggerAbove?"Take Profit":"Stop Loss",e),visible:"Trigger"===(null==e?void 0:e.type)&&+(null==e?void 0:e.fromOrder)>0,overlayStyle:{minWidth:320}},{svgName:"edit",toolTipContent:"Edit",onClick:function(){return i(e,o)},visible:!0},{svgName:"close",toolTipContent:"Cancel",onClick:function(){return t(e)},visible:!0}];return(0,Re.jsx)(Re.Fragment,{children:(0,Re.jsx)(pi,{buttons:v})})}}];return(0,Re.jsx)(On.Z,{className:Gt.table,size:"small",columns:o,dataSource:n,bordered:!1,pagination:!1,emptyText:"No Open Orders"})},vi=function(e){var n=e.tradeShowArgs,t=e.successCb,i=(0,u.sJ)(_e),r=(0,o.useState)(!1),a=s()(r,2),l=a[0],c=a[1],d=(0,o.useState)({}),p=s()(d,2),m=p[0],y=p[1],f=(0,o.useState)(void 0),x=s()(f,2),g=x[0],h=x[1],_=(0,u.sJ)(he),b=(0,o.useState)(pn.Q),j=s()(b,2),N=j[0],P=j[1],T=(0,o.useMemo)((function(){var e=N*pn.I,n=e-pn.I;return i.slice(n,e)}),[N,i]),L=ut(),k=L.marketsFundFeeLong,w=L.marketsFundFeeShort,C=L.marketsInfoLowKey,S=(0,o.useMemo)((function(){return T.map((function(e,n){var t,i=_.find((function(n){return n.pair===e.pair&&n.isLong===e.isLong}));return t=i?function(e,n){var t,i,r,a,s,l=null!==(t=C[e.market])&&void 0!==t?t:{},o=(i=(0,q.Q6)(n.size)[(e.isIncrease,"plus")](e.size),r=(0,q.Q6)(n.averagePrice),a=(0,q.Q6)(e.triggerPrice).minus(r).multipliedBy(n.size).dividedBy(r),s=(0,q.Q6)(e.triggerPrice).multipliedBy(i).dividedBy(i.plus(a)),{size:i,price:s});return le(v()(v()({},e),{},{fundingFee:"0",averagePrice:e.isIncrease?o.price:n.averagePrice,collateral:function(t){if(e.isIncrease)return(0,q.Q6)(n.collateral).plus(e.collateral).minus(null==l?void 0:l.executionFee).minus((0,q.Q6)(e.size).multipliedBy(l.openFeeRate));var i=(0,q.Q6)(e.size).dividedBy((0,q.Q6)(null==t?void 0:t.size));return e.isKeepLev?(0,q.Q6)(1).minus(i).multipliedBy(null==t?void 0:t.initialCollateral):(0,q.Q6)(null==t?void 0:t.initialCollateral).minus((0,q.Q6)(null==e?void 0:e.collateral))}(n),size:o.size}),l.openFeeRate,(0,q.Q6)(l.maxLev),(0,q.Q6)(l.openFeeRate).multipliedBy(1),(0,q.Q6)(l.cleanFee))}(e,i):e.isIncrease?function(e){var n,t=null!==(n=C[e.market])&&void 0!==n?n:{};return le(v()(v()({},e),{},{fundingFee:"0",averagePrice:e.triggerPrice,collateral:(0,q.Q6)(e.collateral).minus(null==t?void 0:t.executionFee)}),t.openFeeRate,(0,q.Q6)(t.maxLev),(0,q.Q6)(t.openFeeRate).multipliedBy(2),(0,q.Q6)(t.cleanFee))}(e):"0",v()(v()({},e),{},{liqPrice:t})}))}),[T]);return(0,o.useEffect)((function(){void 0!==g&&T[g]&&y(T[g])}),[T]),(0,Re.jsxs)(Re.Fragment,{children:[l&&m&&(0,Re.jsx)(Wt,{marketsFundFeeShort:w,marketsFundFeeLong:k,isVisible:l,setIsVisible:c,tradeShowArgs:n,row:m,successCb:t}),(0,Re.jsxs)("div",{className:Gt.card,children:[(0,Re.jsx)(mi,{orders:S||T,handleCancel:function(e){(function(e,n,t,i,r){return console.log("cancel",n,t,i,r.market),e.marketRouter.cancelOrderList([n],[Number(t)],[i],[r.market])})(n,e.isIncrease,null==e?void 0:e.orderID,null==e?void 0:e.isLong,e).then((function(e){t(),c(!1)})).catch((function(e){return console.log("handleCancel err",e)})).finally((function(){}))},handleEdit:function(e,n){h(n),y(e),c(!0)},handleCancelAll:function(){(function(e,n){var t=[],i=[],r=[],a=[];return null==n||n.forEach((function(e){t.push(e.isIncrease),i.push(Number(e.orderID)),r.push(e.isLong),a.push(e.market)})),e.marketRouter.cancelOrderList(t,i,r,a)})(n,T).then((function(e){t()})).catch((function(e){return console.log("cancel All",e)}))}}),!(null==T||!T.length)&&(0,Re.jsx)(dn.Z,{data:T,pageIndex:N,setPageIndex:P,_data:i})]})]})},yi="orderPanel___weQ4q",fi="tabList___iDvkP",xi="tabItem___UJec7",gi="selected___lGODG",hi="header___Y18Vk",_i="right___ExK0Y",bi="switch___yJrUb",ji="overlay___LURQM",Ni="collateral___I5qZP",Pi="collateralTxt___sEChq",Ti="card___XRXfM",Li=t(77550),ki=function(){var e=_()(g()().mark((function e(n,t,i){var r,a,s,l;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={isLimit:t.isLimit,sizeDelta:(0,H._b)(0),price:(0,H._b)(0),slippage:(0,H._b)(0),isLong:t.isLong,isExec:!1,account:n.accountAddress,isKeepLev:t.keepLeverage,market:t.market},a=n.market,s=n.marketRouter,r.sizeDelta=a.getNumDecimals(t.sizeDelta),r.price=a.getPriceDecimals(t.price),r.slippage=a.getSlippageDecimals(a.formatPercentage(n.slippage)),e.next=8,!(null!=t&&t.isLimit);case 8:if(!e.sent){e.next=12;break}e.t0=s.decreaseTrade(r,i),e.next=13;break;case 12:e.t0=s.decreaseOrder(r,i);case 13:return l=e.t0,console.log("----confirmClose",l,r),e.abrupt("return",l);case 16:case"end":return e.stop()}}),e)})));return function(n,t,i){return e.apply(this,arguments)}}(),wi="overlay___RTa3F",Ci="title___p13nO",Si="label___LLPov",Ii="line___dve5j",Mi="questionIcon___Xi1Af",Fi=function(e){var n=e.fundingFee,t=e.positionFee,i=e.isLimit,r=e.executionFee,a=e.fees,s=e.afterFees;return(0,Re.jsx)(Re.Fragment,{children:Jt((0,Re.jsxs)("div",{className:Ii,children:["Fees",(0,Re.jsx)(Dn.Z,{overlayStyle:{maxWidth:320},placement:"bottom",overlay:(0,Re.jsxs)("div",{className:wi,children:[(0,Re.jsx)("div",{className:Si,children:(0,Re.jsx)("span",{className:Ci,children:"Fees"})}),t&&(0,Re.jsx)("div",{className:Si,children:"".concat(i?"Open":"Close"," Fee: ").concat((0,q.dp)(t).display())}),n&&(0,Re.jsx)("div",{className:Si,children:"Funding Fee: ".concat((0,q.dp)(n).display())}),r&&(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)("div",{className:Si,children:"Execution Fee: ".concat((0,q.dp)(i?r:"0").display())}),(0,Re.jsx)("div",{className:Si,children:"The execution fee is only charged when the order is executed or canceled due to invalid execution."})]})]}),children:(0,Re.jsx)("div",{className:Mi,children:(0,Re.jsx)(ht.r,{})})})]}),a,s||"")})},Di="header___cnc5K",Oi="submitBtn___GOq9M",Ai="tabList___Ynh2Z",zi="tabItem___mxzqS",Ri="selected___hpXfr",Ei="dField___smjTW",Zi="field___gznn3",Qi="fields___jqoiL",Bi="label___d6Gje",Hi="value___VUuPy",Vi="modal___yrezj",Ui="tabs___bazyO",qi="cut___xmhqm",Yi="receive___P7iU3",Ji=function(){return(0,Re.jsx)("div",{className:qi})},Gi=function(e){var n,t=(0,Rn.Z)().t,i=e.isVisible,r=e.setIsVisible,a=e.row,c=void 0===a?{}:a,d=e.tradeShowArgs,m=e.successCb,y=c.size,f=void 0===y?"2000.999999":y,x=c.initialCollateral,h=void 0===x?"200,000000000001":x,b=c.leverage,j=void 0===b?"10.000001":b,P=c.fundingFee,T=void 0===P?"20":P,L=c.liqPrice,k=void 0===L?"0.00000001":L,w=c.indexPrice,C=(0,l.Ge)(),S=C.active,I=C.chainId,M=C.account,F=(C.library,(0,Li.eI)(I,M).userReferrerCode),D=(0,o.useState)(0),O=s()(D,2),A=O[0],z=O[1],R=(0,o.useState)(""),E=s()(R,2),Z=E[0],Q=E[1],B=(0,o.useState)(w),H=s()(B,2),V=H[0],U=H[1],J=(0,o.useState)(!0),G=s()(J,2),K=G[0],W=G[1],X=(0,o.useState)(!1),$=s()(X,2),ee=$[0],ne=$[1],te=(0,o.useState)("0.3"),ie=s()(te,2),ae=ie[0],se=ie[1],ue=t("Market"),ce=t("Trigger"),de=null!==(n=+(null==d?void 0:d.cleanFee))&&void 0!==n?n:"5.0",pe=(0,u.sJ)(ve),me=re.getCoinBasedSizeByUSD((0,q.Q6)(f),(0,q.Q6)(null==c?void 0:c.averagePrice)),ye=pe?me.toFixed(Xt.FQ,1):(0,q.Q6)(f).toFixed(Xt.Bx,1),fe=pe?Xt.FQ:Xt.Bx;function xe(){return pe?!!(0,q.Q6)(Z).minus(ye).gte(0):+Z==+ye}var ge=(0,o.useMemo)((function(){return(0,Y.D4)(c.pair)}),[null==c?void 0:c.pair]),he=(0,o.useMemo)((function(){return pe&&c&&null!=d&&d.market?xe()?(0,q.Q6)(f).toFixed(2,1):(0,q.Q6)(Z||0).multipliedBy((0,q.Q6)(c.averagePrice)).toFixed(2,1):Z}),[Z,me,c,pe,ye,c.size,null==c?void 0:c.averagePrice,null==d?void 0:d.market]),_e=(0,o.useMemo)((function(){return c?pe?"".concat(ye," ").concat(ge):"$".concat(ye):"-"}),[pe,ye,ge]);var be=(0,o.useMemo)((function(){var e=0!==A,n=xe(),t=function(e,n,t,i,r,a,s,l){var o,u,c,d=n.initialCollateral,p=void 0===d?"200":d,m=n.executionFee,y=void 0===m?"0.09":m,f=n.fundingFee,x=void 0===f?"10":f,g=n.feeRate,h=n.size,_=void 0===h?"2000":h,b=new ct.O(p),j=new ct.O(i||0),N=new ct.O(_),P=N.minus(j).isGreaterThan(0)?N.minus(j):new ct.O(0),T=N.minus(j).isGreaterThan(0),L=null==j?void 0:j.gt(0),k=new ct.O(g),w=a?new ct.O(y):0,C=new ct.O(x),S=j.dividedBy(N),I=n.fundFeeRate,M=+i>0?j.multipliedBy(k):N.multipliedBy(k),F=C.plus(w).plus(M),D=new ct.O(oe(v()(v()({},n),{},{indexPrice:a?l:t,size:j.toString()}),g,I)),O=L?s?b.plus(D).minus(F):r?b.multipliedBy(S).plus(D).minus(F):D.minus(F):new ct.O(0),A=s?new ct.O(0):r?T?new ct.O(1).minus(S).multipliedBy(b):new ct.O(0):b;O.lte(0)&&!s&&(A=A.plus(O));var z=D.toString(),R=P.toString(),E=T&&A.gt(0)?P.dividedBy(A).toString():"0.01",Z=(0,q.Q6)((null==e||null===(o=e.market)||void 0===o||null===(u=o._valid)||void 0===u||null===(c=u.maxLev)||void 0===c?void 0:c.toNumber())||100),Q=(0,q.Q6)(null==e?void 0:e.openFeeRate),B=(0,q.Q6)(null==e?void 0:e.cleanFee),H=le(v()(v()({},n),{},{fundingFee:"0",size:P.toString(),collateral:A.toString()}),null==n?void 0:n.feeRate,Z,Q,B),V=new ct.O(+oe(v()(v()({},n),{},{indexPrice:t,size:null==P?void 0:P.toString()}),null==e?void 0:e.openFeeRate,I)),U=P.multipliedBy(k),Y=A.plus(V).minus(U).toString(),J=D.dividedBy(b).multipliedBy(100);return{nextSize:R,nextLeverage:E,nextLiqPrice:null==H?void 0:H.toString(),nextCollateral:A.toString(),receive:O.toString(),nextPNL:z,nextPNLRate:J.toString(),fees:F.toString(),positionFee:M.toString(),nextNetValue:Y.toString(),ifAll:s}}(d,c,w,he,K,e,n,V),i=e?null==d?void 0:d.executionFee:"0";return v()(v()({isLimit:e},t),{},{executionFee:i})}),[he,ye,A,K,V,w,f]),je=be.nextSize,Ne=be.nextCollateral,Pe=be.nextLeverage,Te=be.nextLiqPrice,Le=be.isLimit,ke=be.receive,we=be.nextPNL,Ce=be.fees,Se=be.positionFee,Ie=be.nextNetValue,Me=be.nextPNLRate,Fe=be.ifAll,De=be.executionFee,Oe=function(){var e=function(){if(!V&&A)return"Enter a price";if(A){var e=Fe?k:Te;if(null!=c&&c.isLong&&+V<+e)return t("Price below liq. price");if((null==c||!c.isLong)&&+V>+e)return t("Price above liq. price")}if(!+Z)return t("Enter an amount");if(+Z>+ye)return t("Max close amount exceeded");if(!Fe){if(+Pe<2)return t("MinLeverage",{min:"2"});if(+Pe>100)return t("MAXLeverage",{max:"100"});if(+Ne<de)return t("LeftoverCollateral",{cleanFee:de.toString()});if(+Ie<de)return t("LeftoverNetValue",{cleanFee:de.toString()})}return ee?t(A?"Creating order...":"Closing..."):""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:t(A?"Create order":"Close"),btnValid:!0}},Ae=(0,o.useMemo)((function(){return+Z>+(null==c?void 0:c.size)?{btnTxt:t("Max close amount exceeded"),btnValid:!1}:Oe()}),[f,V,he,Z,ee,K,Ie,Ne,Pe,A,k,Te,ye]),ze=Ae.btnTxt,Ee=Ae.btnValid,Ze=(0,o.useMemo)((function(){return pe&&c?re.getCoinBasedSizeByUSD((0,q.Q6)(je),(0,q.Q6)(null==c?void 0:c.averagePrice)).toFixed(Xt.FQ,1):(0,q.Q6)(je).toFixed(fe,1)}),[pe,je,null==c?void 0:c.averagePrice,2,Z]);return(0,Re.jsx)("div",{className:Vi,children:(0,Re.jsxs)(dt.Z,{title:t("closeIsLongSymbol",{isLong:null!=c&&c.isLong?t("Long"):t("Short"),symbol:ge}),onClose:function(){return r(!1)},visible:i,width:512,children:[(0,Re.jsx)("div",{className:Ui,children:(0,Re.jsx)(un.O.Group,{defaultIndex:A,onChange:function(e){Q(""),U(""),z(e)},children:(0,Re.jsx)("div",{className:Di,children:(0,Re.jsxs)(un.O.List,{className:Ai,children:[(0,Re.jsx)(un.O,{className:function(e){var n=e.selected;return N()(zi,p()({},Ri,n))},children:ue}),(0,Re.jsx)(un.O,{className:function(e){var n=e.selected;return N()(zi,p()({},Ri,n))},children:ce})]})})})}),(0,Re.jsx)(pt.tV,{value:Le?V:w,disabled:!Le,onChange:U,decimals:2}),(0,Re.jsxs)("div",{className:Ei,children:[(0,Re.jsxs)("div",{className:Zi,children:[(0,Re.jsxs)("div",{className:Bi,children:["Index Price:",(0,Re.jsx)("span",{children:" "})]}),(0,Re.jsxs)("div",{className:Hi,children:[" $",w]})]}),(0,Re.jsxs)("div",{className:Zi,children:[(0,Re.jsxs)("div",{className:Bi,children:["Available:",(0,Re.jsx)("span",{children:" "})]}),(0,Re.jsx)("div",{className:Hi,children:_e})]})]}),(0,Re.jsx)(pt.gp,{label:t("Close"),symbol:pe?ge:"USDC",onClickMaxBtn:function(){c.size&&!(0,q.Q6)(c.size).eq(0)?Q((0,q.dp)(ye).number.toFixed(fe,1)):Q("0")},value:Z,onChange:function(e){Q(e)}}),!Le&&(0,Re.jsx)(Ft,{value:{slippage:ae},ifSlippage:!0,onChange:function(e){se((null==e?void 0:e.slippage)||"")}}),(0,Re.jsxs)("div",{className:Qi,children:[Jt(t("Position Size"),ye,Ze,pe?"":"$",pe?" ".concat((0,Y.D4)(c.pair)):"",{formatNextValue:function(e){return e},displayDecimals:fe}),Jt(t("Collateral"),h,0==+Z?h:Ne,"$"),Jt(t("Leverage"),j,0==+Z?j:Pe,"","x",{defaultValue:"0.01"===Pe?"-":""}),(0,Re.jsxs)("div",{className:Zi,children:[(0,Re.jsx)("div",{className:Bi,children:"PNL"}),(0,Re.jsx)("div",{className:Hi,children:+Z>0?yn(we,Me):yn(null==c?void 0:c.PNL,null==c?void 0:c.PNLRate)})]}),(0,Re.jsx)(Fi,{fundingFee:T,positionFee:Se,executionFee:De,isLimit:Le,fees:Ce}),(0,Re.jsxs)("div",{className:Zi,children:[(0,Re.jsx)("div",{className:Bi,children:t("Keep Leverage")}),(0,Re.jsx)("div",{className:Hi,children:(0,Re.jsx)(lt,{checked:K,onChange:W})})]}),(0,Re.jsx)(Ji,{}),(0,Re.jsxs)("div",{className:Zi,children:[(0,Re.jsx)("div",{className:Bi,children:t("entryPrice")}),(0,Re.jsx)("div",{className:Hi,children:(0,q.dp)(null==c?void 0:c.averagePrice).display()})]}),Fe?Jt(t("liqPrice"),"0",void 0,"$"):Jt(t("liqPrice"),k,isFinite(+Te)?+Z>0?Te:k:"0.000001","$")]}),(0,Re.jsx)(Ji,{}),(0,Re.jsxs)("div",{className:Qi,children:[Jt(t("Spread"),"0",void 0,"","%"),Jt(t("Slippage"),ae||"0.3","","","%"),(0,Re.jsx)("div",{className:Yi,children:Jt(t("Receive"),+ke>0?ke:"0",void 0,""," USDC",{displayDecimals:Xt.FQ})})]}),(0,Re.jsx)(an.Z,{className:Oi,size:"large",disabled:ee||!Ee,onClick:_()(g()().mark((function e(){var n;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S&&M){e.next=2;break}return e.abrupt("return");case 2:ne(!0),n=V,ki(d,{keepLeverage:K,slippage:ae,sizeDelta:xe()?c.size:pe?(0,q.Q6)(Z).multipliedBy(null==c?void 0:c.averagePrice).toString():Z,price:n,isLong:null==c?void 0:c.isLong,isLimit:Le,nextSize:je,nextPNL:we,market:c.market},F).then((function(e){r(!1),m()})).catch((function(e){return console.log("confirm",e)})).finally((function(){ne(!1)}));case 5:case"end":return e.stop()}}),e)}))),children:ze})]})})},Ki=function(e){var n=e.isVisible,t=e.setIsVisible,i=e.row,r=void 0===i?{}:i,a=(e.market,e.tradeShowArgs),u=e.successCb,c=(0,Rn.Z)().t,d=r.collateral,m=void 0===d?"200":d,y=r.leverage,f=void 0===y?"10":y,x=r.fundingFee,g=void 0===x?"20":x,h=r.liqPrice,_=void 0===h?"0.001":h,b=r.isLong,j=r.indexPrice,P=(0,o.useState)(0),T=s()(P,2),L=T[0],k=T[1],w=(0,o.useState)(""),C=s()(w,2),S=C[0],I=C[1],M=(0,l.Ge)(),F=M.active,D=M.account,O=(0,o.useState)(!1),A=s()(O,2),z=A[0],R=A[1],E=c("Deposit"),Z=c("Withdraw"),Q=(0,o.useMemo)((function(){return 0===L}),[L]),B=(0,o.useMemo)((function(){return function(e,n,t,i,r,a){var s,l,o,u=e.collateral,c=e.size,d=e.fundingFee,p=e.initialCollateral,m=new ct.O(d),y=new ct.O(t),f=t?function(e){var t,i,r,a=n?"plus":"minus";return null===(t=new ct.O(u))||void 0===t||null===(i=t[a])||void 0===i||null===(r=i.call(t,new ct.O(e)))||void 0===r?void 0:r.toString()}(t):null==e?void 0:e.collateral,x=t?new ct.O(null==e?void 0:e.size).dividedBy(new ct.O(f)).toString():null==e?void 0:e.leverage,g=t?"0":d,h=new ct.O(c),_=(0,q.Q6)(null==a||null===(s=a.market)||void 0===s||null===(l=s._valid)||void 0===l?void 0:l.maxLev.toNumber()),b=(0,q.Q6)(null==a?void 0:a.cleanFee),j=(0,q.Q6)(null==a?void 0:a.openFeeRate),N=t&&le(v()(v()({},e),{},{collateral:null===(o=new ct.O(f).plus(m))||void 0===o?void 0:o.toString()}),null==e?void 0:e.feeRate,_,j,b)||"",P=new ct.O(p).minus(d).minus(h.dividedBy(Xt.cZ).isLessThan(10)?10:h.dividedBy(Xt.cZ));return{nextCollateral:f,nextLeverage:x,nextFund:g,nextLiqPrice:N,nextAvlb:n?i:P.isGreaterThan(0)?P.toString():"0",delta:(n||m.gte(0)?y:y.minus(m)).toString()}}(r,Q,S,null==a?void 0:a.avlb,0,a)}),[S,L,j,Q]),H=B.nextCollateral,V=B.nextLeverage,U=B.nextLiqPrice,Y=B.nextAvlb,J=B.delta,G=function(){var e=function(){if(!+S)return c("Enter an amount");if(!Q){if(b&&+U>+j)return c("Invalid liq.price");if(!b&&+U<+j)return c("Invalid liq.price")}return!L&&+S>+Y?c("Insufficient USDC balance"):L&&+H<10?c("MinResidualCollateralUSD",{USD:"10.0"}):+V<2?c("MinLeverage",{min:"2"}):+V>100?c("MAXLeverage",{max:"100"}):z?c(L?"Withdrawing...":"Depositing..."):""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:L?"Withdraw":"Deposit",btnValid:!0}},K=(0,o.useMemo)((function(){return G()}),[L,S,z,Q,b,j,U,Y,H,V]),W=K.btnTxt,X=K.btnValid;return(0,Re.jsx)("div",{className:Vi,children:(0,Re.jsxs)(dt.Z,{title:c("editCollateral"),onClose:function(){return t(!1)},visible:n,width:512,children:[(0,Re.jsx)("div",{className:Ui,children:(0,Re.jsx)(un.O.Group,{defaultIndex:L,onChange:function(e){I(""),k(e)},children:(0,Re.jsx)("div",{className:Di,children:(0,Re.jsxs)(un.O.List,{className:Ai,children:[(0,Re.jsx)(un.O,{className:function(e){var n=e.selected;return N()(zi,p()({},Ri,n))},children:E}),(0,Re.jsx)(un.O,{className:function(e){var n=e.selected;return N()(zi,p()({},Ri,n))},children:"Withdraw"})]})})})}),(0,Re.jsx)(pt.gp,{onClickMaxBtn:function(){I((0,q.dp)(Y).number.toFixed(Q?4:2,1))},value:S,onChange:function(e){I(e)},label:c(Q?"Pay":"Receive")}),(0,Re.jsxs)("div",{className:Qi,children:[(0,Re.jsxs)("div",{className:Zi,children:[(0,Re.jsxs)("div",{className:Zi,children:[(0,Re.jsxs)("div",{className:Bi,children:[(Q?E:Z)+": ",(0,Re.jsx)("span",{children:" "})]}),(0,Re.jsx)("div",{className:Hi,children:(0,q.dp)(""===S?"0":S).display()})]}),(0,Re.jsxs)("div",{className:Zi,children:[(0,Re.jsxs)("div",{className:Bi,children:[c(Q?"Balance":"Available"),(0,Re.jsx)("span",{children:" "})]}),(0,Re.jsx)("div",{className:Hi,children:(0,q.dp)(Y,Q?4:2).display({suffix:Q?" USDC":"",prefix:Q?"":"$"})})]})]}),Jt(c("Collateral"),m,H,"$"),Jt(c("Leverage"),f,V,"","X"),(0,Re.jsxs)("div",{className:Zi,children:[(0,Re.jsx)("div",{className:Bi,children:"Index Price"}),(0,Re.jsx)("div",{className:Hi,children:(0,q.dp)(j).display()})]}),Jt(c("liqPrice"),_,U,"$"),(0,Re.jsx)(Fi,{fundingFee:g,fees:g,afterFees:+S>0?"0.00000001":""})]}),(0,Re.jsx)(an.Z,{className:Oi,disabled:z||!X,size:"large",onClick:function(){F&&D&&(R(!0),function(e,n,t,i,r){if(t){var a=t._market.getNumDecimals(n);return i?t.increaseCollateral(a,e,r.market):(console.log("---decreaseCollateral----amount-isLong-isDeposit-bigAmount",n,e,i,a.toString()),t.decreaseCollateral(a,e,r.market))}return Promise.resolve("confirmEditCollateral failed")}(null==r?void 0:r.isLong,J,null==a?void 0:a.marketRouter,Q,r).then((function(e){console.log("collateral succussed",e),u(),t(!1)})).catch((function(e){return console.log("confirm",e)})).finally((function(){R(!1)})))},children:W})]})})},Wi="table___XB6MA",Xi="position___Dwf6N",$i="postionHlgt___apngF",er="pos___wBIvY",nr="long___fCOYz",tr="short___miFCO",ir="positionList___o82d0",rr="containerH5___XiJLb",ar="positionLeft___JDFdk",sr="field___eLfxe",lr="label___lrAei",or="text___y9DiE",ur="pnlText___RcCTf",cr="btnsH5___PgCSD",dr="btnH5___mI2KK",pr="warning___mid7Z",mr="warningContent___rHgLN",vr="loading___bfhIM",yr="color100___ZmByU",fr=t(8193),xr=function(e){var n=e.row,t=e.handleEditCollateral;return(0,Re.jsx)("div",{children:(0,Re.jsxs)("div",{className:Ni,children:[(0,Re.jsx)(Dn.Z,{placement:"bottom",overlayStyle:{maxWidth:350},overlay:(0,Re.jsxs)("div",{className:ji,children:["Collateral",(0,Re.jsx)("br",{}),"Collateral:  Initial Collateral - Funding Fee",(0,Re.jsx)("br",{}),(0,Re.jsx)(si.Z,{label:"Initial Collateral: ",value:Math.abs(+(null==n?void 0:n.initialCollateral)).toString(),prefix:+(null==n?void 0:n.initialCollateral)<0?"-$":"+$"}),(0,Re.jsx)("br",{}),(0,Re.jsx)(si.Z,{label:"Funding Fee: ",value:null==n?void 0:n.fundingFee,prefix:"$"}),(0,Re.jsx)("br",{}),(0,Re.jsx)(si.Z,{label:"Funding Fee / Day: ",value:null==n?void 0:n.fundFeeDay,prefix:"$"}),(0,Re.jsx)("br",{}),"Use the edit collateral icon to deposit or withdraw collateral."]}),children:(0,Re.jsx)(Fn.Z.Text,{className:Pi,children:(0,Re.jsx)(si.Z,{value:n.collateral,prefix:"$"})})}),(0,Re.jsx)(fr.$iz,{style:{cursor:"pointer"},size:"16",onClick:function(){return t()}})]})})},gr=function(e){var n=e.openCloseFee,t=e.PNLAfterFees,i=e.pnlAfterFeesRate;return(0,Re.jsxs)("div",{className:Ni+" tabular-nums",children:[(0,Re.jsx)(Dn.Z,{placement:"bottom",overlay:(0,Re.jsxs)("div",{className:ji,children:["Net Value",(0,Re.jsx)("br",{}),"Net Value: Initial Collateral + PnL - Funding Fee - Close Fee",(0,Re.jsx)("br",{}),"Initial Collateral: ".concat((null==e||e.initialCollateral,(0,q.dp)(Math.abs(+(null==e?void 0:e.initialCollateral)).toString()).display())),(0,Re.jsx)("br",{}),"PnL: ".concat(+(null==e?void 0:e.PNL)>0?(0,q.dp)(Math.abs(+(null==e?void 0:e.PNL)).toString()).display({prefix:"+$"}):(0,q.dp)(Math.abs(+(null==e?void 0:e.PNL)).toString()).display({prefix:"-$"})),(0,Re.jsx)("br",{}),"Funding Fee: ".concat((0,q.dp)(null==e?void 0:e.fundingFee).display()),(0,Re.jsx)("br",{}),"Open Fee: ".concat((0,q.dp)(null==n?void 0:n.toString()).display()),(0,Re.jsx)("br",{}),"Close Fee: ".concat((0,q.dp)(null==n?void 0:n.toString()).display()),(0,Re.jsx)("br",{}),"PnL After Fees:",yn(null==t?void 0:t.toString(),null==i?void 0:i.toString(),!1)]}),children:(0,Re.jsx)("div",{className:Pi,children:(0,q.dp)(null==e?void 0:e.netValue).display()})}),(0,Re.jsx)("span",{children:yn(null==e?void 0:e.PNL,null==e?void 0:e.PNLRate)})]})},hr=t(82226),_r="content___VzqrF",br="coin___lxZ8a",jr="operationContainer___pVVjp",Nr="longColor___i6mFX",Pr="shortColor___kUd2O",Tr="leverageText___M5MFB",Lr="pnlContainer___qPyrN",kr="pnl___m2VoU",wr="pnlValue___QYeuB",Cr="prices___kiXby",Sr="priceContainer___BYY83",Ir="priceTitle___MzCfX",Mr="priceValue____kzul",Fr="startTime___Y1IWh",Dr=function(e){var n=e.row,t=e.children,i=n.isLong,r=n.pair,a=n.leverage,s=n.PNLRate,l=n.averagePrice,o=n.indexPrice;return(0,Re.jsx)(hr.T,{title:"Share Position",downloadName:"".concat(z.j$,"_share"),coin:r,headerExtra:(0,Re.jsxs)("span",{className:Fr,children:["Share Time ",oi()(n.startTimestamp).format("YYYY/MM/DD HH:mm:ss")]}),content:(0,Re.jsxs)("div",{className:_r,children:[(0,Re.jsxs)("span",{className:br,children:[r," Perpetual"]}),(0,Re.jsxs)("div",{className:jr,children:[(0,Re.jsx)("span",{className:i?Nr:Pr,children:i?"LONG":"SHORT"}),(0,Re.jsx)("span",{className:Tr,children:(0,q.dp)(a,2).display({suffix:"x",prefix:""})})]}),(0,Re.jsxs)("div",{className:Lr,children:[(0,Re.jsx)("span",{className:kr,children:"PNL"}),(0,Re.jsx)("span",{className:"".concat(wr," ").concat(Number(s)<0?Pr:Nr),children:Number(s)>0?(0,q.dp)(s).display({suffix:"%",prefix:"+"}):(0,q.dp)(Math.abs(+s)).display({prefix:"-",suffix:"%"})})]}),(0,Re.jsx)("div",{className:Cr,children:[{titleId:"Entry",price:l},{titleId:"Index",price:o}].map((function(e){return(0,Re.jsxs)("div",{className:Sr,children:[(0,Re.jsxs)("span",{className:Ir,children:[(0,Re.jsx)(cn._H,{id:e.titleId})," ",(0,Re.jsx)(cn._H,{id:"Price"})]}),(0,Re.jsx)("span",{className:Mr,children:(n=e.price,n?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n):"$--")})]},e.titleId);var n}))})]}),children:(0,Re.jsx)("span",{children:t})})},Or=Object.defineProperty,Ar=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,Er=(e,n,t)=>n in e?Or(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Zr=e=>o.createElement("svg",((e,n)=>{for(var t in n||(n={}))zr.call(n,t)&&Er(e,t,n[t]);if(Ar)for(var t of Ar(n))Rr.call(n,t)&&Er(e,t,n[t]);return e})({width:17,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{fill:"#1E1E1E",d:"M0 0h17v16H0z"}),o.createElement("path",{fill:"#060818",d:"M-287-2189h4040v5354H-287z"}),o.createElement("rect",{x:-167,y:-98,width:1400,height:404,rx:16,fill:"#121418"}),o.createElement("path",{fill:"#1E2126",d:"M-167-12h1400v40H-167z"}),o.createElement("path",{d:"m6.5 11 3-3-3-3",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}));var Qr=(0,Y.tq)()?function(e){var n=e.data,t=e.handleClosePositon,i=e.handleEditCollateral,r=(0,u.FV)(ue.bI),a=s()(r,2),l=a[0],o=a[1];return(0,Re.jsx)("div",{className:ir,children:n.map((function(e,n){var r;return(0,Re.jsxs)("div",{className:rr,children:[(0,Re.jsxs)("div",{className:Xi,onClick:function(){return n=null==e?void 0:e.pair,t=(null==l?void 0:l.name)||"",i=o,void(n!==t&&i(n));var n,t,i},children:[(0,Re.jsxs)("div",{className:ar,children:[(0,Re.jsxs)("div",{children:[" ",e.pair," "]})," ",(0,Re.jsxs)("div",{children:[Number(null==e?void 0:e.leverage).toFixed(2),"x"]})," ",(0,Re.jsx)("div",{className:N()(er,(r={},p()(r,nr,e.isLong),p()(r,tr,!e.isLong),r)),children:e.isLong?"Long":"Short"})," "]}),(0,Re.jsx)("span",{className:ur,children:yn(null==e?void 0:e.PNL,null==e?void 0:e.PNLRate)})]}),[{renderTitle:function(){return(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)(cn._H,{id:"Postion"})," ",(0,Re.jsx)(cn._H,{id:"Size"})]})},value:(0,Re.jsx)(ai,{entryPrice:e.averagePrice,symbol:(0,Y.D4)(e.pair),usdSize:e.size})},{renderTitle:function(){return(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)(cn._H,{id:"Net"})," ",(0,Re.jsx)(cn._H,{id:"Value"})]})},value:(0,q.dp)(null==e?void 0:e.netValue).display()},{renderTitle:function(){return(0,Re.jsx)(cn._H,{id:"Collateral"})},value:(0,Re.jsx)(xr,{row:e,handleEditCollateral:i})},{renderTitle:function(){return(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)(cn._H,{id:"Open"})," ",(0,Re.jsx)(cn._H,{id:"Price"})," / ",(0,Re.jsx)(cn._H,{id:"Mark"})," ",(0,Re.jsx)(cn._H,{id:"Price"})]})},value:"".concat((0,q.dp)(null==e?void 0:e.averagePrice).display()," / ").concat((0,q.dp)(null==e?void 0:e.indexPrice).display())},{renderTitle:function(){return(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)(cn._H,{id:"Liq"}),". ",(0,Re.jsx)(cn._H,{id:"Price"})]})},value:(0,q.dp)(e.liqPrice).display()}].map((function(e,n){return(0,Re.jsxs)("div",{className:sr,children:[(0,Re.jsx)("span",{className:lr,children:e.renderTitle()}),(0,Re.jsx)("span",{className:or,children:e.value})]},n)})),(0,Re.jsxs)("div",{className:cr,children:[(0,Re.jsx)("div",{className:dr,onClick:function(){return t(e,n)},children:(0,Re.jsx)(cn._H,{id:"Close"})}),(0,Re.jsxs)("div",{className:dr,onClick:function(){return i(e)},children:[(0,Re.jsx)(cn._H,{id:"Edit"})," ",(0,Re.jsx)(cn._H,{id:"Collateral"})]}),(0,Re.jsx)("div",{className:dr,children:(0,Re.jsx)(Dr,{row:e,children:(0,Re.jsx)(cn._H,{id:"Share"})})})]})]},n)}))})}:function(e){var n=e.data,t=e.handleEditCollateral,i=e.handleClosePositon,r=(e.handleSelectMarket,(0,o.useState)(-1)),a=s()(r,2),l=a[0],c=a[1],d=(0,u.sJ)(ue.tr),m=(0,Rn.Z)().t,y=(0,u.FV)(ue.bI),f=s()(y,2),x=(f[0],f[1]),g=function(e){c(e)},h=[{title:m("Position"),width:"20%",render:function(e,n,t){var i,r;return(0,Re.jsxs)("div",{className:N()((i={},p()(i,Xi,l!==t),p()(i,$i,l===t),i)),onClick:function(){if((null==e?void 0:e.pair)!==(null==n?void 0:n.name)){var n=d.find((function(n){return n.name===e.pair}));n&&x(n)}},onMouseOver:function(){return g(t)},onMouseLeave:function(){return g(-1)},children:[(0,Re.jsx)("div",{children:e.pair}),(0,Re.jsx)("div",{children:(0,q.dp)(null==e?void 0:e.leverage,2).display({suffix:"x",prefix:""})}),(0,Re.jsx)("div",{className:N()(er,(r={},p()(r,nr,e.isLong),p()(r,tr,!e.isLong),r)),children:e.isLong?"Long":"Short"}),l===t&&(0,Re.jsx)("span",{style:{float:"right"},children:(0,Re.jsx)(Zr,{})})]})}},{title:m("Size"),dataIndex:"size",key:"size",width:"10%",render:function(e,n){if(n.category&&0==+n.category)return(0,Re.jsx)("span",{className:yr,children:"Opening..."});var t=(0,Y.D4)(n.pair);return(0,Re.jsx)(ai,{entryPrice:n.averagePrice,symbol:t,usdSize:e})}},{width:"10%",title:m("Collateral"),render:function(e,n,i){return(0,Re.jsx)(xr,{row:e,handleEditCollateral:function(){return t(e,i)}})}},{width:"15%",title:m("netValue"),render:gr},{width:"10%",title:m("entryPrice"),dataIndex:"averagePrice",key:"averagePrice",render:function(e){return(0,Re.jsx)(si.Z,{value:e,prefix:"$"})}},{width:"10%",title:m("indexPrice"),render:function(e){return(0,Re.jsx)(si.Z,{value:null==e?void 0:e.indexPrice,prefix:"$"})}},{width:"10%",title:m("liqPrice"),dataIndex:"liqPrice",render:function(e){return(0,Re.jsx)(si.Z,{value:e,prefix:"$"})}},{width:"15%",title:"",render:function(e,n,r){var a,s={svgName:"share",toolTipContent:m("position.sharePosition")};!function(e){e[e.open=0]="open",e[e.close=1]="close",e[e.increase=2]="increase",e[e.decrease=3]="decrease"}(a||(a={}));var l=[{svgName:"loading",append:"png",toolTipContent:m("Opening"),imgClass:vr,visible:!!e.category&&[a.open,a.increase].includes(+e.category)},{svgName:"closing",append:"png",toolTipContent:m("Closing"),imgClass:vr,visible:!!e.category&&[a.close,a.decrease].includes(+e.category)},{svgName:"warningRed",toolTipContent:(0,Re.jsxs)("div",{className:pr,children:[(0,Re.jsx)("div",{children:"WARNING"}),(0,Re.jsx)("div",{className:mr,children:m("position.warinitePositions")})]}),visible:function(e){var n=(0,q.Q6)(null==e?void 0:e.initialCollateral).minus(null==e?void 0:e.fundingFee);return!!(null!=n&&n.lt(8)||(0,q.Q6)(null==e?void 0:e.size).dividedBy(n).gte(150))}(e),overlayStyle:{minWidth:320}},{slot:(0,Re.jsx)(Re.Fragment,{children:(0,Re.jsx)(Dr,{row:e,children:(0,Re.jsx)(di,v()({},s))})}),visible:!0},{svgName:"edit",toolTipContent:m("editCollateral"),onClick:function(){return t(e,r)},visible:!0},{svgName:"power",toolTipContent:m("Close"),onClick:function(){return i(e,r)},visible:!0}];return(0,Re.jsx)(Re.Fragment,{children:0!=+(null==e?void 0:e.size)&&(0,Re.jsx)(pi,{buttons:l})})}}];return(0,Re.jsx)(On.Z,{className:Wi,size:"small",columns:h,dataSource:n,bordered:!1,pagination:!1,emptyText:m("position.noOpenPositions")})},Br=function(e){var n=e.market,t=e.successCb,i=e.tradeShowArgs,r=(0,o.useState)(),a=s()(r,2),l=a[0],c=a[1],d=(0,o.useState)(),p=s()(d,2),m=p[0],v=p[1],y=(0,o.useState)(void 0),f=s()(y,2),x=f[0],g=f[1],h=(0,o.useState)(void 0),_=s()(h,2),b=_[0],j=_[1],N=(0,o.useState)(!1),P=s()(N,2),T=P[0],L=P[1],k=(0,o.useState)(!1),w=s()(k,2),C=w[0],S=w[1],I=(0,u.sJ)(he),M=(0,o.useState)(pn.Q),F=s()(M,2),D=F[0],O=F[1],A=(0,o.useMemo)((function(){var e=D*pn.I,n=e-pn.I;return I.slice(n,e)}),[D,I]);return(0,o.useEffect)((function(){void 0!==x&&A[x]&&c(A[x]),void 0!==b&&A[b]&&v(A[b])}),[A]),(0,Re.jsxs)(Re.Fragment,{children:[T&&m&&(0,Re.jsx)(Ki,{isVisible:T,setIsVisible:L,row:m,market:n,tradeShowArgs:i,successCb:t}),C&&l&&(0,Re.jsx)(Gi,{isVisible:C,setIsVisible:S,row:l,tradeShowArgs:i,successCb:t}),(0,Re.jsxs)("div",{className:Ti,children:[(0,Re.jsx)(Qr,{data:A,handleClosePositon:function(e,n){S(!0),c(e),g(n)},handleEditCollateral:function(e,n){L(!0),v(e),j(n)}}),!(null==A||!A.length)&&(0,Re.jsx)(dn.Z,{data:A,pageIndex:D,setPageIndex:O,_data:I})]})]})},Hr=function(e){var n=(0,Rn.Z)().t,t=(0,Ke.x)().chainId,i=e.market,r=e.tradeShowArgs,a=(0,o.useState)(0),l=s()(a,2),c=l[0],d=l[1],m=(0,u.FV)(ge),v=s()(m,2),y=v[0],f=v[1],x=(0,u.FV)(xe),g=s()(x,2)[1],h=Ge.I.useContainer(),_=h.tableFlag,b=h.setTableFlag,j=(0,u.sJ)(ue.tr),P=(0,u.FV)(ye),T=s()(P,2)[1],L=(0,u.sJ)(he),k=(0,u.FV)(fe),w=s()(k,2)[1],C=(0,u.sJ)(je),S=(0,u.sJ)(Ne),I=(0,o.useRef)([]);(0,o.useEffect)((function(){if(!r)return w([]),T([]),void g([]);Vn(r,j).then((function(e){return w(e)})),ae(r,j).then((function(e){return T(e)})),Xn(r,j).then((function(e){return g(e)}))}),[r,_,t]),(0,o.useEffect)((function(){I.current=L}),[L]);var M=function(){b(!_)};return(0,Re.jsx)("div",{className:yi,children:(0,Re.jsxs)(un.O.Group,{defaultIndex:c,onChange:function(e){d(e)},children:[(0,Re.jsxs)("div",{className:hi,children:[(0,Re.jsxs)(un.O.List,{className:fi,children:[(0,Re.jsxs)(un.O,{className:function(e){var n=e.selected;return N()(xi,p()({},gi,n))},children:[n("Positions")," ",C]}),(0,Re.jsxs)(un.O,{className:function(e){var n=e.selected;return N()(xi,p()({},gi,n))},children:[n("_Orders"),S]}),(0,Re.jsx)(un.O,{className:function(e){var n=e.selected;return N()(xi,p()({},gi,n))},children:n("History")})]}),(0,Re.jsxs)("div",{className:_i,children:[(0,Re.jsx)(cn._H,{id:"Hide Other Pairs"}),(0,Re.jsx)(lt,{className:bi,checked:y,onChange:f})]})]}),(0,Re.jsxs)(un.O.Panels,{children:[(0,Re.jsx)(un.O.Panel,{children:(0,Re.jsx)(Br,{successCb:M,market:i,tradeShowArgs:r},+_)}),(0,Re.jsx)(un.O.Panel,{children:(0,Re.jsx)(vi,{tradeShowArgs:r,successCb:M},+_)}),(0,Re.jsx)(un.O.Panel,{children:(0,Re.jsx)(Qn,{},+_)})]})]})})},Vr=t(16423),Ur=t(45027),qr=t(35386),Yr=Object.defineProperty,Jr=Object.getOwnPropertySymbols,Gr=Object.prototype.hasOwnProperty,Kr=Object.prototype.propertyIsEnumerable,Wr=(e,n,t)=>n in e?Yr(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Xr=e=>o.createElement("svg",((e,n)=>{for(var t in n||(n={}))Gr.call(n,t)&&Wr(e,t,n[t]);if(Jr)for(var t of Jr(n))Kr.call(n,t)&&Wr(e,t,n[t]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M11.478 18h3.478l5.294-6-5.294-6h-3.478l4.193 4.85H3.75v2.3h11.921L11.478 18Z",fill:"var(--red)"}));var $r=t(92583),ea=Object.defineProperty,na=Object.getOwnPropertySymbols,ta=Object.prototype.hasOwnProperty,ia=Object.prototype.propertyIsEnumerable,ra=(e,n,t)=>n in e?ea(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const aa=e=>o.createElement("svg",((e,n)=>{for(var t in n||(n={}))ta.call(n,t)&&ra(e,t,n[t]);if(na)for(var t of na(n))ia.call(n,t)&&ra(e,t,n[t]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M7.652 12h2.319L13.5 8 9.97 4H7.653l2.795 3.234H2.5v1.532h7.947L7.652 12Z",fill:"var(--green)"}));var sa="value___QTafV",la="new___MFwco",oa="old___nWboE",ua="arrowIcon___wpnLP",ca="red___ta54J",da=function(e){var n,t,i=e.symbolPrefix,r=void 0===i?"$":i,a=e.suffix,s=void 0===a?"":a,l=e.hasExistingPosition,o=e.priceDisplay,u=function(e){return(0,q.dp)(e,2).display({prefix:r,suffix:s})};return(0,Re.jsx)("div",{className:sa,children:(n=u(null==o?void 0:o.existingPositionPrice),t=u(null==o?void 0:o.mergePositionPrice),l&&o&&o.mergePositionPrice&&o.mergePositionPrice.gt(0)?(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)("div",{title:n,className:oa,children:n}),(0,Re.jsx)(aa,{className:N()(ua,p()({},ca,((null==o?void 0:o.rise)||0)<0))}),(0,Re.jsx)("div",{title:t,className:la,children:t})]}):(0,Re.jsx)("div",{title:t,className:la,children:t}))})},pa={arrowIcon:"arrowIcon___iG0uS",red:"red___cXHfH",header:"header___hkqkP",row:"row___gfzWa",price:"price___k5Z9o",tip:"tip___F0_el",title:"title___FCH8V",changeInfoItem:"changeInfoItem___LaDtd",titleLabel:"titleLabel___EWjyx",changeInfo:"changeInfo___rSff6",changeInfoText:"changeInfoText___RTV2Y",fields:"fields___x3gUc",field:"field___qxsTj",label:"label___J7n5A",value:"value___m6nh9",old:"old___CU5un",new:"new___dIyoY",cut:"cut___T5uNM",submitBtn:"submitBtn___aBHIR",longColor:"longColor___DWLUi"},ma=Fn.Z.Text,va=function(e){var n,t,i,r,a=e.size,s=e.slippage,l=e.liqPriceDisplay,c=e.positionFee,d=e.collateralDisplay,m=e.leverageDisplay,y=e.positionSizeDisplay,f=e.tradeShowArgs,x=e.fundingFee,g=e.hasExistingPosition,h=e.isPendingConfirmation,_=e.isMarketOrder,b=e.isLong,j=e.fromValue,P=e.toValue,T=e.toSymbol,L=e.entryPriceDisplay,k=e.executionFee,w=(0,Rn.Z)().t,C=e.visible,S=e.existingPosition,I=e.onClickSubmit,M=e.onClose,F=(0,u.sJ)(fe),D=(0,u.sJ)(ue.bI),O=(0,u.sJ)(ve),A=null===(n=(0,H.H2)((null==f||null===(t=f.market)||void 0===t||null===(i=t._args)||void 0===i?void 0:i.spread)||0,10))||void 0===n?void 0:n.toNumber();function z(e){return e?v()(v()({},e),{},{mergePositionPrice:re.getCoinBasedSizeByUSD(e.mergePositionPrice,L.mergePositionPrice),existingPositionPrice:re.getCoinBasedSizeByUSD(e.existingPositionPrice,L.existingPositionPrice)}):{mergePositionPrice:(0,q.Q6)(0),existingPositionPrice:(0,q.Q6)(0),rise:0}}var R=(0,o.useMemo)((function(){if(g)return w("ExistingPosition",{isLong:b?"long":"short"});if(D){var e=(F||[]).filter((function(e){return"Trigger"===e.type&&e.pair===D.name&&e.isLong===b}));if(1===e.length)return w("You have an active trigger order that could impact this Position");if(e.length>1)return w("You have multiple active trigger orders that could impact this Position");var n=(F||[]).filter((function(e){return"Limit"===e.type&&e.pair===D.name&&e.isLong===b}));if(n.length>0)return n.length>1?w("ExistingIncrease",{isLong:b?"long":"short",toSymbol:T||""}):w("You have an active Limit Order that could impact this Position")}}),[D,F,S,b,g]),E=[{label:w("Position Size"),display:y,showCoinBased:O,prefix:O?"":"$",suffix:O?" ".concat(T):""},{label:w("Leverage"),display:m,prefix:"",suffix:"x"},{label:w("Collateral"),display:d}],Z=(0,q.dp)(j);return(0,Re.jsx)(dt.Z,{width:512,title:_?w(b?"ConfirmOrderLong":"ConfirmOrderShort",{toSymbol:T}):w("Confirm Limit Order"),onClose:M,visible:C,children:(0,Re.jsxs)("div",{className:pa.wrapper,children:[(0,Re.jsxs)("div",{className:pa.header,children:[(0,Re.jsxs)("div",{className:pa.title,children:[(0,Re.jsx)("img",{src:$r.Z}),(0,Re.jsxs)("div",{className:N()(pa.titleLabel,p()({},pa.longColor,b)),children:[null==D?void 0:D.name," ",b?"LONG":"SHORT"]})]}),(0,Re.jsxs)("div",{className:pa.changeInfo,children:[(0,Re.jsxs)(ma,{className:"".concat(pa.changeInfoText," c200 f16 fw3 tc"),children:["Pay ",Z.display({prefix:""})," USDC (",Z.display(),")"]}),(0,Re.jsx)("div",{children:(0,Re.jsx)(Xr,{className:N()(pa.arrowIcon,{cLong:b})})}),(0,Re.jsxs)(ma,{className:"".concat(pa.changeInfoText," c200 f16 fw3 tc"),children:[b?"Long":"Short"," ","".concat((0,q.dp)(P,4).display({prefix:"",suffix:" ".concat(T)})," "),"(",(0,q.dp)(a).display(),")"]})]})]}),R&&(0,Re.jsx)("div",{className:pa.tip,children:R}),(0,Re.jsxs)("div",{className:pa.fields,children:[(E||[]).map((function(e){var n=e.display,t=e.showCoinBased,i=e.suffix,r=e.prefix,a=e.label;return(0,Re.jsxs)("div",{className:pa.field,children:[(0,Re.jsx)("div",{className:pa.label,children:(0,Re.jsx)(cn._H,{id:a})}),(0,Re.jsx)(da,{suffix:i,symbolPrefix:r,hasExistingPosition:g,priceDisplay:t?z(n):n})]},a)})),(0,Re.jsx)(Fi,{isLimit:!0,executionFee:k,positionFee:c,fees:Number(c)>=0&&Number(k)>=0?null===(r=+c+ +k)||void 0===r?void 0:r.toString():"-"}),(0,Re.jsxs)("div",{className:pa.field,children:[(0,Re.jsx)("div",{className:pa.label,children:(0,Re.jsx)(cn._H,{id:"Funding Fee"})}),(0,Re.jsx)("div",{className:pa.value,children:(0,Re.jsx)("div",{className:pa.new,children:"".concat(x||"-")})})]}),(0,Re.jsx)("div",{className:pa.cut}),(0,Re.jsxs)("div",{className:pa.field,children:[(0,Re.jsx)("div",{className:pa.label,children:(0,Re.jsx)(cn._H,{id:"Entry Price"})}),(0,Re.jsx)(da,{hasExistingPosition:g,priceDisplay:L})]}),(0,Re.jsxs)("div",{className:pa.field,children:[(0,Re.jsx)("div",{className:pa.label,children:(0,Re.jsx)(cn._H,{id:"Liq. Price"})}),(0,Re.jsx)(da,{hasExistingPosition:g,priceDisplay:l})]}),(0,Re.jsx)("div",{className:pa.cut}),(0,Re.jsxs)("div",{className:pa.field,children:[(0,Re.jsx)("div",{className:pa.label,children:(0,Re.jsx)(cn._H,{id:"Type"})}),(0,Re.jsx)("div",{className:pa.value,children:(0,Re.jsx)("div",{className:pa.new,children:_?"Market":"Limit"})})]}),(0,Re.jsxs)("div",{className:pa.field,children:[(0,Re.jsx)("div",{className:pa.label,children:(0,Re.jsx)(cn._H,{id:"Spread"})}),(0,Re.jsx)("div",{className:pa.value,children:(0,Re.jsxs)("div",{className:pa.new,children:[A,"%"]})})]}),(0,Re.jsxs)("div",{className:pa.field,children:[(0,Re.jsx)("div",{className:pa.label,children:(0,Re.jsx)(cn._H,{id:"Slippage"})}),(0,Re.jsx)("div",{className:pa.value,children:(0,Re.jsxs)("div",{className:pa.new,children:[s,"%"]})})]})]}),(0,Re.jsx)(an.Z,{disabled:h,size:"large",className:pa.submitBtn,onClick:I,children:function(){if(!h){false;var e=_?b?"Long":"Short":w("Create Order");return _&&ce.bD>0?w("AcceptMinimum",{action:e}):e}return w(_?b?"Longing...":"Shorting...":"Creating Order...")}()})]})})},ya=t(15560),fa=(t(39843),{input:"input___AVy3r",inputFocus:"inputFocus___ffm19",wrapper:"wrapper___O0YtS",var:"var___AJ6Gk",flex:"flex___PvPjK",max:"max___TS1Rv"}),xa=function(e){var n=e.label,t=e.placeholder,i=void 0===t?"0.0":t,r=e.children,a=e.disabled,s=e.className,l=e.decimals,o=void 0===l?18:l,u=e.onChange,c=e.value,d=e.max,p=e.onFocus,m=e.onBlur,v=function(e){if(u){var n=new RegExp("^\\D*(\\d*(?:\\.\\d{0,".concat(o,"})?).*$"),"g"),t=e.replace(n,"$1");d&&+t>+d&&(t=d),u(t)}};return(0,Re.jsxs)("div",{className:N()(fa.input,s),children:[n&&(0,Re.jsx)("div",{className:fa.label,children:n}),(0,Re.jsxs)("div",{className:fa.wrapper,children:[(0,Re.jsx)("input",{type:"text",value:c,disabled:a,onFocus:function(e){return p&&p(e.target.value)},onBlur:function(e){return m&&m(e.target.value)},onChange:function(e){v(e.target.value)},placeholder:i}),r]})]})},ga=xa,ha={header:"header___TC62F",inputNumber:"inputNumber___Y7Id3",notActionInput:"notActionInput___xCiG2",field:"field___SKQvO",value:"value___ZPyQn",leverage:"leverage___DJlMu",multiple:"multiple___TgITL",customInput:"customInput___vG08t",inputFocus:"inputFocus___tss2q",leverageInputBox:"leverageInputBox___xKTLL",item:"item___kY23e",active:"active___NJOgJ",sliderBox:"sliderBox___OugRQ",slider:"slider___JsDOm"},_a=["10","20","50","100"],ba={2:{label:"2x",style:{color:"#fff",fontSize:"14px"}},100:{label:"100x",style:{color:"#fff",fontSize:"14px"}}},ja=function(e){var n=e.onChange,t=e.value,i=(0,o.useState)(!1),r=s()(i,2),a=r[0],l=r[1],u=(0,o.useState)(!1),c=s()(u,2),d=c[0],m=c[1];return(0,Re.jsxs)("div",{children:[(0,Re.jsxs)("div",{className:ha.header,children:[(0,Re.jsxs)("div",{className:ha.field,children:[(0,Re.jsx)("div",{className:ha.label,children:"Leverage: "}),a?(0,Re.jsxs)("div",{className:ha.value,children:[a?t:"2x to 100","x"]}):(0,Re.jsxs)("div",{className:ha.value,style:{color:"#78808E"},children:[Xt.ak,"x to ",Xt.cZ,"x"]})]}),(0,Re.jsx)(lt,{checked:a,onChange:l})]}),a?(0,Re.jsx)("div",{className:ha.sliderBox,children:(0,Re.jsx)(ya.Z,{value:Number(t),railStyle:{opacity:.3,background:"var(--royal_blue)"},onChange:function(e){n(String(e))},className:ha.slider,min:2,max:100,marks:ba,step:.1})}):(0,Re.jsxs)("div",{className:"".concat(ha.leverageInputBox," df"),children:[(0,Re.jsx)("div",{className:ha.inputNumber,children:(0,Re.jsx)(ga,{placeholder:"0.0x",decimals:2,value:t,className:N()(ha.customInput,p()({},ha.inputFocus,d)),onChange:function(e){return n(e)},onFocus:function(e){return m(!0)},onBlur:function(e){return m(!1)}})}),_a.map((function(e){return(0,Re.jsx)("div",{children:(0,Re.jsx)("div",{onClick:function(){n(String(e))},className:N()(ha.item,p()({},ha.active,e===t)),children:"".concat(e,"x")},e)},e)}))]})]})},Na="row___Uz93f",Pa="sizeTitle___vazQJ",Ta="size___nJ4HO",La="value___tOPpv",ka="field___wY44N",wa="label___k2mEs",Ca=function(e){var n=e.size,t=e.tradeShowArgs,i=e.displayDecimals,r=(0,Rn.Z)().t;return(0,Re.jsxs)("div",{className:Na,children:[(0,Re.jsx)(Dn.Z,{getPopupContainer:function(e){return e.parentElement},overlay:(0,Re.jsxs)("div",{children:[(0,Re.jsx)("div",{className:Pa,children:"Size"}),(0,Re.jsx)(cn._H,{id:"Trading units using stable coins in BLEX such as USD, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."})]}),children:(0,Re.jsx)("div",{className:"".concat(ka," ").concat(Ta),children:(0,Re.jsx)("div",{className:La,children:(0,Re.jsx)(si.Z,{value:n,displayDecimals:i,prefix:r("Size")+": ",defaultValueIncludeSuffix:!0,defaultValue:"-"})})})}),(0,Re.jsxs)("div",{className:ka,children:[(0,Re.jsx)("div",{className:wa,children:r("Balance")+": "}),(0,Re.jsx)("div",{className:La,children:(0,Re.jsx)(si.Z,{value:null==t?void 0:t.avlb,displayDecimals:Xt.C1,suffix:r(" USDC"),defaultValue:"-"})})]})]})},Sa=function(e,n,t,i,r,a){if(i.market){var s={isLimit:i.isLimit,payDelta:i.market.getNumDecimals(i.pay),sizeDelta:i.market.getNumDecimals(i.size),price:i.market.getPriceDecimals(i.price),tpPrice:i.market.getPriceDecimals(i.takeProfit||"0"),slPrice:i.market.getPriceDecimals(i.stopLoss||"0"),slippage:i.market.getSlippageDecimals(i.market.formatPercentage(i.slippage)),isLong:i.isLong,isExec:!1,isKeepLev:!1,account:n};return i.marketRouter.setPendingTxns(r),i.isLimit?i.marketRouter.increaseOrder(v()(v()({},s),{},{_market:i.marketRouter._market._address}),t,a):i.marketRouter.increaseTrade(s,t,i.market.parseNumber(i.pay,i.ctokenDecimals),a)}return Promise.reject()},Ia=Object.defineProperty,Ma=Object.getOwnPropertySymbols,Fa=Object.prototype.hasOwnProperty,Da=Object.prototype.propertyIsEnumerable,Oa=(e,n,t)=>n in e?Ia(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Aa=e=>o.createElement("svg",((e,n)=>{for(var t in n||(n={}))Fa.call(n,t)&&Oa(e,t,n[t]);if(Ma)for(var t of Ma(n))Da.call(n,t)&&Oa(e,t,n[t]);return e})({width:8,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m7.2 6-3.224 4.8L.8 6h6.4Z",fill:"#fff"}));var za=t(10079),Ra=t(65334),Ea=new Map;function Za(e){if(Ea.has(e)){var n=Ea.get(e),t=n.data,i=n.validTime;if(!(i&&Date.now()>i))return console.log("Read ".concat(e," from memory")),t}}var Qa=36e5,Ba=t(88469),Ha=Object.defineProperty,Va=Object.getOwnPropertySymbols,Ua=Object.prototype.hasOwnProperty,qa=Object.prototype.propertyIsEnumerable,Ya=(e,n,t)=>n in e?Ha(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Ja=e=>o.createElement("svg",((e,n)=>{for(var t in n||(n={}))Ua.call(n,t)&&Ya(e,t,n[t]);if(Va)for(var t of Va(n))qa.call(n,t)&&Ya(e,t,n[t]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m10 12.586 4-4 5.707 5.707L22 12v6h-6l2.293-2.293L14 11.414l-4 4-7.707-7.707 1.414-1.414L10 12.586Z",fill:"var(--red)"}));var Ga=Object.defineProperty,Ka=Object.getOwnPropertySymbols,Wa=Object.prototype.hasOwnProperty,Xa=Object.prototype.propertyIsEnumerable,$a=(e,n,t)=>n in e?Ga(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const es=e=>o.createElement("svg",((e,n)=>{for(var t in n||(n={}))Wa.call(n,t)&&$a(e,t,n[t]);if(Ka)for(var t of Ka(n))Xa.call(n,t)&&$a(e,t,n[t]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m10 12.414 4 4 5.707-5.707L22 13V7h-6l2.293 2.293L14 13.586l-4-4-7.707 7.707 1.414 1.414L10 12.414Z",fill:"#fff"}));var ns="tabList___tBaZk",ts="tabLong___XF_Z3",is="tabShort___Ju2CX",rs="selected___F6KGR",as="label___J09Cx",ss=function(e){var n=e.isLong,t=e.onClickSwapOption;return(0,Re.jsxs)("div",{className:ns,children:[(0,Re.jsxs)("div",{className:N()(ts,p()({},rs,n)),onClick:function(){t(ce.FB)},children:[(0,Re.jsx)(es,{}),(0,Re.jsx)("div",{className:as,children:"Long"})]}),(0,Re.jsxs)("div",{className:N()(is,p()({},rs,!n)),onClick:function(){t(ce.Qo)},children:[(0,Re.jsx)(Ja,{}),(0,Re.jsx)("div",{className:as,children:"Short"})]})]})},ls="field___lFCUO",os="label___Ut9cW",us="value___TeWjD",cs=function(e){var n,t=e.liqPriceDisplay,i=e.entryPriceDisplay,r=e.hasExistingPosition,a=e.fundingFee,s=e.availableLiquidity,l=e.positionFee,o=e.executionFee,u=(0,Rn.Z)().t;return(0,Re.jsxs)("div",{children:[(0,Re.jsxs)("div",{className:ls,children:[(0,Re.jsx)("div",{className:os,children:u("Entry Price")}),(0,Re.jsx)(da,{hasExistingPosition:r,priceDisplay:i})]}),(0,Re.jsxs)("div",{className:ls,children:[(0,Re.jsxs)("div",{className:os,children:[u("Liq. Price")," "]}),(0,Re.jsx)(da,{hasExistingPosition:r,priceDisplay:t})]}),(0,Re.jsx)(Fi,{isLimit:!0,executionFee:o,positionFee:l||"-",fees:Number(l)>=0&&Number(o)>=0?null===(n=+l+ +o)||void 0===n?void 0:n.toString():"-"}),(0,Re.jsxs)("div",{className:ls,children:[(0,Re.jsx)("div",{className:os,children:u("Funding Fee")}),(0,Re.jsx)("div",{className:us,children:a||"-"})]}),(0,Re.jsxs)("div",{className:ls,children:[(0,Re.jsx)("div",{className:os,children:u("Available Liquidity")}),(0,Re.jsx)("div",{className:us,children:(0,Re.jsx)(si.Z,{value:s,displayDecimals:2,prefix:"$"})})]})]})},ds="select___XVRcq",ps="hideScrollbar___eZprT",ms="tradeBar___CpLnN",vs="largeInput___KTQTS",ys="panel___lJHih",fs="advancedContainer___zGmgl",xs="cut___YHMHw",gs="submitBtn___zk5iO",hs="itemOptions___NCHkr",_s="itemOption___ybDq9",bs="inputTheme___FUS6X",js="marketSelect___N08AL",Ns="itemLabel___VR9Ak",Ps="formContainer___t8ADz",Ts=(0,Y.Ij)().isWindows,Ls=function(e){var n,t=e.indexPrice,i=e.tradeShowArgs,a=e.orderOption,d=e.swapOption,m=e.onChangeSwapOption,y=e.onChangOrderOption,f=(0,u.FV)(pe),x=s()(f,2),h=x[0],b=x[1],j=(0,l.Ge)(),P=j.active,T=j.account,L=(j.library,(0,Ke.x)().chainId),k=(0,Li.eI)(L,T).userReferrerCode,w=(0,u.sJ)(ue.bI),C=(0,u.sJ)(ve),S=(0,o.useState)(!1),I=s()(S,2),M=I[0],F=I[1],D=(0,o.useState)(t),O=s()(D,2),A=O[0],z=O[1],R=(0,o.useState)(!1),E=s()(R,2),Z=E[0],Q=E[1],B=a===ce.YO,V=d===ce.FB,U=(0,o.useState)(!1),Y=s()(U,2),J=Y[0],G=Y[1],K=(0,o.useState)(!0),W=s()(K,2),X=W[0],$=W[1],ee=(0,o.useState)(""),ne=s()(ee,2),te=ne[0],ie=ne[1],ae=(0,o.useState)(""),se=s()(ae,2),le=se[0],oe=se[1],de=Ge.I.useContainer(),me=de.setWalletVisible,ye=de.isIpad,fe=(0,u.sJ)(he),xe=(0,o.useState)(),ge=s()(xe,2),_e=ge[0],be=ge[1],je=Ge.I.useContainer().setPendingTxns,Ne=null==i?void 0:i.openFeeRate,Pe=null==i?void 0:i.executionFee,Te=null==i?void 0:i.market,Le=null==Te?void 0:Te._valid.maxLev,ke=(0,Vr.Z)(Te,"_valid.maxTradeAmount"),we=(0,Vr.Z)(Te,"_valid.minCollateral"),Ce=null==i?void 0:i.symbol,Se=B?t:A,Ie=(null==i||null===(n=i.market)||void 0===n?void 0:n.getTokenDigits())||18,Me=Ge.I.useContainer(),Fe=Me.tableFlag,De=Me.setTableFlag,Oe=(0,o.useMemo)((function(){return{maxTradeAmount:(0,q.Q6)(ke),minCollateral:(0,q.Q6)(we)}}),[ke,we]),Ae=Oe.maxTradeAmount,ze=Oe.minCollateral;(0,o.useEffect)((function(){!_e&&i&&be({takeProfit:null==i?void 0:i.takeProfit,stopLoss:null==i?void 0:i.stopLoss,slippage:null==i?void 0:i.slippage})}),[null==i?void 0:i.takeProfit,null==i?void 0:i.stopLoss,null==i?void 0:i.slippage]);var Ee=(0,Ur.Z)(Object.create(null)),Ze=s()(Ee,2),Qe=(Ze[0],Ze[1]),Be=Qe.set,He=(0,Qe.get)(T);(0,o.useEffect)((function(){!He&&T&&null!=i&&i.market&&i.marketRouter.allowance(T).then((function(e){Be(T,e&&e.gt&&e.gt(0))}))}),[null==i?void 0:i.marketRouter,T,He]);var Ve=(0,o.useMemo)((function(){if(w&&fe&&fe.length>0){var e="".concat(V?"Long":"Short");return fe.find((function(n){return n.pair===w.name&&n.account===T&&n.side===e}))}return null}),[fe,V,w]);(0,o.useEffect)((function(){$(!0),ie("")}),[B,V]);var Ue=(0,o.useMemo)((function(){return Boolean(Ve&&Ve.size&&(0,q.Q6)(Ve.size).gt(0))}),[Ve]),qe=(0,c.ZP)((function(){return T&&null!=w&&w.address?[T,null==w?void 0:w.address]:null}),(function(){var e;return null==i||null===(e=i.reader)||void 0===e?void 0:e.availableLiquidity(T,w.address,V)})).data,Ye=(0,o.useMemo)((function(){return null==i?void 0:i.market.formatNum(qe,2)}),[qe]),Je=o.useRef(),We=(0,c.ZP)((function(){return null!=i&&i.market?"".concat(i.market._address,"_").concat(V):null}),(function(){return function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.validTime,a=void 0===r?Qa:r,s=i.localCache,l=void 0===s||s,o=i.memoryCache,u=void 0===o||o;function c(e,t){u&&Ea.set(n,{data:e,validTime:t})}if(u&&(t=Za(n)))return t;if(l){var d=(0,Ra.rI)(n,void 0,!0);if(d)return c(d.data,d.validTime),d.data}return e().then((function(e){return c(e,Date.now()+a),l&&(0,Ra.py)(n,e,a),e}))}((function(){return re.getFundFeeRete(i,V)}),"".concat(i.market._address,"_").concat(V))})),Xe=We.data,$e=(0,o.useState)((0,Ra.rI)(Ra.ZK,"10")),en=s()($e,2),nn=en[0],tn=en[1];function rn(){if(!sn)return!1;var e=(0,q.Q6)(qe);return!!sn.gt(e)&&{id:"MAXExceeded",values:{toSymbol:Ce,pos:V?"long":"short"}}}var sn=(0,o.useMemo)((function(){if(te)return re.getSize((0,q.Q6)(te),(0,q.Q6)(Ne||"0"),Number(nn))}),[te,nn,Ne]);function ln(){var e=(0,q.Q6)(Se),n=(0,q.Q6)(Ne||"0"),t=re.getNextAmount((0,q.Q6)(te),e,n,Number(nn));return(0,q.dp)(t,18,"0").value}function on(){return(on=_()(g()().mark((function e(){var n,t,r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=3;break}return me(!0),e.abrupt("return");case 3:if(!Z){e.next=5;break}return e.abrupt("return");case 5:if(!T||!Se){e.next=14;break}if(!(n=rn())){e.next=10;break}return Ba.U.error((0,Re.jsx)(cn._H,v()({},n))),e.abrupt("return");case 10:Q(!0),t=!B,r=Se,Sa(0,T,k,v()(v()(v()({},i),_e),{},{pay:te,isLimit:t,size:(0,q.dp)(sn,i.ctokenDecimals||18).value,price:r,isLong:V}),je,(function(){Q(!1)})).then((function(e){e||Q(!1),De(!Fe),G(!1)})).catch((function(e){console.error(e),Q(!1)}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,qr.Z)((function(){var e=(0,q.Q6)(Se),n=(0,q.Q6)(Ne||"0");if(X)return te?void function(e){e?oe(ln()):null!=i&&i.ctokenDecimals&&oe((0,q.dp)(sn,i.ctokenDecimals,"0").value)}(C):void oe("");if(le&&nn&&0!==Number(Se))if(C){var t=(0,q.dp)(re.getNextPay((0,q.Q6)(le),e,n||(0,q.Q6)(0),Number(nn)),8).value;ie(t)}else ie(re.getPayBySize((0,q.Q6)(le),n,Number(nn)).toFixed(8,1));else ie("")}),400,[i,le,sn,h,X,nn,Ne,te]);var un=(0,o.useMemo)((function(){return(0,q.Q6)(B?0:Pe)}),[B,Pe]),dn=(0,o.useMemo)((function(){var e=(0,q.Q6)(Ne||0);if(void 0!==sn){var n,t=re.getOpenFee(sn,e),r=(0,q.Q6)(Se),a=(0,q.Q6)(te),s=(0,q.Q6)(null!==(n=null==i?void 0:i.cleanFee)&&void 0!==n?n:"0"),l=re.getEntryPriceDisplay(r,sn,V,B,Ve);if(te&&nn&&Se){var o=re.getConfirmStat({size:sn,leverageOption:Number(nn),executionFee:un,entryPrice:l.mergePositionPrice,existingPosition:Ve,positionFeeRate:(0,q.Q6)(Ne||0),hasExistingPosition:Ue,pay:a,openFee:t,cleanFee:s}),u=o.getCollateralDisplay(),c=(0,q.Q6)((null==Le?void 0:Le.toNumber())||100),d=o.getLigPriceDisplay(l.mergePositionPrice,c,V,e),p=o.getNextSizeDisplay(),m=o.getLeverageDisplay();return{entryPriceDisplay:l,openFee:(0,q.dp)(t,2).value,liqPriceDisplay:d,collateralDisplay:u,leverageDisplay:m,positionSizeDisplay:p}}}return{}}),[te,sn,Le,Ve,Se,le,Pe,V,B,nn,Ne]),pn=dn.openFee,mn=dn.liqPriceDisplay,vn=dn.collateralDisplay,yn=dn.leverageDisplay,fn=dn.positionSizeDisplay,xn=dn.entryPriceDisplay,gn=function(){if(M)return[(0,Re.jsx)(cn._H,{id:"Approving..."}),!0];if(Z)return["".concat(V?"Long":"Short"," ").concat(Ce),!0];if(!P)return[(0,Re.jsx)(cn._H,{id:"Connect wallet"}),!1];if(!He)return[(0,Re.jsx)(cn._H,{id:"Approve"}),!1];if(!(0,zn.EC)(L))return[(0,Re.jsx)(cn._H,{id:"Incorrect network"}),!0];var e=function(){if(!(B||A&&"0"!==A))return(0,Re.jsx)(cn._H,{id:"Enter a price"});if(!Se)return(0,Re.jsx)(cn._H,{id:"Enter a price"});var e=(0,q.Q6)(Se);if(e.eq(0))return(0,Re.jsx)(cn._H,{id:"Enter a price"});if(!B){if(V&&e.gt((0,q.Q6)(t)))return(0,Re.jsx)(cn._H,{id:"Price above current price"});if(!V&&e.lt((0,q.Q6)(t)))return(0,Re.jsx)(cn._H,{id:"Price below current price"})}if(!le||(0,q.Q6)(le).eq(0))return(0,Re.jsx)(cn._H,{id:"Enter an amount"});var n=(0,q.Q6)(te);if(n.eq(0))return(0,Re.jsx)(cn._H,{id:"Enter an amount"});if(n.gt((0,q.Q6)((null==i?void 0:i.avlb)||te)))return(0,Re.jsx)(cn._H,{id:"Insufficient USDC balance"});if(n.lt(ze))return(0,Re.jsx)(cn._H,{id:"MinPayUSD",values:{min:Xt.E4}});if(null!=sn&&sn.gt(Ae))return(0,Re.jsx)(cn._H,{id:"MaxPayUSD",values:{max:(0,Re.jsx)(si.Z,{value:Ae})}});var r=rn();if(r)return(0,Re.jsx)(cn._H,v()({},r));var a=Xt.cZ;if(Number(nn)>a)return(0,Re.jsx)(cn._H,{id:"MAXLeverage",values:{max:a}});if(Number(nn)<Xt.ak)return(0,Re.jsx)(cn._H,{id:"MinLeverage",values:{min:Xt.ak}});if(null!=_e&&_e.stopLoss){var s=(0,q.Q6)(_e.stopLoss);if(V&&s.gte(e))return(0,Re.jsx)(cn._H,{id:"Stop loss above current price"});if(!V&&s.lte(e))return(0,Re.jsx)(cn._H,{id:"Stop loss below current price"});if(V&&null!=mn&&mn.mergePositionPrice&&s.lte(mn.mergePositionPrice))return(0,Re.jsx)(cn._H,{id:"Stop loss below liq.Price"});if(!V&&null!=mn&&mn.mergePositionPrice&&s.gte(mn.mergePositionPrice))return(0,Re.jsx)(cn._H,{id:"Stop loss above liq.Price"})}if(null!=_e&&_e.takeProfit){var l=(0,q.Q6)(_e.takeProfit);if(V&&l.lte(e))return(0,Re.jsx)(cn._H,{id:"Take profit below current price"});if(!V&&l.gte(e))return(0,Re.jsx)(cn._H,{id:"Take profit above current price"});if(V&&null!=mn&&mn.mergePositionPrice&&l.lte(mn.mergePositionPrice))return(0,Re.jsx)(cn._H,{id:"Take profit below liq.Price"});if(!V&&null!=mn&&mn.mergePositionPrice&&l.gte(mn.mergePositionPrice))return(0,Re.jsx)(cn._H,{id:"Take profit above liq.Price"})}if(null!=_e&&_e.slippage){if(Number(_e.slippage)>Xt.j2)return(0,Re.jsx)(cn._H,{id:"Slippage should be less than ".concat(Xt.j2,"%")});if(Number(_e.slippage)<Xt.JB)return(0,Re.jsx)(cn._H,{id:"Slippage should be more than ".concat(Xt.JB,"%")})}return""}();return e?[e,!0]:Ce?B?["".concat(V?"Long":"Short"," ").concat(Ce),!1]:[(0,Re.jsx)(cn._H,{id:"Create limit order"}),!1]:[(0,Re.jsx)(cn._H,{id:"Create"}),!1]}(),hn=s()(gn,2),_n=hn[0],bn=hn[1],jn=(0,o.useMemo)((function(){return[null!=_e&&_e.takeProfit&&void 0!==sn?(0,q.dp)(re.getEstimatedPNL({isLong:V,entryPrice:(0,q.Q6)(Se),price:(0,q.Q6)(null==_e?void 0:_e.takeProfit),size:sn}),2).value:"",null!=_e&&_e.stopLoss&&void 0!==sn?(0,q.dp)(re.getEstimatedPNL({isLong:V,entryPrice:(0,q.Q6)(Se),price:(0,q.Q6)(null==_e?void 0:_e.stopLoss),size:sn}),2).value:""]}),[null==_e?void 0:_e.takeProfit,null==_e?void 0:_e.stopLoss,V,sn,Se]),Nn=s()(jn,2),Pn=Nn[0],Tn=Nn[1],Ln=(0,o.useMemo)((function(){return Xe?(Je.current="".concat(re.getFundFeeRateDisplay(Xe),"%/1 h"),Je.current):Je.current||"-"}),[Xe]),kn=(0,o.useMemo)((function(){return[{value:"USD",label:"USD"},{value:Ce,label:Ce}]}),[Ce]);return(0,o.useEffect)((function(){i&&be({stopLoss:i.stopLoss,takeProfit:i.takeProfit,slippage:i.slippage}),z(t),"USD"!==h&&b(Ce)}),[Ce]),(0,Re.jsxs)("div",{className:N()(ms,p()({},ps,Ts)),children:[(0,Re.jsx)(va,{size:null==sn?void 0:sn.toFixed(2,1),entryPriceDisplay:xn,slippage:(null==_e?void 0:_e.slippage)||"0",tradeShowArgs:i,positionFee:pn,liqPriceDisplay:mn,collateralDisplay:vn,leverageDisplay:yn,positionSizeDisplay:fn,fundingFee:Ln,isPendingConfirmation:Z,existingPosition:Ve,hasExistingPosition:Ue,toSymbol:Ce,fromValue:te,onClickSubmit:function(){return on.apply(this,arguments)},isMarketOrder:B,isLong:V,chainId:L,visible:J,toValue:ln(),onClose:function(){G(!1)},executionFee:null==un?void 0:un.toString()}),(0,Re.jsxs)("div",{className:Ps,children:[(0,Re.jsx)(ss,{onClickSwapOption:function(e){e!==d&&(be(v()(v()({},_e),{},{stopLoss:"",takeProfit:""})),z(""),m(e))},isLong:V}),(0,Re.jsxs)("div",{className:hs,children:[(0,Re.jsxs)("div",{className:_s,children:[(0,Re.jsx)("div",{className:Ns,children:(0,Re.jsx)(cn._H,{id:"OrderType"})}),(0,Re.jsx)(za.Z,{size:"large",className:js,suffixIcon:(0,Re.jsx)(Aa,{color:"#fff"}),onChange:function(e){a!==e&&(e!==ce.VZ||A&&"0"!==A||z(t),be(v()(v()({},_e),{},{stopLoss:"",takeProfit:""})),y(e))},value:B?ce.YO:ce.VZ,options:[{label:ce.YO,value:ce.YO},{label:ce.VZ,value:ce.VZ}]})]}),(0,Re.jsxs)("div",{className:_s,children:[(0,Re.jsx)("div",{className:Ns,children:(0,Re.jsx)(cn._H,{id:"Price"})}),(0,Re.jsx)(pt.ZP,{className:bs,disabled:B,onChange:z,value:Se,symbolVar:"USD",decimals:Ie})]})]}),(0,Re.jsx)(pt.ZP,{label:"Amount",className:vs,value:le,decimals:Ie,onChange:function(e){$(!1),oe(e)},children:Ce&&(0,Re.jsx)(za.Z,{size:"small",placement:"bottomLeft",showSearch:!1,defaultValue:Ce,suffixIcon:(0,Re.jsx)(Aa,{color:"#fff"}),getPopupContainer:function(e){return e.parentElement},dropdownMatchSelectWidth:100,className:ds,value:h,onChange:function(e){b(e),0!==Number(le)&&$(!0)},options:kn})}),(0,Re.jsx)(Ca,{tradeShowArgs:i,displayDecimals:2,size:sn}),(0,Re.jsx)(pt.gp,{onClickMaxBtn:function(){$(!0),ie((null==i?void 0:i.avlb)||"0")},value:te,className:vs,decimals:Ie,onChange:function(e){$(!0),ie(e)}}),(0,Re.jsx)(ja,{value:nn,onChange:function(e){(0,Ra.py)(Ra.ZK,e),tn(e)}}),(0,Re.jsx)(an.Z,{className:gs,disabled:bn,size:"large",onClick:function(){if(P)if(He)G(!0);else{F(!0);var e=(0,H._b)(Math.max(100*Math.pow(10,6),Number(te)||1));null==i||i.marketRouter.approve(T,e,!0).then((function(e){var n=e;if(n.hash){var t={hash:n.hash,message:"USDC Approved!",callback:function(){Be(T,!0),F(!1)}};je((function(e){return[].concat(r()(e),[t])}))}else F(!1)})).catch((function(e){console.error(e),F(!1)}))}else me(!0)},children:_n})]}),(0,Re.jsx)("div",{className:ys,children:(0,Re.jsxs)("div",{className:fs,children:[(0,Re.jsx)(Ft,{tkpPNL:Pn,stopLossPNL:Tn,onChange:be,value:_e,ifAll:!0,collect:ye}),(0,Re.jsx)("div",{className:xs}),(0,Re.jsx)(cs,{hasExistingPosition:Ue,positionFee:pn,fundingFee:Ln,entryPriceDisplay:xn,availableLiquidity:Ye,liqPriceDisplay:mn,executionFee:null==un?void 0:un.toString()})]})})]})},ks=function(){var e,n,t,i,a=(0,Ke.x)().chainId,d=(0,o.useState)((function(){return localStorage.getItem("showTools")})),p=s()(d,1)[0],m=(0,l.Ge)(),v=m.account,y=m.library,f=Ge.I.useContainer().setPendingTxns,x=(0,o.useState)(ce.YO),g=s()(x,2),h=g[0],_=g[1],b=(0,o.useState)(ce.FB),j=s()(b,2),N=j[0],P=j[1],T=(0,u.sJ)(ue.O7),L=(0,u.sJ)(ue.tr),k=(0,u.FV)(ue.bI),w=s()(k,2),C=w[0],S=w[1],I=(null===(n=T[null===(e=(0,Y.do)(null==C?void 0:C.name))||void 0===e?void 0:e.toLowerCase()])||void 0===n||null===(t=n.indexPrice)||void 0===t?void 0:t.toFixed(2))||"0",M=(0,c.ZP)(null!=C&&C.address?[a,null==C?void 0:C.address,null==C?void 0:C.name,y,v]:null,(function(e){return ne.apply(void 0,[I,f].concat(r()(e)))})).data,F=(0,o.useMemo)((function(){return null==M?void 0:M.marketRouter}),[null==M||null===(i=M.marketRouter)||void 0===i?void 0:i._address]);return(0,o.useEffect)((function(){if(L&&L.length){var e=new URLSearchParams(window.location.hash.split("?")[1]).get("symbol"),n=L.find((function(n){return n.name==="".concat(e,"/USD")}));n&&S(n)}}),[L]),(0,o.useEffect)((function(){document.title="".concat(I||"Trade"," | ").concat(null==C?void 0:C.name," | ").concat(z.OY)}),[C,I]),(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsxs)("div",{className:on,children:[(0,Re.jsx)(rn,{indexPrice:I,markets:L||[],swapOption:N}),(0,Re.jsx)(Ls,{indexPrice:I,tradeShowArgs:M,swapOption:N,orderOption:h,onChangOrderOption:_,onChangeSwapOption:P})]}),p&&(0,Re.jsx)(an.Z,{onClick:ln.a,children:"模拟 Websocket 断开连接"}),(0,Re.jsx)(Hr,{market:F,tradeShowArgs:M}),(0,Re.jsx)(sn.a,{})]})}},33114:function(e,n,t){"use strict";t.d(n,{I:function(){return i},Q:function(){return r}});var i=20,r=1},26977:function(e,n,t){"use strict";t.d(n,{gp:function(){return d},tV:function(){return c},mU:function(){return p},ZP:function(){return m}});var i=t(97857),r=t.n(i),a=t(94184),s=t.n(a),l={input:"input___FmRXa",wrapper:"wrapper___FSDBG",var:"var___VCDiS",flex:"flex___gOhnV",max:"max___hao26"},o=t(86074),u=function(e){var n=e.label,t=e.symbolVar,i=e.children,r=e.disabled,a=e.className,u=e.decimals,c=void 0===u?18:u,d=e.onChange,p=e.value,m=e.max,v=function(e){if(d){var n=new RegExp("^\\D*(\\d*(?:\\.\\d{0,".concat(c,"})?).*$"),"g"),t=e.replace(n,"$1");m&&+t>+m&&(t=m),d(t)}};return(0,o.jsxs)("div",{className:s()(l.input,a),children:[n&&(0,o.jsx)("div",{className:l.label,children:n}),(0,o.jsxs)("div",{className:l.wrapper,children:[(0,o.jsx)("input",{type:"text",value:p,disabled:r,onChange:function(e){v(e.target.value)},placeholder:"0.00"}),t?(0,o.jsx)("div",{className:l.var,children:t}):i]})]})},c=function(e){return(0,o.jsx)(u,r()(r()({label:"Price"},e),{},{children:(0,o.jsx)("div",{className:l.var,children:"USD"})}))},d=function(e){var n=e.onClickMaxBtn,t=e.symbol;return(0,o.jsx)(u,r()(r()({label:"Pay"},e),{},{children:(0,o.jsxs)("div",{className:l.flex,children:[(0,o.jsx)("div",{className:l.max,onClick:n,children:"MAX"}),(0,o.jsx)("div",{className:l.var,children:null!=t?t:"USDC"})]})}))},p=function(e){return(0,o.jsx)(u,r()(r()({label:"Receive"},e),{},{children:(0,o.jsx)("div",{className:l.flex,children:(0,o.jsx)("div",{className:l.var,children:e.symbol})})}))},m=u},92583:function(e,n,t){"use strict";t.d(n,{r:function(){return u}});var i=t(62435),r=Object.defineProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(e,n,t)=>n in e?r(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const u=e=>i.createElement("svg",((e,n)=>{for(var t in n||(n={}))s.call(n,t)&&o(e,t,n[t]);if(a)for(var t of a(n))l.call(n,t)&&o(e,t,n[t]);return e})({width:47,height:40,viewBox:"0 0 100% 100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("path",{d:"M13.5 19c0-8.837 7.163-16 16-16s16 7.163 16 16-7.163 16-16 16-16-7.163-16-16Z",fill:"var(--color_30)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.75 19c0 8.146 6.604 14.75 14.75 14.75S44.25 27.146 44.25 19 37.646 4.25 29.5 4.25 14.75 10.854 14.75 19ZM29.5 3c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16Z",fill:"url(#depx_select_icon_svg__a)"}),i.createElement("g",{filter:"url(#depx_select_icon_svg__b)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.5 14.274h-4.967c-2.003 0-3.627-1.732-3.627-3.868h4.967c2.003 0 3.627 1.732 3.627 3.867Zm-4.967.429H29.5c0 2.136-1.624 3.867-3.627 3.867h-4.967c0-2.136 1.624-3.867 3.627-3.867ZM29.5 18.57h4.967c2.003 0 3.627-1.731 3.627-3.867h-4.967c-2.003 0-3.627 1.732-3.627 3.867Zm8.594-4.296h-4.967c-2.003 0-3.627-1.732-3.627-3.868h4.967c2.003 0 3.627 1.732 3.627 3.867Zm-13.561 9.453c-2.003 0-3.627 1.731-3.627 3.867h4.967c2.003 0 3.627-1.732 3.627-3.867h-4.967Zm4.967-.43h-4.967c-2.003 0-3.627-1.732-3.627-3.867h4.967c2.003 0 3.627 1.731 3.627 3.867Zm0 4.297h4.967c2.003 0 3.627-1.732 3.627-3.867h-4.967c-2.003 0-3.627 1.731-3.627 3.867Zm0-8.164h4.967c2.003 0 3.627 1.731 3.627 3.867h-4.967c-2.003 0-3.627-1.732-3.627-3.867Z",fill:"url(#depx_select_icon_svg__c)"})),i.createElement("defs",null,i.createElement("linearGradient",{id:"depx_select_icon_svg__a",x1:13.5,y1:1,x2:45.5,y2:35,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#F2E6CF"}),i.createElement("stop",{offset:1,stopColor:"#B5884A"})),i.createElement("linearGradient",{id:"depx_select_icon_svg__c",x1:20.906,y1:9.332,x2:38.094,y2:27.594,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#F2E6CF"}),i.createElement("stop",{offset:1,stopColor:"#B5884A"})),i.createElement("filter",{id:"depx_select_icon_svg__b",x:.906,y:.406,width:57.188,height:57.188,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",{dy:10}),i.createElement("feGaussianBlur",{stdDeviation:10}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_24_34312"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_24_34312",result:"shape"}))));n.Z="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDciIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCAxMDAlIDEwMCUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEzLjUgMTljMC04LjgzNyA3LjE2My0xNiAxNi0xNnMxNiA3LjE2MyAxNiAxNi03LjE2MyAxNi0xNiAxNi0xNi03LjE2My0xNi0xNloiIGZpbGw9InZhcigtLWNvbG9yXzMwKSIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQuNzUgMTljMCA4LjE0NiA2LjYwNCAxNC43NSAxNC43NSAxNC43NVM0NC4yNSAyNy4xNDYgNDQuMjUgMTkgMzcuNjQ2IDQuMjUgMjkuNSA0LjI1IDE0Ljc1IDEwLjg1NCAxNC43NSAxOVpNMjkuNSAzYy04LjgzNyAwLTE2IDcuMTYzLTE2IDE2czcuMTYzIDE2IDE2IDE2IDE2LTcuMTYzIDE2LTE2LTcuMTYzLTE2LTE2LTE2WiIgZmlsbD0idXJsKCNhKSIvPjxnIGZpbHRlcj0idXJsKCNiKSI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yOS41IDE0LjI3NGgtNC45NjdjLTIuMDAzIDAtMy42MjctMS43MzItMy42MjctMy44NjhoNC45NjdjMi4wMDMgMCAzLjYyNyAxLjczMiAzLjYyNyAzLjg2N1ptLTQuOTY3LjQyOUgyOS41YzAgMi4xMzYtMS42MjQgMy44NjctMy42MjcgMy44NjdoLTQuOTY3YzAtMi4xMzYgMS42MjQtMy44NjcgMy42MjctMy44NjdaTTI5LjUgMTguNTdoNC45NjdjMi4wMDMgMCAzLjYyNy0xLjczMSAzLjYyNy0zLjg2N2gtNC45NjdjLTIuMDAzIDAtMy42MjcgMS43MzItMy42MjcgMy44NjdabTguNTk0LTQuMjk2aC00Ljk2N2MtMi4wMDMgMC0zLjYyNy0xLjczMi0zLjYyNy0zLjg2OGg0Ljk2N2MyLjAwMyAwIDMuNjI3IDEuNzMyIDMuNjI3IDMuODY3Wm0tMTMuNTYxIDkuNDUzYy0yLjAwMyAwLTMuNjI3IDEuNzMxLTMuNjI3IDMuODY3aDQuOTY3YzIuMDAzIDAgMy42MjctMS43MzIgMy42MjctMy44NjdoLTQuOTY3Wm00Ljk2Ny0uNDNoLTQuOTY3Yy0yLjAwMyAwLTMuNjI3LTEuNzMyLTMuNjI3LTMuODY3aDQuOTY3YzIuMDAzIDAgMy42MjcgMS43MzEgMy42MjcgMy44NjdabTAgNC4yOTdoNC45NjdjMi4wMDMgMCAzLjYyNy0xLjczMiAzLjYyNy0zLjg2N2gtNC45NjdjLTIuMDAzIDAtMy42MjcgMS43MzEtMy42MjcgMy44NjdabTAtOC4xNjRoNC45NjdjMi4wMDMgMCAzLjYyNyAxLjczMSAzLjYyNyAzLjg2N2gtNC45NjdjLTIuMDAzIDAtMy42MjctMS43MzItMy42MjctMy44NjdaIiBmaWxsPSJ1cmwoI2MpIi8+PC9nPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjEzLjUiIHkxPSIxIiB4Mj0iNDUuNSIgeTI9IjM1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI0YyRTZDRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0I1ODg0QSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjIiB4MT0iMjAuOTA2IiB5MT0iOS4zMzIiIHgyPSIzOC4wOTQiIHkyPSIyNy41OTQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjRjJFNkNGIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQjU4ODRBIi8+PC9saW5lYXJHcmFkaWVudD48ZmlsdGVyIGlkPSJiIiB4PSIuOTA2IiB5PSIuNDA2IiB3aWR0aD0iNTcuMTg4IiBoZWlnaHQ9IjU3LjE4OCIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPjxmZU9mZnNldCBkeT0iMTAiLz48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxMCIvPjxmZUNvbXBvc2l0ZSBpbjI9ImhhcmRBbHBoYSIgb3BlcmF0b3I9Im91dCIvPjxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC4yIDAiLz48ZmVCbGVuZCBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMjRfMzQzMTIiLz48ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMjRfMzQzMTIiIHJlc3VsdD0ic2hhcGUiLz48L2ZpbHRlcj48L2RlZnM+PC9zdmc+"},77912:function(e,n,t){var i={"./cancel.svg":95794,"./close.svg":81023,"./closing.png":45912,"./edit.svg":79056,"./loading.png":38746,"./mainorder.svg":91553,"./power.svg":43530,"./right_arrow.svg":37772,"./share.svg":44965,"./suborder.svg":86162,"./warningRed.svg":58331,"./warningYellow.svg":79610};function r(e){var n=a(e);return t(n)}function a(e){if(!t.o(i,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id=77912},95794:function(e,n,t){"use strict";e.exports=t.p+"static/cancel.faf5d99b.svg"},81023:function(e,n,t){"use strict";e.exports=t.p+"static/close.faf5d99b.svg"},79056:function(e,n,t){"use strict";e.exports=t.p+"static/edit.f1c66f25.svg"},91553:function(e,n,t){"use strict";e.exports=t.p+"static/mainorder.0d671a3e.svg"},43530:function(e,n,t){"use strict";e.exports=t.p+"static/power.c7835c74.svg"},37772:function(e,n,t){"use strict";e.exports=t.p+"static/right_arrow.2a0a913d.svg"},44965:function(e,n,t){"use strict";e.exports=t.p+"static/share.17450885.svg"},86162:function(e,n,t){"use strict";e.exports=t.p+"static/suborder.f2a6d258.svg"},58331:function(e,n,t){"use strict";e.exports=t.p+"static/warningRed.7861d662.svg"},79610:function(e,n,t){"use strict";e.exports=t.p+"static/warningYellow.3a511a3a.svg"},45912:function(e){"use strict";e.exports="data:image/png;base64,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"},38746:function(e){"use strict";e.exports="data:image/png;base64,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"}}]);