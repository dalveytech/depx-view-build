"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[459],{94320:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(97857),r=n.n(a),i=n(13769),s=n.n(i),o=n(58720),u=n(36139),l=n(90513),p="default___THebl",c="text___DYTKH",y="tableContainer___y6be9",d="tableTitle___FYLz4",m="table___kapbS",f=n(86074),b=["emptyText","title","className"],h=function(e){var t=e.text;return(0,f.jsxs)("div",{className:"df jcc aic fdc ".concat(p),children:[(0,f.jsx)(l.r,{}),(0,f.jsx)("span",{className:c,children:t})]})},v=function(e){var t=e.emptyText,n=void 0===t?"No Data":t,a=e.title,i=e.className,l=s()(e,b);return a?(0,f.jsxs)("div",{className:"".concat(y," ").concat(i," bgc10"),children:[(0,f.jsx)("div",{className:"".concat(d," c200 f16 fw3"),children:a}),(0,f.jsx)(o.ZP,{renderEmpty:function(){return(0,f.jsx)(h,{text:n})},children:(0,f.jsx)(u.Z,r()(r()({},l),{},{className:"".concat(i," ").concat(m)}))})]}):(0,f.jsx)(o.ZP,{renderEmpty:function(){return(0,f.jsx)(h,{text:n})},children:(0,f.jsx)(u.Z,r()({className:"".concat(i," ").concat(m)},l))})}},48268:function(e,t,n){n.d(t,{y:function(){return l}});var a=n(97857),r=n.n(a),i=n(62435),s=n(61895),o=n(86074),u=function(e){var t=e.defaultValue,n=void 0===t?"-":t,a=e.value,r=e.defaultValueIncludeSuffix,u=void 0!==r&&r,l=e.displayDecimals,p=void 0===l?2:l,c=e.label,y=void 0===c?"":c,d=e.thousandSeparator,m=void 0===d||d,f=e.prefix,b=void 0===f?"":f,h=e.suffix,v=void 0===h?"":h,T=(0,i.useMemo)((function(){return null==a||""===a?u?"".concat(b||"").concat(n).concat(v||""):n:(0,s.dp)(a,p).display({thousandSeparator:m,prefix:b,suffix:v})}),[a,n,p,m,b,v]);return(0,o.jsxs)(o.Fragment,{children:[y,T]})},l=function(e){var t=e.separator,n=void 0===t?"/":t,a=e.values;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u,r()({},a[0]||{})),n,(0,o.jsx)(u,r()({},a[1]||{}))]})};t.Z=u},28469:function(e,t,n){n.d(t,{a:function(){return x}});var a=n(9783),r=n.n(a),i=n(97857),s=n.n(i),o=n(5574),u=n.n(o),l=n(34713),p=n(62435),c=n(4480),y=n(95591),d=n(60088),m=n(7998),f=n(87797),b=n(74595),h=n(37432),v=n(36493),T=n(239),k=function(){var e=(0,h.x)().chainId,t=(0,l.Ge)().library,n=b.I.useContainer().platform,a=(0,y.ZP)("".concat(e),(function(){return(0,f.t)(e,t)})).data,i=(0,c.FV)(T.O7),o=u()(i,2)[1],k=(0,c.FV)(T.tr),g=u()(k,2)[1],x=(0,c.FV)(T.bI),w=u()(x,2),_=w[0],M=w[1],R=a&&(null==a?void 0:a.length)>0?"subscribeTickerBatch":null;(0,d.Z)([R,n],(function(e){var t=u()(e,2),n=t[0],i=t[1];if(!n)return function(){};var l=a.map((function(e){return(0,v.do)(null==e?void 0:e.name).toLowerCase()}));return(0,m.CY)(l,i,(function(e){o((function(t){return s()(s()({},t),{},r()({},e.symbol,e))}))}))})),(0,p.useEffect)((function(){g(a)}),[a]),(0,p.useEffect)((function(){a&&a.length&&(_||M(a[0]),a.find((function(e){return e.address===_.address}))||M(a[0]))}),[a,_])},g=n(86074),x=function(){return k(),(0,g.jsx)("div",{})}},87798:function(e,t,n){n.d(t,{Fc:function(){return o},II:function(){return r},Pi:function(){return a},T$:function(){return s},ZF:function(){return i}});var a="wss://data-stream.binance.com/stream",r="https://data.binance.com/api/v3/",i="https://api.binance.us/api/v3",s="wss://stream.binance.us:9443/stream",o="https://api-cloud.bitmart.com/spot/v1"},67390:function(e,t,n){n.d(t,{c:function(){return m}});var a=n(62435),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var l=Object.defineProperty,p=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var m={"ETH/USD":e=>a.createElement("svg",((e,t)=>{for(var n in t||(t={}))s.call(t,n)&&u(e,n,t[n]);if(i)for(var n of i(t))o.call(t,n)&&u(e,n,t[n]);return e})({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("rect",{width:32,height:32,rx:16,fill:"url(#eth_logo_svg__a)"}),a.createElement("path",{d:"M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16Z",fill:"#687EE3"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.998 20.46V5L8.88 16.328l7.117 4.131Z",fill:"#fff"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.998 20.46V5l7.117 11.328-7.117 4.131Z",fill:"#F4F4F4"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m15.998 27 7.117-10.108-7.117 4.773-7.118-4.773L15.997 27Z",fill:"#fff"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m8.88 16.328 7.117-3.004v7.135L8.88 16.328Z",fill:"#EEE"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m23.115 16.328-7.117-3.004v7.135l7.117-4.13Z",fill:"#DADADA"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.997 21.665V27l7.118-10.108-7.118 4.773Z",fill:"#EEE"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"eth_logo_svg__a",x1:0,y1:0,x2:39.172,y2:10.86,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#3CEAAA"}),a.createElement("stop",{offset:.771,stopColor:"#5C72FF"})))),"BTC/USD":e=>a.createElement("svg",((e,t)=>{for(var n in t||(t={}))c.call(t,n)&&d(e,n,t[n]);if(p)for(var n of p(t))y.call(t,n)&&d(e,n,t[n]);return e})({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("circle",{cx:16,cy:16,r:16,fill:"#F6921A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.752 17.194c.655-.551 1.165-1.323 1.383-2.131.546-2.131-.582-4.3-2.548-4.814l-.582-.147.8-2.976c.037-.184-.072-.33-.218-.404l-1.02-.294c-.181-.037-.327.037-.4.22l-.8 2.977-1.675-.441.801-2.977c.036-.183-.073-.33-.218-.404l-1.02-.294c-.182-.037-.327.037-.4.22l-.8 2.977-3.423-.919c-.182-.036-.327.037-.4.22l-.291 1.03a.37.37 0 0 0 .182.404c1.128.404 1.565 1.36 1.31 2.315L10.76 18.15c-.146.845-.947 1.396-1.784 1.286-.036 0-.073 0-.11-.037-.145-.037-.29.037-.363.184l-.473.992c-.073.147 0 .33.145.404a.1.1 0 0 1 .032.003c.011.004.02.013.041.034l3.276.882-.8 2.976c-.037.184.072.33.218.404l1.055.294c.182.037.328-.037.4-.22l.802-2.977 1.674.441-.8 2.977c-.037.183.072.33.218.404l1.019.294c.182.037.328-.037.4-.22l.801-2.977 1.383.367c2.039.478 4.114-.771 4.587-2.829.328-1.286.037-2.646-.728-3.638Zm-5.751-5.548 2.548.698a1.724 1.724 0 0 1 1.274 2.131 1.706 1.706 0 0 1-2.111 1.286c-.037 0-.073 0-.073-.036l-2.548-.699.91-3.38Zm-2.22 8.34 3.385.92h.072a1.706 1.706 0 0 0 2.112-1.287 1.724 1.724 0 0 0-1.274-2.13l-3.386-.92-.91 3.418Z",fill:"#fff"}))}},20243:function(e,t,n){n.d(t,{U:function(){return f},a:function(){return b}});var a=n(15009),r=n.n(a),i=n(99289),s=n.n(i),o=n(97857),u=n.n(o),l=n(12444),p=n.n(l),c=n(72004),y=n.n(c),d=n(87798),m=function(){function e(t){p()(this,e),this.url=t,this.socket=null,this.isOpened=!1,this.messageQueue=[],this.reconnectTimer=null,this.idCounter=1,this.reconnectCount=0,this.subscriptions=new Map,this.usingRestfulAPI=!1,this.isBehind=!1,this.isChangeing=!1,this.idleTime=9e5,this.initWebSocket()}var t,n;return y()(e,[{key:"initWebSocket",value:function(){var e=this;this.socket=new WebSocket(this.url),this.socket.onopen=function(){console.log("WebSocket connection onopen"),e.lastActiveTime=Date.now(),e.isOpened=!0,e.isBehind=!1,e.isChangeing=!1,e.usingRestfulAPI=!1,e.reconnectCount=0,e.sendCachedMessages(),e.stopReconnect(),e.checkIdleTimer=setInterval((function(){e.checkIdleTime()}),6e4)},this.socket.onmessage=function(t){return e.onMessage(t)};var t=this;this.socket.onclose=function(n){t.isOpened=!1,t.isBehind||t.isChangeing||e.reconnect(),console.log("WebSocket connection closed with code "+n.code+", reason: "+n.reason+", wasClean: "+n.wasClean),clearInterval(e.checkIdleTimer)},this.socket.onerror=function(t){console.log("WebSocket connection error",t),e.isOpened=!1}}},{key:"send",value:function(e){var t=this;if(1===this.socket.readyState)try{this.socket.send(JSON.stringify(e))}catch(e){console.error("WebSocket connection send error",e,this)}else console.log("WebSocket connection readyState fail"),setTimeout((function(){return t.send(e)}),1e3)}},{key:"reconnect",value:function(){console.log("WebSocket reconnecting..."),clearInterval(this.reconnectTimer);var e=this;this.isOpened=!1,this.reconnectTimer=setTimeout((function(){if(e.reconnectCount>=2)return console.error("WebSocket connection failed after multiple attempts."),e.stopReconnect(),e.usingRestfulAPI=!0,void e.pollRestfulAPI();e.reconnectCount++,e.initWebSocket()}),1e3)}},{key:"subscribe",value:function(e,t,n,a){var r=this.idCounter++,i=u()(u()({},e),{},{id:r});return this.subscriptions.set(r,{message:i,callback:t,predicate:n,restfulApiFunc:a}),this.usingRestfulAPI?this.pollRestfulAPI(r):this.isOpened?this.send(i):this.messageQueue.push(i),r}},{key:"onMessage",value:(n=s()(r()().mark((function e(t){var n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.parse(t.data);try{this.subscriptions.forEach((function(e){var t=e.callback,a=e.predicate;void 0!==(null==n?void 0:n.error)?t(n.error,null):a(n)&&t(null,n)}))}catch(e){console.log("WebSocket connection onMessage error: ",e)}case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"checkIdleTime",value:function(){(console.log("WebSocket connection checkIdleTime...",{isOpened:this.isOpened,messageQueue:this.messageQueue,reconnectTimer:this.reconnectTimer,reconnectCount:this.reconnectCount,idCounter:this.idCounter,isBehind:this.isBehind,usingRestfulAPI:this.usingRestfulAPI,subscriptions:Array.from(this.subscriptions.values())}),"hidden"===document.visibilityState)&&(Date.now()-this.lastActiveTime>this.idleTime&&this.isOpened&&(console.log("WebSocket connection exceeds ".concat(this.idleTime," ms, closing...")),this.saveMessageQueue(),this.isBehind=!0,this.close()))}},{key:"saveMessageQueue",value:function(){this.messageQueue=Array.from(this.subscriptions.values()).map((function(e){return e.message})),console.log("WebSocket connection: 缓存的任务",this.messageQueue)}},{key:"handleVisibilityChange",value:function(){"hidden"===document.visibilityState?(console.log("WebSocket connection hidden"),this.checkIdleTime()):(console.log("WebSocket connection visible"),this.lastActiveTime=Date.now(),this.isOpened||this.reconnect())}},{key:"pollRestfulAPI",value:function(e){var t=this;e?this.pollRestfulAPIForSubscription(e):this.subscriptions.forEach((function(e,n){t.pollRestfulAPIForSubscription(n)}))}},{key:"pollRestfulAPIForSubscription",value:(t=s()(r()().mark((function e(t){var n,a,i,s,o;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.subscriptions.get(t),a=n.restfulApiFunc,i=n.callback,s=n.predicate,a){e.next=4;break}return e.abrupt("return");case 4:n.hasOwnProperty("shouldStop")||(n.shouldStop=!1);case 5:if(!this.usingRestfulAPI||n.shouldStop){e.next=20;break}return e.prev=6,e.next=9,a();case 9:o=e.sent,s(o)&&i(null,o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),i(e.t0,null);case 16:return e.next=18,new Promise((function(e){return setTimeout(e,1e3)}));case 18:e.next=5;break;case 20:case"end":return e.stop()}}),e,this,[[6,13]])}))),function(e){return t.apply(this,arguments)})},{key:"stopPollingById",value:function(e){var t=this.subscriptions.get(e);t&&(t.shouldStop=!0)}},{key:"stopReconnect",value:function(){clearTimeout(this.reconnectTimer),this.reconnectTimer=null,this.reconnectCount=0}},{key:"unsubscribe",value:function(e,t){this.stopPollingById(e),this.subscriptions.delete(e),this.isOpened&&this.send(u()(u()({},t),{},{id:this.idCounter++}))}},{key:"sendCachedMessages",value:function(){if(this.isOpened)for(;this.messageQueue.length>0;)this.send(this.messageQueue.shift())}},{key:"changeUrl",value:function(e){this.isChangeing=!0,this.socket&&(this.saveMessageQueue(),this.socket.close()),this.url=e,console.log("WebSocket connection changeUrl",this.url),this.initWebSocket()}},{key:"close",value:function(){this.socket.close()}}]),e}(),f=new m(d.Pi);document.addEventListener("visibilitychange",(function(){f.handleVisibilityChange()}));var b=function(){f.socket.close()}},21650:function(e,t,n){n.d(t,{ET:function(){return c},FB:function(){return s},Qo:function(){return o},VZ:function(){return l},YO:function(){return u},bD:function(){return i},pQ:function(){return p}});var a=n(58926),r=n(24069),i=0,s="Long",o="Short",u="Market",l="Limit",p=((0,r.Jl)(1,30),{"5m":300,"15m":900,"1h":3600,"4h":14400,"1d":86400});function c(e,t){return t?(0,a.jY)(e)+"address/"+t:(0,a.jY)(e)}},28722:function(e,t,n){n.d(t,{Dw:function(){return b},eI:function(){return d},x7:function(){return f}});var a,r=n(15009),i=n.n(r),s=n(99289),o=n.n(s),u=n(9783),l=n.n(u),p=n(88610),c=n(46495),y=n(58926);function d(e){return new p.f({uri:e,cache:new c.h})}var m=(a={},l()(a,y.Qz,"avalanche-c-chain"),l()(a,y.PO,"arbitrum-one"),l()(a,y.N0,"arbitrum-nova"),l()(a,y.bx,"fujibeta"),l()(a,y.qF,"arbtest"),a),f=function(e){return"https://api.thegraph.com/subgraphs/name/dalveytech-adrew/"+m[e]},b=function(){var e=o()(i()().mark((function e(t,n){var a,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({query:n}),mode:"cors"}).catch((function(e){console.log("err",e)}));case 3:return a=e.sent,e.next=6,null==a?void 0:a.json();case 6:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 10:e.prev=10,e.t0=e.catch(0),console.log("fetchGql error",e.t0);case 13:return e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()},96714:function(e,t,n){n.d(t,{P:function(){return r},m:function(){return a}});var a=function(e){if(!e)return"";var t,n=new Date(1e3*e);if(!((t=n)instanceof Date)||isNaN(+t))return"";var a=(null==n?void 0:n.getMonth())+1;return(a=(null==n?void 0:n.getMonth())>9?""+a:"0"+a)+"/"+((null==n?void 0:n.getDate())>9?null==n?void 0:n.getDate():"0"+(null==n?void 0:n.getDate()))+" "+((null==n?void 0:n.getHours())>9?null==n?void 0:n.getHours():"0"+(null==n?void 0:n.getHours()))+":"+((null==n?void 0:n.getMinutes())>9?null==n?void 0:n.getMinutes():"0"+(null==n?void 0:n.getMinutes()))},r="-"},36326:function(e,t,n){n.d(t,{K:function(){return m},Z:function(){return f}});var a=n(15009),r=n.n(a),i=n(99289),s=n.n(i),o=n(8433),u=n(5574),l=n.n(u);var p=function(e){var t=l()(e,5);return{time:t[0]/1e3,open:t[1],high:t[2],low:t[3],close:t[4]}},c=n(87798),y=n(20243),d=o.Z.create({baseURL:c.II,timeout:5e3}),m=function(e){return{getKLines:(a=s()(r()().mark((function t(n){var a,i,s,o,u,l,c,y;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.symbol,i=n.period,s=n.startTime,o=n.endTime,u=n.limit,l=void 0===u?1e3:u,t.prev=1,c={symbol:a.toUpperCase(),interval:i,limit:l},s&&(c.startTime=s),o&&(c.endTime=o),t.next=7,e.get("klines",{params:c});case 7:if(!((y=t.sent).data&&y.data.length>0)){t.next=12;break}return t.abrupt("return",y.data.map(p));case 12:return t.abrupt("return",[]);case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(1),console.log("getKLines: error",t.t0),t.abrupt("return",[]);case 19:case"end":return t.stop()}}),t,null,[[1,15]])}))),function(e){return a.apply(this,arguments)}),getPing:(n=s()(r()().mark((function t(){return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("ping");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)}),subscribeKLine:function(e,t){var n=e.symbol,a=e.period,r="".concat(n,"@kline_").concat(a),i=y.U.subscribe({method:"SUBSCRIBE",params:[r]},t,(function(e){return e.stream===r}));return function(){y.U.unsubscribe(i,{method:"UNSUBSCRIBE",params:[r]})}},getTickerPrice:function(t){return e.get("ticker/price",{params:{symbol:t.toUpperCase()}})},get24HChange:(t=s()(r()().mark((function t(n){return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("ticker/24hr",{params:{symbol:n.toUpperCase()}}));case 1:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)}),subscribeTickerBatch:function(e,t,n){var a=y.U.subscribe({method:"SUBSCRIBE",params:e},t,(function(e){var t;return null==e||null===(t=e.stream)||void 0===t?void 0:t.includes("@ticker")}),n);return function(){y.U.unsubscribe(a,{method:"UNSUBSCRIBE",params:e})}}};var t,n,a},f=m(d)},99658:function(e,t,n){var a=n(8433),r=n(87798),i=n(36326),s=a.Z.create({baseURL:r.ZF,timeout:5e3});t.Z=(0,i.K)(s)},44637:function(e,t,n){n.d(t,{x:function(){return C}});var a=n(15009),r=n.n(a),i=n(99289),s=n.n(i),o=n(12444),u=n.n(o),l=n(72004),p=n.n(l),c=n(31996),y=n.n(c),d=n(26037),m=n.n(d),f=n(20238),b=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"_f","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"market","type":"address"},{"internalType":"address","name":"account","type":"address"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"availableLiquidity","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fac","outputs":[{"internalType":"contract IMarketFactory","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"market","type":"address"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"getFundingFee","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"getFundingRate","outputs":[{"internalType":"int256","name":"","type":"int256"},{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"}],"name":"getMarket","outputs":[{"components":[{"internalType":"uint256","name":"minSlippage","type":"uint256"},{"internalType":"uint256","name":"maxSlippage","type":"uint256"},{"internalType":"uint256","name":"slippageDigits","type":"uint256"},{"internalType":"uint256","name":"minLev","type":"uint256"},{"internalType":"uint256","name":"maxLev","type":"uint256"},{"internalType":"uint256","name":"minCollateral","type":"uint256"},{"internalType":"uint256","name":"maxTradeAmount","type":"uint256"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketReader.ValidOuts","name":"validOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"tokenDigits","type":"uint256"},{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"liquidationFeeUsd","type":"uint256"},{"internalType":"uint256","name":"spread","type":"uint256"},{"internalType":"address","name":"indexToken","type":"address"},{"internalType":"address","name":"collateralToken","type":"address"},{"internalType":"address","name":"orderBookLong","type":"address"},{"internalType":"address","name":"orderBookShort","type":"address"},{"internalType":"address","name":"positionBook","type":"address"}],"internalType":"struct IMarketReader.MarketOuts","name":"mktOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"execFee","type":"uint256"},{"internalType":"uint256","name":"liquidateFee","type":"uint256"},{"internalType":"uint256","name":"digits","type":"uint256"}],"internalType":"struct IMarketReader.FeeOuts","name":"feeOuts","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarkets","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketFactory.Outs[]","name":"_outs","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"market","type":"address"}],"name":"getPositions","outputs":[{"components":[{"internalType":"address","name":"market","type":"address"},{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"uint32","name":"lastTime","type":"uint32"},{"internalType":"uint216","name":"extra3","type":"uint216"},{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"averagePrice","type":"uint256"},{"internalType":"int256","name":"entryFundingRate","type":"int256"},{"internalType":"int256","name":"realisedPnl","type":"int256"},{"internalType":"uint256","name":"extra0","type":"uint256"},{"internalType":"uint256","name":"extra1","type":"uint256"},{"internalType":"uint256","name":"extra2","type":"uint256"}],"internalType":"struct Position.Props[]","name":"_positions","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantAndRevoke","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"initialized","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"market","type":"address"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"isLiquidate","outputs":[{"internalType":"uint256","name":"_state","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"marketRouter","outputs":[{"internalType":"contract IMarketRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vaultRouter","outputs":[{"internalType":"contract IVaultRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),h=n(66457),v=n(25098),T=n.n(v),k=n(9783),g=n.n(k),x=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint8","name":"reason","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"DeleteOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint256","name":"size","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"collateral","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"triggerPrice","type":"uint256"},{"indexed":false,"internalType":"bool","name":"triggerAbove","type":"bool"},{"indexed":false,"internalType":"uint256","name":"tp","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sl","type":"uint256"}],"name":"UpdateOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"int256","name":"collateralDelta","type":"int256"},{"indexed":false,"internalType":"uint256","name":"sizeDelta","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"int256","name":"pnl","type":"int256"},{"components":[{"internalType":"int256","name":"_totoalFees","type":"int256"},{"internalType":"int256","name":"_execFee","type":"int256"},{"internalType":"int256","name":"_fundFee","type":"int256"},{"internalType":"int256","name":"_tradeFee","type":"int256"}],"indexed":false,"internalType":"struct MarketStorage.FeesVars","name":"fees","type":"tuple"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"collateralToken","type":"address"},{"indexed":false,"internalType":"address","name":"indexToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"category","type":"uint256"},{"indexed":false,"internalType":"bool","name":"fromOrder","type":"bool"}],"name":"UpdatePosition","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_FACTORY","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_POS_KEEPER","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"_isIncrease","type":"bool"},{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"cancelOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool[]","name":"_isIncreaseList","type":"bool[]"},{"internalType":"uint256[]","name":"_orderIDList","type":"uint256[]"},{"internalType":"bool[]","name":"_isLongList","type":"bool[]"}],"name":"cancelOrderList","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"collateralToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bool","name":"","type":"bool"}],"name":"decreaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"decreaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"decreaseTrade2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_orderKey","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"name":"execOrderKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"feeRouter","outputs":[{"internalType":"contract IFeeRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collateralDelta","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_payDelta","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"increaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"indexToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookLong","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_key","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"isLiquidate","outputs":[{"internalType":"uint256","name":"_state","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"bool","name":"","type":"bool"}],"name":"liquidatePosition","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"keys","type":"bytes32[]"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"liquidatePositionByKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"market2","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"marketAddressesProvider","outputs":[{"internalType":"contract IMarketAddressesProvider","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookLong","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookShort","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"positionBook","outputs":[{"internalType":"contract IPositionBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_m","type":"address"}],"name":"setMarket2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"address","name":"ob","type":"address"}],"name":"setOrderBook","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_r","type":"address"}],"name":"setRef","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_spread","type":"uint256"}],"name":"setSpread","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"spread","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"updateDecreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bytes32","name":"refCode","type":"bytes32"}],"name":"updateIncreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vault","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),w=n(24069),_=n(25122),M="0.003",R=function(e){y()(R,e);var t,n,a,i,o,l,c,d,f,b,h,v,k=m()(R);function R(e,t,n,a,r,i){var s;return u()(this,R),s=k.call(this,e,t,x.Mt,n),g()(T()(s),"_args",void 0),g()(T()(s),"_valid",void 0),g()(T()(s),"_fee",void 0),g()(T()(s),"_ctoken",void 0),s._args=a,s._valid=r,s._fee=i,s._ctoken=new _.a(e,t,a.collateralToken,void 0),s}return p()(R,[{key:"getClassName",value:function(){return"Market"}},{key:"getCollateralToken",value:function(){return this._ctoken}},{key:"getOpenFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.openFeeRate))&&void 0!==e?e:M}},{key:"getCloseFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.closeFeeRate))&&void 0!==e?e:M}},{key:"getExecFee",value:function(){return this.formatNum(this._fee.execFee)}},{key:"getCleanFee",value:function(){var e;return this.formatNum(null===(e=this._fee)||void 0===e?void 0:e.liquidateFee)}},{key:"getSlippageDecimals",value:function(e){var t=4;return this._valid.slippageDigits.isZero()||(t=this._valid.slippageDigits.toNumber()),(0,w.H2)(e,t)}},{key:"getFeeDecimals",value:function(e){return(0,w.H2)(e,8)}},{key:"getNumDecimals",value:function(e){var t=18;return this._args.tokenDigits.isZero()||(t=this._args.tokenDigits.toNumber()),(0,w.H2)(e,t)}},{key:"parseNumber",value:function(e,t){return(0,w.H2)(e,t)}},{key:"getPriceDecimals",value:function(e){return(0,w.H2)(e,30)}},{key:"formatPrice",value:function(e){return(0,w.dN)(e,30)}},{key:"getTokenDigits",value:function(){return this._args.tokenDigits.toNumber()}},{key:"formatNum",value:function(e,t,n,a){return(0,w.dN)(e,this._args.tokenDigits.toNumber(),t,n,a)}},{key:"formatFeeOrRate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return(0,w.dN)(e,t)}},{key:"formatPercentage",value:function(e){return(0,w.H2)(e,2)}},{key:"allowance",value:(v=s()(r()().mark((function e(t){var n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollateralToken().allowance(t,this._address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"approve",value:(h=s()(r()().mark((function e(t,n,a){var i,s;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new _.a(this._library,this._chainId,this._args.collateralToken,void 0),e.next=3,i.allowance(t,this._address);case 3:if(!e.sent.lt(n)&&!a){e.next=9;break}return s=(0,w._b)(1e3),e.next=8,i.approve(this._address,n.mul(s));case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return h.apply(this,arguments)})},{key:"increaseTrade",value:(b=s()(r()().mark((function e(t,n,a,i){var s;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.approve(t.account,a);case 2:if(!e.sent){e.next=8;break}return e.next=6,this.send("increaseTrade",[t.isLimit,t.payDelta,t.sizeDelta,t.price,t.tpPrice,t.slPrice,t.slippage,t.isLong,n],i);case 6:return s=e.sent,e.abrupt("return",s);case 8:return e.abrupt("return",Promise.resolve(""));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,n,a){return b.apply(this,arguments)})},{key:"decreaseTrade",value:(f=s()(r()().mark((function e(t,n){var a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseTrade",[t.isLimit,t.sizeDelta,t.isKeepLev,t.price,t.slippage,t.isLong,n]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"increaseCollateral",value:(d=s()(r()().mark((function e(t,n){var a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("increaseCollateral",[t,n]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"decreaseCollateral",value:(c=s()(r()().mark((function e(t,n){var a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseCollateral",[(0,w._b)(t),n]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"updateIncreaseOrder",value:(l=s()(r()().mark((function e(t,n,a,i,s){var o;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateIncreaseOrder",[t,n,a,i,s]);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n,a,r){return l.apply(this,arguments)})},{key:"updateDecreaseOrder",value:(o=s()(r()().mark((function e(t,n,a){var i;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateDecreaseOrder",[t,n,a]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return o.apply(this,arguments)})},{key:"cancelOrder",value:(i=s()(r()().mark((function e(t,n,a){var i;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrder",[t,n,a]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"cancelOrderList",value:(a=s()(r()().mark((function e(t,n,a){var i;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrderList",[t,n,a]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"getCtokenDecimals",value:(n=s()(r()().mark((function e(){var t,n,a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this._ctoken)||void 0===t||null===(n=t._contract)||void 0===n?void 0:n.decimals();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"formatCToken",value:(t=s()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,w.dN)(t,6));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),R}(h.k),C=function(e){y()(d,e);var t,n,a,i,o,l,c=m()(d);function d(e,t){return u()(this,d),c.call(this,e,t,b.Mt)}return p()(d,[{key:"getClassName",value:function(){return"MarketReader"}},{key:"getMarket",value:(l=s()(r()().mark((function e(t){var n,a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getMarket",t);case 2:return n=e.sent,a=new R(this._library,this._chainId,t,n.mktOuts,n.validOuts,n.feeOuts),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getMarkets",value:(o=s()(r()().mark((function e(){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getMarkets");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getFundingRate",value:(i=s()(r()().mark((function e(t,n){var a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingRate",t,n);case 2:return a=e.sent,console.log("result "+n,a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getFundingFee",value:(a=s()(r()().mark((function e(t,n,a){var i;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingFee",t,n,a);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"getPositions",value:(n=s()(r()().mark((function e(t,n){var a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getPositions",t,n||f.dE);case 2:return null==(a=e.sent)||a.forEach((function(e){e.realisedPnl.mul(e.hasProfit?1:-1)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"availableLiquidity",value:(t=s()(r()().mark((function e(t,n,a){var i;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("availableLiquidity",n,t,a);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,a){return t.apply(this,arguments)})}]),d}(h.k)},7998:function(e,t,n){n.d(t,{w_:function(){return _},fK:function(){return R},CY:function(){return C}});var a=n(96695),r=n.n(a),i=n(15009),s=n.n(i),o=n(5574),u=n.n(o),l=n(99289),p=n.n(l),c=n(36326),y=n(99658),d=n(8433),m=n(87798),f=n(61895),b=n(21650),h=d.Z.create({baseURL:m.Fc,timeout:5e3}),v=function(e){return e.toUpperCase().replace("USDT","_USDT")},T=function(e){return e.replace("_USDT","USDT").toLowerCase()},k={getKLines:function(){var e=p()(s()().mark((function e(t){var n,a,r,i,o,u,l,p,c,y;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.symbol,r=t.period,i=t.endTime,o=t.limit,u=void 0===o?1e3:o,l={symbol:v(a),from:parseInt((i||Date.now())/1e3)-b.pQ[r]*u,to:i?i/1e3:parseInt(Date.now()/1e3),step:b.pQ[r]/60},e.next=4,h.get("/symbols/kline",{params:l});case 4:if(p=e.sent,c=null==p||null===(n=p.data)||void 0===n?void 0:n.data,!(y=c.klines)||null==y||!y.length){e.next=8;break}return e.abrupt("return",y.map((function(e){return{time:e.timestamp,open:e.open,high:e.high,low:e.low,close:e.close}})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),subscribeKLine:function(e,t){var n=e.symbol,a=e.period,r=!0;function i(){return(i=p()(s()().mark((function e(){var i,o,u,l,p,c,y,d;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=21;break}return i=parseInt(Date.now()/1e3),o={symbol:v(n),from:i-1,to:i,step:b.pQ[a]/60},e.prev=3,e.next=6,h.get("/symbols/kline",{params:o});case 6:l=e.sent,p=null==l||null===(u=l.data)||void 0===u?void 0:u.data,c=p.klines,y=c[0],d={time:y.timestamp,open:y.open,high:y.high,low:y.low,close:y.last_price},t(d),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),r=!1,console.error("subscribeKLine pollKLine fail",e.t0);case 17:return e.next=19,new Promise((function(e){return setTimeout(e,500)}));case 19:e.next=0;break;case 21:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){return r=!1}},subscribeTickerBatch:function(e,t){var n=!0;function a(){return(a=p()(s()().mark((function a(){var r,i;return s()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n){a.next=17;break}return a.prev=1,r=e.map((function(e){return h.get("ticker_detail",{params:{symbol:v(e)}})})),a.next=5,Promise.all(r);case 5:i=a.sent,Object.values(i).forEach((function(e){var n=(null==e?void 0:e.data).data;t({symbol:T(n.symbol),indexPrice:(0,f.Q6)(n.last_price),"24Height":(0,f.Q6)(n.high_24h),"24Low":(0,f.Q6)(n.low_24h),"24Change":(0,f.Q6)(n.fluctuation),"24ChangeRate":(0,f.Q6)(n.fluctuation/n.open_24h)})})),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),n=!1,console.error("subscribeKLine pollKLine fail",a.t0);case 13:return a.next=15,new Promise((function(e){return setTimeout(e,500)}));case 15:a.next=0;break;case 17:case"end":return a.stop()}}),a,null,[[1,9]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){return n=!1}}},g=k,x=n(22537),w=function(e){return{symbol:e.s.toLowerCase(),indexPrice:(0,f.Q6)(e.c),"24Height":(0,f.Q6)(e.h),"24Low":(0,f.Q6)(e.l),"24Change":(0,f.Q6)(e.p),"24ChangeRate":(0,f.Q6)(e.P)}};function _(e,t){return M.apply(this,arguments)}function M(){return(M=p()(s()().mark((function e(t,n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n!==x.t4.Binance){e.next=7;break}return e.next=4,c.Z.getKLines(t);case 4:return e.abrupt("return",e.sent);case 7:if(n!==x.t4.BinanceUS){e.next=13;break}return e.next=10,y.Z.getKLines(t);case 10:return e.abrupt("return",e.sent);case 13:if(n!==x.t4.Bitmart){e.next=17;break}return e.next=16,g.getKLines(t);case 16:return e.abrupt("return",e.sent);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log("getKLines error",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function R(e,t,n){var a=e.symbol,r=e.period,i=function(e,t){var a;e||n({time:(a=t.data).k.t/1e3,open:a.k.o,close:a.k.c,height:a.k.h,low:a.k.l})};return t===x.t4.Binance?c.Z.subscribeKLine({symbol:a,period:r},i):t===x.t4.BinanceUS?y.Z.subscribeKLine({symbol:a,period:r},i):t===x.t4.Bitmart?g.subscribeKLine({symbol:a,period:r},n):void 0}function C(e,t,n){if(t===x.t4.Bitmart)return g.subscribeTickerBatch(e,n);var a=t===x.t4.Binance?c.Z:y.Z,i=function(){var e=p()(s()().mark((function e(t){var n,r,i,o,l;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.getTickerPrice(t),a.get24HChange(t)]).catch((function(e){return console.error("Failed to get ticker info for ".concat(t),e),[null,null]}));case 2:if(n=e.sent,r=u()(n,2),i=r[0].data,o=r[1].data,i&&o){e.next=8;break}return e.abrupt("return");case 8:return l=w({s:i.symbol,c:i.price,h:o.highPrice,l:o.lowPrice,p:o.priceChange,P:o.priceChangePercent}),e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=e.map((function(e){return"".concat(e,"@ticker")}));return a.subscribeTickerBatch(o,(function(e,t){e||n(w(null==t?void 0:t.data))}),p()(s()().mark((function t(){var a,o,u,l;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r()(e),t.prev=1,a.s();case 3:if((o=a.n()).done){t.next=11;break}return u=o.value,t.next=7,i(u);case 7:l=t.sent,n(l);case 9:t.next=3;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),a.e(t.t0);case 16:return t.prev=16,a.f(),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,13,16,19]])}))))}},87797:function(e,t,n){n.d(t,{t:function(){return c}});var a=n(15009),r=n.n(a),i=n(97857),s=n.n(i),o=n(99289),u=n.n(o),l=n(44637),p={name:"BTC/USDT",address:"0xbEcC4Cd3bC7E912bCeA6EFE3F8379a7018455F99"},c=function(){var e=u()(r()().mark((function e(t,n){var a,i;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new l.x(n,t),e.next=3,a.getMarkets();case 3:if(e.t0=e.sent.map((function(e){return s()(s()({},e),{},{address:e.addr})})),e.t0){e.next=6;break}e.t0=[];case 6:return 0==(i=e.t0).length&&(console.warn("failed to get markets"),i.push(p)),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},41519:function(e,t,n){n.d(t,{I:function(){return a}});var a=(0,n(6983).J)({key:"depx-user-preference"}).persistAtom},239:function(e,t,n){n.d(t,{O7:function(){return o},bI:function(){return u},tr:function(){return s}});var a=n(4480),r=n(36493),i=n(41519),s=(0,a.cn)({key:"marketsAtom",default:[],effects_UNSTABLE:[i.I]}),o=(0,a.cn)({key:"marketStoreAtom",default:{}}),u=(0,a.cn)({key:"marketSelectionAtom",default:"",effects_UNSTABLE:[i.I]});(0,a.nZ)({key:"symbolSelectionAtom",get:function(e){var t=(0,e.get)(u);return(0,r.do)(null==t?void 0:t.name).toLowerCase()}})},90513:function(e,t,n){n.d(t,{r:function(){return l}});var a=n(62435),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const l=e=>a.createElement("svg",((e,t)=>{for(var n in t||(t={}))s.call(t,n)&&u(e,n,t[n]);if(i)for(var n of i(t))o.call(t,n)&&u(e,n,t[n]);return e})({width:50,height:51,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 11.75H10.55C4.725 11.75 0 6.713 0 .5h14.45C20.275.5 25 5.537 25 11.75ZM10.55 13H25c0 6.213-4.724 11.25-10.55 11.25H0C0 18.037 4.724 13 10.55 13ZM25 24.25h14.45C45.275 24.25 50 19.213 50 13H35.55C29.725 13 25 18.037 25 24.25Zm25-12.5H35.55C29.725 11.75 25 6.713 25 .5h14.45C45.275.5 50 5.537 50 11.75Zm-39.45 27.5C4.725 39.25 0 44.287 0 50.5h14.45C20.275 50.5 25 45.463 25 39.25H10.55ZM25 38H10.55C4.725 38 0 32.963 0 26.75h14.45C20.275 26.75 25 31.787 25 38Zm0 12.5h14.45C45.275 50.5 50 45.463 50 39.25H35.55C29.725 39.25 25 44.287 25 50.5Zm0-23.75h14.45C45.275 26.75 50 31.787 50 38H35.55C29.725 38 25 32.963 25 26.75Z",fill:"#292D33"}))}}]);