"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[296],{28722:function(n,t,e){e.d(t,{Dw:function(){return g},eI:function(){return d},x7:function(){return v}});var r,u=e(17061),a=e.n(u),o=e(17156),i=e.n(o),c=e(38416),l=e.n(c),m=e(43671),s=e(46495),f=e(58926);function d(n){return new m.f({uri:n,cache:new s.h})}var p=(r={},l()(r,f.Qz,"avalanche-c-chain"),l()(r,f.PO,"arbitrum-one"),l()(r,f.N0,"arbitrum-nova"),l()(r,f.bx,"fujibeta"),l()(r,f.qF,"arbtest"),r),v=function(n){return"https://api.thegraph.com/subgraphs/name/dalveytech-adrew/"+p[n]},g=function(){var n=i()(a()().mark((function n(t,e){var r,u;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({query:e}),mode:"cors"}).catch((function(n){console.log("err",n)}));case 3:return r=n.sent,n.next=6,null==r?void 0:r.json();case 6:return u=n.sent,n.abrupt("return",(null==u?void 0:u.data)||{});case 10:n.prev=10,n.t0=n.catch(0),console.log("fetchGql error",n.t0);case 13:return n.abrupt("return",{});case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(t,e){return n.apply(this,arguments)}}()},67244:function(n,t,e){e.d(t,{KL:function(){return N},LI:function(){return Q},LK:function(){return Y},Nl:function(){return M},W:function(){return R},eh:function(){return q},jj:function(){return j},qn:function(){return T},v:function(){return Z},v_:function(){return E},zd:function(){return _}});var r,u=e(861),a=e.n(u),o=e(17061),i=e.n(o),c=e(17156),l=e.n(c),m=e(42122),s=e.n(m),f=e(27424),d=e.n(f),p=e(38416),v=e.n(p),g=e(43671),h=e(59508),b=e(46495),C=e(17283),y=e(25733),x=e(27484),w=e.n(x),P=e(61029),D=e(62435),V=e(92627),F=e(58926),L=e(61895),I=e(37432),U=e(24069),S=e(28722),k=(r={},v()(r,F.bx,new y.r(F.LY[0])),v()(r,F.qF,new y.r(F.TB[0])),r);function B(n,t,e){for(var r=n.from,u=n.to,a=[],o=function(n,t){var e=[],r=new Date(n);for(;r<=t;)e.push(new Date(r)),r.setDate(r.getDate()+1);return e}(new Date(1e3*r),new Date(1e3*u)),i=0,c=function(){var n=m[l],r=t.find((function(t){return O(new Date(1e3*t.timestamp),n)}));r?a.push(r):a.push(e({timestamp:n.getTime()/1e3},a[i-1])),i++},l=0,m=o;l<m.length;l++)c();return a}function O(n,t){return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()}function q(){var n=w()().startOf("day"),t=w()().endOf("day"),e=n.valueOf(),r=t.valueOf();return{from:parseInt("".concat(e/1e3)),to:parseInt("".concat(r/1e3))}}function N(){var n=w()().subtract(24,"hour").valueOf();return{from:parseInt("".concat(n/1e3)),to:parseInt("".concat(Date.now()/1e3))}}function E(n){var t=A("{\n    _meta {\n      block {\n        number\n      }\n    }\n  }"),e=d()(t,3),r=e[0],u=e[1],a=e[2],o=(0,D.useState)(),i=d()(o,2),c=i[0],l=i[1];return(0,D.useEffect)((function(){r&&k[n.toString()].getBlock(r._meta.block.number).then((function(n){l(n)})).catch((function(n){console.error(n)}))}),[r,l]),{block:c,loading:u,error:a}}var M=function(n){var t=A('\n  {\n    activities(orderBy: timestamp, where: {  timestamp_gte: "'.concat(n.from,'", timestamp_lte:"').concat(n.to,'" }) {\n      openCount\n      closeCount\n      mintCount\n      burnCount\n      timestamp\n      newUser\n      userCount\n    }\n  }\n  ')),e=d()(t,3),r=e[0],u=e[1],a=e[2],o=0,i=0;return{data:B(n,((null==r?void 0:r.activities)||[]).map((function(n){var t=n.mintCount+n.burnCount,e=n.openCount+n.closeCount,r=e+t;o+=r;var u=n.userCount-n.newUser;return i+=n.newUser,s()(s()({},n),{},{all:r,mintAndBurn:t,trading:e,existingUser:u,cumulativeNewUser:i,cumulative:o})})),(function(n,t){return s()(s()({},n),{},{openCount:0,closeCount:0,mintCount:0,burnCount:0,newUser:0,userCount:0,all:0,mintAndBurn:0,trading:0,existingUser:t?t.existingUser:0,cumulativeNewUser:t?t.cumulativeNewUser:0,cumulative:t?t.cumulative:0})})),loading:u,error:a}};function A(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=(t.subgraph,t.subgraphUrl,(0,I.x)()),r=e.chainId,u=(0,D.useState)(),a=d()(u,2),o=a[0],i=a[1],c=(0,D.useState)(!0),l=d()(c,2),m=l[0],s=l[1],f=(0,D.useState)(null),p=d()(f,2),v=p[0],y=p[1];return(0,D.useEffect)((function(){var t=new g.f({link:new h.u({uri:(0,S.x7)(r),fetch:fetch}),cache:new b.h}),e=(0,C.Ps)(n);t.query({query:e}).then((function(n){i(n.data),s(!1)})).catch((function(n){y(n),s(!1)}))}),[n,r]),[o,m,v]}var _=function(n){var t=n.from,e=n.to,r=A('{\n    summaries(where: {period: hourly, timestamp_gte: "'.concat(t,'", timestamp_lte:"').concat(e,'"}) {\n    fees\n    lpVolume\n    openInterest\n    period\n    tradingLPVolume\n    tradingVolume\n    uniqueUsers\n  }}')),u=d()(r,3),a=u[0],o=u[1],i=u[2],c=["fees","openInterest","tradingVolume"];return null!=a&&a.summaries?{data:a.summaries.reduce((function(n,t){var e=K(c,t);return e.lpVolume=e.lpVolume/1e6,e.tradingLPVolume=e.tradingLPVolume/1e6,e.totalVolume=e.tradingVolume+e.tradingLPVolume,n.fees+=e.fees,n.openInterest+=e.openInterest,n.tradingVolume+=e.tradingVolume,n.totalVolume+=e.totalVolume,n.lpVolume+=e.lpVolume,n.uniqueUsers+=e.uniqueUsers,n}),{totalVolume:0,fees:0,tradingLPVolume:0,openInterest:0,tradingVolume:0,lpVolume:0,uniqueUsers:0}),loading:o,error:i}:{data:void 0,loading:o,error:i}},Z=function(){var n=l()(i()().mark((function n(t,e){var r,u,a,o,c,l,m,s,f;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new V.N(t,e)).setChainId(e),n.next=4,r.getVault();case 4:return u=n.sent,n.next=7,r.asset();case 7:return a=n.sent,n.next=10,Promise.all([a.balanceOf(u._address),a.decimals()]);case 10:return o=n.sent,c=d()(o,2),l=c[0],m=c[1],s=(0,U.He)(m),f=(0,U.dN)(l,s),n.abrupt("return",f);case 17:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),j=function(){var n,t=A("{\n  summaries(where: {period: total }) {\n    fees\n    lpVolume\n    openInterest\n    trades\n    period\n    tradingVolume\n    tradingLPVolume\n    uniqueUsers\n  }}"),e=d()(t,3),r=e[0],u=e[1],a=e[2];if(r&&(r.summaries||[]).length>0){(n=K(["fees","openInterest","tradingVolume"],r.summaries[0])).tradingLPVolume=n.tradingLPVolume/1e6,n.totalVolume=n.tradingVolume+n.tradingLPVolume}else n={fees:0,tradingLPVolume:0,totalVolume:0,openInterest:0,tradingVolume:0,lpVolume:0,uniqueUsers:0};return{data:n,loading:u,error:a}},Q=function(n){var t=A('{\n    volumes(where: {period: daily, timestamp_gte: "'.concat(n.from,'", timestamp_lte:"').concat(n.to,'"}) {\n      timestamp\n      open\n      liquidation\n      id\n      market\n      close\n      cumulative\n    }\n    lpstats(where: {period: daily,  timestamp_gte: "').concat(n.from,'", timestamp_lte:"').concat(n.to,'" }) {\n      mint\n      burn\n      timestamp\n      period\n    }\n  }')),e=d()(t,3),r=e[0],u=e[1],o=e[2],i=["open","cumulative","liquidation","close"],c=0,l=[],m={buyAndSell:0};null!=r&&r.volumes&&(l=P.Z.chain((null==r?void 0:r.volumes)||[]).groupBy((function(n){return 86400*parseInt("".concat(n.timestamp/86400))})).map((function(n,t){var e=n.reduce((function(n,t){var e=K(i,t);return n.all+=e.cumulative||0,c+=e.cumulative,n.cumulative=c,m[t.market.toUpperCase()]=0,n[t.market.toUpperCase()]=e.cumulative,n}),{all:0,cumulative:0,timestamp:Number(t)});return e})).value());var f=((null==r?void 0:r.lpstats)||[]).map((function(n){var t=n.mint/1e6,e=n.burn/1e6;return s()(s()({},n),{},{buyAndSell:t+e,mint:t,burn:e})})),p=B(n,P.Z.chain([].concat(a()(f),a()(l))).groupBy((function(n){return 86400*parseInt("".concat(n.timestamp/86400))})).map((function(n){return n.reduce((function(n,t){return s()(s()({},n),t)}),s()({},m))})).value(),(function(n,t){return s()(s()(s()({},n),m),{},{all:0,mint:0,burn:0,buyAndSell:0,cumulative:t?t.cumulative:0})})),v=0;return p.reduce((function(n,t,e){var r=t.cumulative;return v+=t.buyAndSell||0,e>0&&void 0===t.cumulative?(r=p[e-1].cumulative,r+=t.buyAndSell):r+=v,t.cumulative=r,t.all=(t.all||0)+t.buyAndSell,n}),p),{data:p,loading:u,error:o}},T=function(n){var t,e,r,u,a,o,i,c,l,m,f=["totalProfit","totalLoss","pnlCumulative","longOpenInterest","openInterest","shortOpenInterest"],p=A('{\n     traders (where: { timestamp_gte: "'.concat(n.from,'", timestamp_lte:"').concat(n.to,'"}) {\n      longOpenInterest\n      openInterest\n      pnlCumulative\n      shortOpenInterest\n      timestamp\n      totalLoss\n      totalProfit\n    }\n  }\n  ')),v=d()(p,3),g=v[0],h=v[1],b=v[2],C=0,y=0,x=0,w=((null==g?void 0:g.traders)||[]).map((function(n){var t=K(f,n),e=t.totalProfit,r=t.totalLoss,u=r+e;return C+=u,x+=e,y-=Math.abs(r),s()(s()({},t),{},{currentLossCumulative:y,currentProfitCumulative:x,pnl:u,currentPnlCumulative:C})})),D=0,V=0,F=0;w.length>0&&(t=null===(i=P.Z.maxBy(w,(function(n){return n.pnl})))||void 0===i?void 0:i.pnl,e=null===(c=P.Z.minBy(w,(function(n){return n.pnl})))||void 0===c?void 0:c.pnl,a=null===(l=P.Z.maxBy(w,(function(n){return n.currentPnlCumulative})))||void 0===l?void 0:l.currentPnlCumulative,r=null===(m=P.Z.minBy(w,(function(n){return n.currentPnlCumulative})))||void 0===m?void 0:m.currentPnlCumulative,u=P.Z.minBy(w,(function(n){return n.totalLoss})).totalLoss,o=P.Z.maxBy(w,(function(n){return n.totalProfit})).totalProfit,D=Math.max(o,-u),V=w[w.length-1].currentProfitCumulative,F=w[w.length-1].currentLossCumulative);return{data:{data:B(n,w,(function(n,t){return s()(s()({},n),{},{longOpenInterest:0,openInterest:0,shortOpenInterest:0,currentLossCumulative:t?t.currentLossCumulative:0,currentProfitCumulative:t?t.currentProfitCumulative:0,pnl:0,currentPnlCumulative:t?t.currentPnlCumulative:0,pnlCumulative:t?t.pnlCumulative:0,totalLoss:0,totalProfit:0})})),stats:{maxPnl:t,maxLoss:u,maxProfit:o,maxProfitLoss:D,maxCurrentCumulativeProfitLoss:Math.max(V,-F),maxCurrentCumulativePnl:a,maxAbsPnl:Math.max(Math.abs(t||0),Math.abs(e||0)),maxAbsCumulativePnl:Math.max(Math.abs(a||0),Math.abs(r||0))}},loading:h,error:b}};function K(n,t){var e=s()({},t);return n.forEach((function(n){e[n]=(0,L.Q6)(t[n]).dividedBy(1e18).toNumber()})),e}var R=function(){var n=A("{\n   fees(where: {period: daily}) {\n      period\n      cumulative\n      timestamp\n    }\n  }\n  "),t=d()(n,3),e=t[0],r=t[1],u=(t[2],((null==e?void 0:e.fees)||[]).filter((function(n){return O(new Date(1e3*n.timestamp),new Date)}))),a=0;return u.length>0&&(a=(0,L.Q6)(u[0].cumulative).dividedBy(1e18).toNumber()),{data:a,loading:r}},Y=function(n){var t=A('{\n    fees(where: {timestamp_gte: "'.concat(n.from,'", timestamp_lte:"').concat(n.to,'"}) {\n      id\n      open\n      close\n      execution\n      liquidation\n      funding\n      mint\n      timestamp\n      cumulative\n      burn\n    }\n  }\n  ')),e=d()(t,3),r=e[0],u=e[1],a=e[2],o=["open","close","execution","liquidation","funding","mint","burn","cumulative"],i=0;return{data:B(n,((null==r?void 0:r.fees)||[]).map((function(n){var t=K(o,n);i+=t.cumulative;var e=t.cumulative;return s()(s()({},t),{},{all:e,trading:t.open+t.close+t.execution+t.funding,cumulative:i})})),(function(n,t){return s()(s()({},n),{},{open:0,close:0,execution:0,liquidation:0,funding:0,trading:0,mint:0,burn:0,cumulative:t?t.cumulative:0,all:0})})),loading:u,error:a}}},10322:function(n,t,e){e.d(t,{CX:function(){return q},DM:function(){return D},DZ:function(){return x},Fh:function(){return h},Hh:function(){return P},Jv:function(){return y},SV:function(){return F},Yq:function(){return O},aD:function(){return b},g5:function(){return k},kS:function(){return S},mr:function(){return U},uf:function(){return I},xs:function(){return B}});var r=e(38416),u=e.n(r),a=e(42122),o=e.n(a),i=e(27424),c=e.n(i),l=e(70215),m=e.n(l),s=e(861),f=e.n(s),d=e(12001),p=e.n(d),v=e(61895),g=["timestamp"],h=400,b=65,C=Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),y=(Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),function(n,t){return x(n,t,!0)}),x=function(n,t,e){var r=n;if(!n)return"";r.constructor!==Date&&(r=new Date(1e3*r));var u=t&&t[0]&&t[0].payload&&t[0],a=p()("%d.%m",r),o=u&&u.payload.all;return e||void 0===o||u&&"%"===u.unit?a:"".concat(a,", ").concat(I(o,{currency:!0,compact:!0}))},w=(Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),"#f93333"),P={RED:"#E45571",GREEN:"#70D785",YELLOW:"#FFD15B",BLUE:"#5D75F6",ORANGE:"#F1864A",PURPLE:"#8884FF",CUMULATIVE:"#FFC500"},D=[P.ORANGE,P.BLUE,"#00bfea","#8884ff","#ab6100","#c90000","#7b7b7b","#6464ff","purple","darkgreen","#ff8d00",w,"#ffaf01"],V=function(n){var t=Math.abs(n);return t>=1e9?"".concat((0,v.Q6)(n/1e9).toFixed(2,1),"B"):t>=1e6?"".concat((0,v.Q6)(n/1e6).toFixed(2,1),"M"):t>=1e3?"".concat((0,v.Q6)(n/1e3).toFixed(2,1),"K"):"".concat((0,v.Q6)(n).toFixed(2,1))},F=function(n){return n.toFixed(2)+"%"};function L(n){var t=Math.floor(100*Math.abs(n))/100,e=n<0?-1:1;return C.format(t*e)}var I=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=!!t.currency,r=!!t.compact,u=r?V(n):L(n);return e&&!t.hiddenDollarSign?"$".concat(u):u},U=function(n){return I(n)},S=function(n){return V(n)},k=function(n){return I(n,{currency:!0,compact:!0})},B=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",r=n;if(!r)return r;if(r.constructor!==Date&&!(r=new Date(1e3*Number(r))).getDate())return r;var u=p()("%d.%m",r),a=t&&t[0];if(a&&"%"===a.unit)return u;var o=a&&a.payload[e];return r.constructor!==Date?"".concat(r,", total: ").concat(I(o)):"".concat(u,", total: ").concat(I(o))},O=function(n,t){var e=t.totalKey,r=void 0===e?"all":e,a=t.ignoreKeys,i=void 0===a?[]:a,l=[].concat(f()(i),[r]);return n.map((function(n){var t,e=n.timestamp,a=m()(n,g),i=n[r];"number"!=typeof i&&(i=Object.entries(a).reduce((function(n,t){var e=c()(t,2),r=e[0],u=e[1];return l.includes(r)||(n+=u),n}),0));var s=Object.entries(a).reduce((function(n,t){var e=c()(t,2),r=e[0],u=e[1];return l.includes(r)?n[r]=u:n[r]=u/i*100,n}),{});return o()(o()({},s),{},(t={},u()(t,r,100),u()(t,"timestamp",e),t))}))},q=function(n,t){return t&&"%"===t.unit?n.toFixed(2):I(n,{currency:!0})}},87797:function(n,t,e){e.d(t,{t:function(){return s}});var r=e(17061),u=e.n(r),a=e(42122),o=e.n(a),i=e(17156),c=e.n(i),l=e(44637),m={name:"BTC/USDT",address:"0xbEcC4Cd3bC7E912bCeA6EFE3F8379a7018455F99"},s=function(){var n=c()(u()().mark((function n(t,e){var r,a;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new l.x(e,t),n.next=3,r.getMarkets();case 3:if(n.t0=n.sent.map((function(n){return o()(o()({},n),{},{address:n.addr})})),n.t0){n.next=6;break}n.t0=[];case 6:return 0==(a=n.t0).length&&(console.warn("failed to get markets"),a.push(m)),n.abrupt("return",a.sort((function(n,t){return n.name.localeCompare(t.name)})));case 9:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()}}]);