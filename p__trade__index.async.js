"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[939],{21650:function(e,t,n){n.d(t,{ET:function(){return d},FB:function(){return l},Qo:function(){return s},VZ:function(){return c},YO:function(){return o},bD:function(){return a},pQ:function(){return u}});var i=n(13805),r=n(24069),a=0,l="Long",s="Short",o="Market",c="Limit",u=((0,r.Jl)(1,30),{"5m":300,"15m":900,"1h":3600,"4h":14400,"1d":86400});function d(e,t){return t?(0,i.jY)(e)+"address/"+t:(0,i.jY)(e)}},35773:function(e,t,n){n.r(t),n.d(t,{default:function(){return ra}});var i=n(861),r=n.n(i),a=n(27424),l=n.n(a),s=n(34713),o=n(62435),c=n(4480),u=n(59734),d=n(42122),p=n.n(d),m=(0,c.cn)({key:"marketsAtom",default:["ETH/USD","BTC/USD"]}),v=(0,c.cn)({key:"indexPricesMapAtom",default:{"ETH/USD":1688,"BTC/USD":1699}}),f=n(36493),y=function(e){return null!=e&&e.length?"("+((null==e?void 0:e.length)>=99?"99+":e.length)+")":""},x=n(38416),h=n.n(x),g=n(90044),_=n(13907),b="depx-market-selection";function j(e,t,n){var i=JSON.stringify(e);return(0,_.Z)(i,t,n)}function P(e,t){var n=window.localStorage.getItem(t);if(n)try{var i=JSON.parse(n);return(0,g.Z)(i,e)}catch(e){console.error(e)}}var N=(0,c.cn)({key:"marketSelection",default:void 0}),L=(0,c.CG)({key:"marketSelectionSelector",get:function(e){return function(t){var n=t.get;return P(e,b)||n(N)}},set:function(e){return function(t,n){(0,t.set)(N,n),function(e,t,n){var i=window.localStorage.getItem(t);try{(i=i?JSON.parse(i):Object.create(null))[e]=n,window.localStorage.setItem(t,JSON.stringify(i))}catch(e){console.error(e)}}(e,b,n)}}}),k=(0,c.cn)({key:"curIndexPriceAtom",default:0}),w=(0,c.cn)({key:"Position",default:[]}),T=(0,c.cn)({key:"Orders",default:[]}),O=(0,c.cn)({key:"Trades",default:[]}),C=(0,c.cn)({key:"isHideOtherPairsAtom",default:!1}),S=(0,c.nZ)({key:"positionSelector",get:function(e){var t=e.get,n=t(v),i=t(N);return t(w).filter((function(e){return!t(C)||e.pair===(null==i?void 0:i.name)})).map((function(e){return p()(p()({},e),{},{indexPrice:n[(0,f.do)(e.pair)]})}))}}),F=(0,c.nZ)({key:"ordersSelector",get:function(e){var t=e.get,n=t(v);return t(T).filter((function(e){var n;return!t(C)||e.pair===(null===(n=marketSelection)||void 0===n?void 0:n.name)})).map((function(e){return p()(p()({},e),{},{indexPrice:n?n[(0,f.do)(e.pair)]:0})}))}}),I=(0,c.nZ)({key:"tradeSelector",get:function(e){var t=e.get;return t(O).filter((function(e){var n;return!t(C)||e.pair===(null===(n=marketSelection)||void 0===n?void 0:n.name)}))}}),M=(0,c.nZ)({key:"positionCountSelector",get:function(e){var t=e.get;return y(t(w))}}),D=(0,c.nZ)({key:"orderCount",get:function(e){var t=e.get;return y(t(T))}}),E=n(74704),A=n.n(E),z=n(17061),R=n.n(z),B=n(17156),H=n.n(B),Z=n(94184),V=n.n(Z),$=n(33290),q=n(17158),U=Object.defineProperty,G=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,J=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Q=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))W.call(t,n)&&J(e,n,t[n]);if(G)for(var n of G(t))Y.call(t,n)&&J(e,n,t[n]);return e})({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("rect",{width:32,height:32,rx:16,fill:"url(#depx_select_icon_svg__a)"}),o.createElement("rect",{width:32,height:32,rx:16,fill:"url(#depx_select_icon_svg__b)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.05 5.95a1.2 1.2 0 0 1 1.2-1.2H16a11.22 11.22 0 0 1 8.248 3.6H11.05v-2.4Zm0 8.25h16.057a11.337 11.337 0 0 1 0 3.6H11.05v-3.6Zm0 9.45v2.4a1.2 1.2 0 0 0 1.2 1.2H16a11.22 11.22 0 0 0 8.248-3.6H11.05Z",fill:"#fff"}),o.createElement("path",{opacity:.6,fillRule:"evenodd",clipRule:"evenodd",d:"M6.834 9.475a11.201 11.201 0 0 0-1.7 3.6h21.732a11.202 11.202 0 0 0-1.7-3.6H6.833Zm0 13.05a11.203 11.203 0 0 1-1.7-3.6h21.732a11.205 11.205 0 0 1-1.7 3.6H6.833Zm9.148 4.725h.035-.035Z",fill:"#fff"}),o.createElement("defs",null,o.createElement("linearGradient",{id:"depx_select_icon_svg__a",x1:0,y1:0,x2:39.172,y2:10.86,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"})),o.createElement("linearGradient",{id:"depx_select_icon_svg__b",x1:0,y1:0,x2:39.172,y2:10.86,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"}))));var K=Object.defineProperty,X=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,ne=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const ie=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))ee.call(t,n)&&ne(e,n,t[n]);if(X)for(var n of X(t))te.call(t,n)&&ne(e,n,t[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("g",{filter:"url(#more_svg__b)",clipPath:"url(#more_svg__a)"},o.createElement("path",{d:"m16.8 9-4.837 7.2L7.2 9h9.6Z",fill:"#fff"})),o.createElement("defs",null,o.createElement("clipPath",{id:"more_svg__a"},o.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})),o.createElement("filter",{id:"more_svg__b",x:3.199,y:9,width:17.6,height:15.2,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),o.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),o.createElement("feOffset",{dy:4}),o.createElement("feGaussianBlur",{stdDeviation:2}),o.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),o.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),o.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_313_1951"}),o.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_313_1951",result:"shape"}))));var re="btn___r1nTS",ae="targetSelect___WQeay",le="menu___rnv_7",se="menus___KY35b",oe="menuItem___wEjP0",ce="activeItem___kB1Rj",ue=n(86074),de=function(e){var t=e.options,n=e.onChange,i=e.value;return(0,ue.jsx)("div",{className:le,children:(0,ue.jsxs)(q.v,{children:[(0,ue.jsxs)(q.v.Button,{className:re,children:[(0,ue.jsx)(Q,{}),(0,ue.jsx)("div",{className:ae,children:null==i?void 0:i.name}),(0,ue.jsx)(ie,{})]}),(0,ue.jsx)(q.v.Items,{as:"div",className:se,children:(t||[]).map((function(e,t){return(0,ue.jsx)(q.v.Item,{children:function(t){var i=t.active;return(0,ue.jsx)("div",{className:V()(oe,h()({},ce,i)),onClick:function(){n(e)},children:(0,ue.jsx)("span",{style:{marginLeft:5},children:e.name})})}},t)}))})]})})},pe={tab:"tab___AIepu",periodTab:"periodTab___AU1Sf",tabItem:"tabItem___K48RO",active:"active___yzxjn",statsLabel:"statsLabel___h81vX",statsValue:"statsValue___haDDX"},me=function(e){var t=e.options,n=e.stats,i=e.value,r=e.className,a=e.onChange;return(0,ue.jsxs)("div",{className:V()(pe.tab,r),children:[(0,ue.jsx)("ul",{className:pe.periodTab,children:t.map((function(e){return(0,ue.jsx)("li",{onClick:function(){return a(e.value)},className:V()(pe.tabItem,h()({},pe.active,e.value===i)),children:e.label},e.value)}))}),(0,ue.jsxs)("div",{className:V()(pe.stats,null==n?void 0:n.className),children:[(0,ue.jsx)("span",{className:pe.statsLabel,children:"O"}),(0,ue.jsx)("span",{className:pe.statsValue,children:null==n?void 0:n.O}),(0,ue.jsx)("span",{className:pe.statsLabel,children:"H"}),(0,ue.jsx)("span",{className:pe.statsValue,children:null==n?void 0:n.H}),(0,ue.jsx)("span",{className:pe.statsLabel,children:"L"}),(0,ue.jsx)("span",{className:pe.statsValue,children:null==n?void 0:n.L}),(0,ue.jsx)("span",{className:pe.statsLabel,children:"C"}),(0,ue.jsx)("span",{className:pe.statsValue,children:null==n?void 0:n.C})]})]})},ve=n(4175),fe=n(61895),ye=n(37432),xe=n(72167);var he=n(21650),ge={main:"main___baTli",chart:"chart___CLGMg",kchart:"kchart___QYDyz",periodTab:"periodTab___cinp7",currentPrice:"currentPrice___wEDGk",header:"header___AT8K5",indexPriceContainer:"indexPriceContainer___vWNqA",priceBox:"priceBox___yHFEN",title:"title___tV3f3",headerRight:"headerRight___fs_Ys",price:"price___e2U86",percentage:"percentage___S6CTj",negative:"negative___R8NaS",positive:"positive___XgCl2"},_e=60*-(new Date).getTimezoneOffset(),be=Object.keys(he.pQ).map((function(e){return{label:e,value:e}})),je=function(e,t){return{width:e,height:t,layout:{backgroundColor:"rgba(255, 255, 255, 0)",textColor:"#ccc",fontFamily:"Relative"},localization:{timeFormatter:function(e){return t=e-_e,(0,xe.Z)(1e3*t,"dd MMM yyyy, h:mm a");var t}},grid:{vertLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2},horzLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2}},timeScale:{rightOffset:5,borderVisible:!1,barSpacing:5,timeVisible:!0,fixLeftEdge:!0},priceScale:{borderVisible:!1},crosshair:{horzLine:{color:"#aaa"},vertLine:{color:"#aaa"},mode:0}}},Pe=(0,ve.a)(),Ne=function(e){var t,n,i,r,a,s=e.indexPrice,d=e.onChangeMarketSelection,m=e.markets,v=(0,o.useRef)(),y=(0,o.useState)(),x=l()(y,2),g=x[0],_=x[1],b=(0,o.useState)(!1),P=l()(b,2),N=P[0],k=P[1],w=(0,o.useState)(),T=l()(w,2),O=T[0],C=T[1],S=(0,o.useState)(),F=l()(S,2),I=F[0],M=F[1],D=(0,ye.x)().chainId,E=(0,c.sJ)(L(D)),z=j([D,"Chart-period"],"4h"),B=l()(z,2),Z=B[0],q=B[1];Z in he.pQ||(Z="4h");var U,G=(0,f.do)(null==E?void 0:E.name),W=null!=E&&E.name?["getChartCandles",D,G,Z]:null,Y=(0,u.ZP)(G?[G]:null,{fetcher:function(){return Pe.get24H(G)}}).data,J=(0,u.ZP)(W,{fetcher:(U=H()(R()().mark((function e(){return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.getKLines(G,Z);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return U.apply(this,arguments)}),dedupingInterval:6e4,focusThrottleInterval:6e5}),Q=J.data,K=J.mutate;(0,o.useEffect)((function(){var e=setInterval((function(){K(void 0,!0)}),6e4);return function(){return clearInterval(e)}}),[K]);var X=(0,o.useCallback)((function(e){if(e.time){var t,n=A()(e.seriesPrices.values());try{var i=function(){var n=t.value;return _((function(t){return t&&t.time===e.time?t:p()({time:e.time},n)})),"break"};for(n.s();!(t=n.n()).done;){if("break"===i())break}}catch(e){n.e(e)}finally{n.f()}}else _(null)}),[_]),ee=(0,o.useCallback)((function(){if(O&&Z){var e=Date.now()/1e3-168*he.pQ[Z]/2+_e,t=Date.now()/1e3+_e;O.timeScale().setVisibleRange({from:e,to:t})}}),[O,Z]);(0,o.useEffect)((function(){var e,t;if(Q&&Q.length&&!O){var n=(0,$.C2)(v.current,je(null===(e=v.current)||void 0===e?void 0:e.offsetWidth,null===(t=v.current)||void 0===t?void 0:t.offsetHeight));n.subscribeCrosshairMove(X);var i=n.addCandlestickSeries({lineColor:"#5472cc",topColor:"rgba(49, 69, 131, 0.4)",bottomColor:"rgba(42, 64, 103, 0.0)",lineWidth:2,priceLineColor:"#3a3e5e",downColor:"#fa3c58",wickDownColor:"#fa3c58",upColor:"#0ecc83",wickUpColor:"#0ecc83",borderVisible:!1});C(n),M(i)}}),[Q]),(0,o.useEffect)((function(){if(O){var e=function(){v.current&&O.resize(v.current.offsetWidth,v.current.offsetHeight)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[O]),(0,o.useEffect)((function(){I&&Q&&Q.length&&(I.setData(Q),N||(ee(),k(!0)))}),[Q,I,N,ee]);var te=(0,o.useMemo)((function(){var e;if(Q){var t=g||Q[Q.length-1];if(t){return{className:V()((e={},h()(e,ge.positive,t.open<=t.close),h()(e,ge.negative,t.open>t.close),e)),O:(0,fe.O)(t.open).toFixed(2,1),H:(0,fe.O)(t.high).toFixed(2,1),L:(0,fe.O)(t.low).toFixed(2,1),C:(0,fe.O)(t.close).toFixed(2,1)}}}}),[g,Q]);if(!E)return null;var ne=function(e){return e?e.gt(0)?"+".concat(e.toFixed(2,1)):"".concat(e.toFixed(2,1)):""};return(0,ue.jsxs)("div",{className:ge.main,children:[(0,ue.jsxs)("div",{className:ge.header,children:[(0,ue.jsxs)("div",{className:ge.indexPriceContainer,children:[(0,ue.jsx)(de,{options:m||[],value:E,onChange:function(e){d(e)},chainId:D}),(0,ue.jsxs)("div",{className:ge.currentPrice,children:["$",s]})]}),(0,ue.jsx)("div",{className:ge.headerRight,children:[{title:"24h Change",text:"".concat(ne(null==Y?void 0:Y.Change)," ").concat(ne(null==Y?void 0:Y.ChangeRate),"%"),className:V()(ge.percentage,(i={},h()(i,ge.positive,null==Y||null===(t=Y.Change)||void 0===t?void 0:t.gt(0)),h()(i,ge.negative,null==Y||null===(n=Y.Change)||void 0===n?void 0:n.lt(0)),i))},{title:"24h High",text:null==Y||null===(r=Y.Hige)||void 0===r?void 0:r.toFixed(2,1),className:ge.price},{title:"24h Low",text:null==Y||null===(a=Y.Low)||void 0===a?void 0:a.toFixed(2,1),className:ge.price}].map((function(e,t){return(0,ue.jsxs)("div",{className:ge.priceBox,children:[(0,ue.jsx)("span",{className:ge.title,children:e.title}),(0,ue.jsx)("span",{className:"".concat(ge.text," ").concat(e.className),children:e.text})]})}))})]}),(0,ue.jsxs)("div",{className:ge.kchart,children:[(0,ue.jsx)(me,{stats:te,className:ge.periodTab,value:Z,onChange:q,options:be}),(0,ue.jsx)("div",{className:ge.chart,ref:v})]})]})},Le=n(61641),ke=n(56690),we=n.n(ke),Te=n(89728),Oe=n.n(Te),Ce=n(61655),Se=n.n(Ce),Fe=n(26389),Ie=n.n(Fe),Me=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"availableLiquidity","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"getFundingFee","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"getFundingRate","outputs":[{"internalType":"int256","name":"","type":"int256"},{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"}],"name":"getMarket","outputs":[{"components":[{"internalType":"uint256","name":"minSlippage","type":"uint256"},{"internalType":"uint256","name":"maxSlippage","type":"uint256"},{"internalType":"uint256","name":"slippageDigits","type":"uint256"},{"internalType":"uint256","name":"minLev","type":"uint256"},{"internalType":"uint256","name":"maxLev","type":"uint256"},{"internalType":"uint256","name":"minCollateral","type":"uint256"},{"internalType":"uint256","name":"maxTradeAmount","type":"uint256"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketReader.ValidOuts","name":"validOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"tokenDigits","type":"uint256"},{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"liquidationFeeUsd","type":"uint256"},{"internalType":"uint256","name":"spread","type":"uint256"},{"internalType":"address","name":"indexToken","type":"address"},{"internalType":"address","name":"collateralToken","type":"address"},{"internalType":"address","name":"vault","type":"address"},{"internalType":"address","name":"marketAddressesProvider","type":"address"},{"internalType":"address","name":"orderBookLong","type":"address"},{"internalType":"address","name":"orderBookShort","type":"address"},{"internalType":"address","name":"positionBook","type":"address"}],"internalType":"struct IMarketReader.MarketOuts","name":"mktOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"execFee","type":"uint256"},{"internalType":"uint256","name":"liquidateFee","type":"uint256"},{"internalType":"uint256","name":"digits","type":"uint256"}],"internalType":"struct IMarketReader.FeeOuts","name":"feeOuts","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_market","type":"address"}],"name":"getPositions","outputs":[{"components":[{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"averagePrice","type":"uint256"},{"internalType":"int256","name":"entryFundingRate","type":"int256"},{"internalType":"uint256","name":"realisedPnl","type":"uint256"},{"internalType":"bool","name":"hasProfit","type":"bool"},{"internalType":"uint256","name":"lastTime","type":"uint256"},{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"uint256[]","name":"orderIDs","type":"uint256[]"}],"internalType":"struct IMarketReader.PositionOuts[]","name":"_positions","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_mkt","type":"address"},{"internalType":"address","name":"_user","type":"address"}],"name":"getUserFee","outputs":[{"components":[{"internalType":"uint256","name":"openFee","type":"uint256"},{"internalType":"uint256","name":"closeFee","type":"uint256"},{"internalType":"int256","name":"fundFee","type":"int256"},{"internalType":"uint256","name":"liquidateFee","type":"uint256"},{"internalType":"uint256","name":"execFee","type":"uint256"}],"internalType":"struct IMarketReader.UserFeeOuts","name":"_outs","type":"tuple"}],"stateMutability":"view","type":"function"}]}'),De=n(76935),Ee=n(66115),Ae=n.n(Ee),ze=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"}],"name":"DeleteOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"bool","name":"isIncrease","type":"bool"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"uint256","name":"size","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"collateral","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"triggerPrice","type":"uint256"},{"indexed":false,"internalType":"bool","name":"triggerAbove","type":"bool"},{"indexed":false,"internalType":"uint256","name":"tp","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sl","type":"uint256"}],"name":"UpdateOrder","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"collateralDelta","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sizeDelta","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"int256","name":"pnl","type":"int256"},{"indexed":false,"internalType":"uint256","name":"execFee","type":"uint256"},{"indexed":false,"internalType":"int256","name":"fundFee","type":"int256"},{"indexed":false,"internalType":"uint256","name":"tradeFee","type":"uint256"},{"indexed":false,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"collateralToken","type":"address"},{"indexed":false,"internalType":"address","name":"indexToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"category","type":"uint256"}],"name":"UpdatePosition","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_FACTORY","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_POS_KEEPER","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"_isIncrease","type":"bool"},{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"cancelOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool[]","name":"_isIncreaseList","type":"bool[]"},{"internalType":"uint256[]","name":"_orderIDList","type":"uint256[]"},{"internalType":"bool[]","name":"_isLongList","type":"bool[]"}],"name":"cancelOrderList","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"collateralToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bool","name":"","type":"bool"}],"name":"decreaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isExec","type":"bool"}],"name":"decreaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_triggerAbove","type":"bool"}],"name":"decreaseTrade2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_orderKey","type":"bytes32"},{"internalType":"contract IOrderBook","name":"_orderBook","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"name":"execOrderKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"_orderKeyList","type":"bytes32[]"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"name":"execOrderKeys","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_start","type":"uint256"},{"internalType":"uint256","name":"_end","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"name":"execOrders","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"feeRouter","outputs":[{"internalType":"contract IFeeRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collateralDelta","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"uint8","name":"version","type":"uint8"},{"internalType":"uint32","name":"updatedAtBlock","type":"uint32"},{"internalType":"uint8","name":"triggerAbove","type":"uint8"},{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint128","name":"price","type":"uint128"},{"internalType":"uint128","name":"priceExtra","type":"uint128"},{"internalType":"uint256","name":"orderID","type":"uint256"},{"internalType":"uint256","name":"extra0","type":"uint256"},{"internalType":"uint256","name":"extra1","type":"uint256"}],"internalType":"struct Order.Props","name":"order","type":"tuple"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increasePositionFromOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_payDelta","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isExec","type":"bool"}],"name":"increaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_payDelta","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_triggerAbove","type":"bool"}],"name":"increaseTrade2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"indexToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookLong","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_key","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"isLiquidate","outputs":[{"internalType":"uint256","name":"_state","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"bool","name":"","type":"bool"}],"name":"liquidatePosition","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"keys","type":"bytes32[]"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"liquidatePositionByKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"marketAddressesProvider","outputs":[{"internalType":"contract IMarketAddressesProvider","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookLong","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookShort","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"positionBook","outputs":[{"internalType":"contract IPositionBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_delete","type":"bool"}],"name":"setDeleteOrdersWhenPositionClosed","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_p","type":"bool"}],"name":"setOpenDebug","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_spread","type":"uint256"}],"name":"setSpread","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"spread","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"updateDecreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"updateIncreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newMarketAddr","type":"address"}],"name":"upgradeTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vault","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),Re=n(24069),Be=n(25122),He="0.003",Ze=function(e){Se()(v,e);var t,n,i,r,a,l,s,o,c,u,d,p,m=Ie()(v);function v(e,t,n,i,r,a){var l;return we()(this,v),l=m.call(this,e,t,ze.Mt,n),h()(Ae()(l),"_args",void 0),h()(Ae()(l),"_valid",void 0),h()(Ae()(l),"_fee",void 0),h()(Ae()(l),"_ctoken",void 0),l._args=i,l._valid=r,l._fee=a,l._ctoken=new Be.a(l._library,t,i.collateralToken,void 0),l}return Oe()(v,[{key:"getClassName",value:function(){return"Market"}},{key:"getCollateralToken",value:function(){return this._ctoken}},{key:"getOpenFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.openFeeRate))&&void 0!==e?e:He}},{key:"getCloseFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.closeFeeRate))&&void 0!==e?e:He}},{key:"getExecFee",value:function(){return this.formatNum(this._fee.execFee)}},{key:"getCleanFee",value:function(){var e;return this.formatNum(null===(e=this._fee)||void 0===e?void 0:e.liquidateFee)}},{key:"getSlippageDecimals",value:function(e){var t=4;return this._valid.slippageDigits.isZero()||(t=this._valid.slippageDigits.toNumber()),(0,Re.H2)(e,t)}},{key:"getFeeDecimals",value:function(e){return(0,Re.H2)(e,8)}},{key:"getNumDecimals",value:function(e){var t=18;return this._args.tokenDigits.isZero()||(t=this._args.tokenDigits.toNumber()),(0,Re.H2)(e,t)}},{key:"getPriceDecimals",value:function(e){return(0,Re.H2)(e,30)}},{key:"formatPrice",value:function(e){return(0,Re.dN)(e,30)}},{key:"getTokenDigits",value:function(){return this._args.tokenDigits.toNumber()}},{key:"formatNum",value:function(e,t,n,i){return(0,Re.dN)(e,this._args.tokenDigits.toNumber(),t,n,i)}},{key:"formatFeeOrRate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return(0,Re.dN)(e,t)}},{key:"formatPercentage",value:function(e){return(0,Re.H2)(e,2)}},{key:"allowance",value:(p=H()(R()().mark((function e(t){var n;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollateralToken().allowance(t,this._address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"approve",value:(d=H()(R()().mark((function e(t,n,i){var r,a;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Be.a(this._library,this._chainId,this._args.collateralToken,void 0),e.next=3,r.allowance(t,this._address);case 3:if(!e.sent.lt(n)&&!i){e.next=9;break}return a=(0,Re._b)(1e3),e.next=8,r.approve(this._address,n.mul(a));case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return d.apply(this,arguments)})},{key:"increaseTrade",value:(u=H()(R()().mark((function e(t,n){var i;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.approve(t.account,t.payDelta);case 2:if(!e.sent){e.next=8;break}return e.next=6,this.send("increaseTrade",[t.isLimit,t.payDelta,t.sizeDelta,t.price,t.tpPrice,t.slPrice,t.slippage,t.isLong,!1],n);case 6:return i=e.sent,e.abrupt("return",i);case 8:return e.abrupt("return",Promise.resolve(""));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"decreaseTrade",value:(c=H()(R()().mark((function e(t){var n;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseTrade",[t.isLimit,t.sizeDelta,t.isKeepLev,t.price,t.slippage,t.isLong,!1]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"increaseCollateral",value:(o=H()(R()().mark((function e(t,n){var i;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("increaseCollateral",[t,n]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"decreaseCollateral",value:(s=H()(R()().mark((function e(t,n){var i;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseCollateral",[(0,Re._b)(t),n]);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"updateIncreaseOrder",value:(l=H()(R()().mark((function e(t,n,i,r,a){var l;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateIncreaseOrder",[t,n,i,r,a]);case 2:return l=e.sent,e.abrupt("return",l);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i,r){return l.apply(this,arguments)})},{key:"updateDecreaseOrder",value:(a=H()(R()().mark((function e(t,n,i){var r;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateDecreaseOrder",[t,n,i]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"cancelOrder",value:(r=H()(R()().mark((function e(t,n,i){var r;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrder",[t,n,i]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"cancelOrderList",value:(i=H()(R()().mark((function e(t,n,i){var r;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrderList",[t,n,i]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getCtokenDecimals",value:(n=H()(R()().mark((function e(){var t,n,i;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this._ctoken)||void 0===t||null===(n=t._contract)||void 0===n?void 0:n.decimals();case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"formatCToken",value:(t=H()(R()().mark((function e(t){var n;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCtokenDecimals();case 2:return n=e.sent,e.abrupt("return",(0,Re.dN)(t,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),v}(De.k),Ve=function(e){Se()(s,e);var t,n,i,r,a,l=Ie()(s);function s(e,t){return we()(this,s),l.call(this,e,t,Me.Mt)}return Oe()(s,[{key:"getClassName",value:function(){return"MarketReader"}},{key:"getMarket",value:(a=H()(R()().mark((function e(t){var n,i;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getMarket",t);case 2:return n=e.sent,i=new Ze(this._library,this._chainId,t,n.mktOuts,n.validOuts,n.feeOuts),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getFundingRate",value:(r=H()(R()().mark((function e(t,n){var i;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingRate",t,n);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"getFundingFee",value:(i=H()(R()().mark((function e(t,n,i){var r;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingFee",t,n,i);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getPositions",value:(n=H()(R()().mark((function e(t,n){var i;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getPositions",t,n);case 2:return null==(i=e.sent)||i.forEach((function(e){e.realisedPnl.mul(e.hasProfit?1:-1)})),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"availableLiquidity",value:(t=H()(R()().mark((function e(t,n,i){var r;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("availableLiquidity",n,t,i);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,i){return t.apply(this,arguments)})}]),s}(De.k),$e=function(){var e=H()(R()().mark((function e(t,n,i,r,a,l,s){var o,c,u;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new Ve(l,i),e.next=3,o.getMarket(r);case 3:return(c=e.sent).setChainId(i),c.setPendingTxns(n),u=p()(p()({},{accountAddress:"",isLimit:!1,isLong:!0,price:"0",amount:"0",size:"0",avlb:"0",pay:"0",leverage:"10",entryPrice:"0",liqPrice:"0",positionFee:"0",executionFee:"0",fundFeeRate:"0",availableLiquidity:"0",slippage:"0.3",openFeeRate:"0",closeFeeRate:"0",Positions:[],Orders:[],Trades:[]}),{},{accountAddress:s,reader:o,market:c,library:l,marketName:a}),e.next=9,qe(u,t);case 9:return u=e.sent,e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a,l,s){return e.apply(this,arguments)}}();function qe(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=H()(R()().mark((function e(t,n){var i,r;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.entryPrice=n,!t.market){e.next=10;break}try{t.openFeeRate=t.market.getOpenFeeRate(),t.closeFeeRate=t.market.getCloseFeeRate(),t.executionFee=t.market.getExecFee(),t.cleanFee=null==t||null===(i=t.market)||void 0===i?void 0:i.getCleanFee()}catch(e){console.log("getDefaultSwap",e)}if(!t.accountAddress){e.next=10;break}return e.next=6,t.market.getCollateralToken().balanceOf(t.accountAddress);case 6:return r=e.sent,e.next=9,t.market.formatCToken(r);case 9:t.avlb=e.sent;case 10:return console.log("_initMarketArgs",t),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ge={getEstimatedPNL:function(e){var t=e.isLong,n=e.entryPrice,i=e.price,r=e.size,a=t?1:-1;return(0,fe.O)(a).multipliedBy(i.minus(n)).multipliedBy(r).dividedBy(n)},getEntryPriceDisplay:function(e,t,n,i){var r=(0,fe.O)((null==i?void 0:i.averagePrice)||0),a=e;if(i){var l=t.plus(i.size||0);a=e.multipliedBy(l).dividedBy(l[n?"plus":"minus"]((0,fe.O)((null==i?void 0:i.PNL)||0)))}return{rise:a.minus(r).toNumber(),mergePositionPrice:a,existingPositionPrice:r}},getFeeRate:function(e,t){return(0,fe.O)(1).dividedBy(t).plus(e)},getExecFee:function(e){return(0,fe.O)(e)},getFundFee:function(e,t){return H()(R()().mark((function n(){var i,r,a;return R()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null==e||null===(i=e.reader)||void 0===i?void 0:i.getFundingFee(null==e?void 0:e.accountAddress,null==e||null===(r=e.market)||void 0===r?void 0:r._address,t);case 2:return a=n.sent,n.abrupt("return",e.market.formatNum(a));case 4:case"end":return n.stop()}}),n)})))()},getFundFeeRete:function(e,t){return H()(R()().mark((function n(){var i,r;return R()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.reader.getFundingRate(e.market._address,t);case 2:return i=n.sent,r=e.market.formatFeeOrRate(null==i?void 0:i[0]),n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},getFundFeeRateLimit:function(e,t){var n;if(!e)return"0";var i=(0,fe.O)("0.0000208333"),r=i;return(0,fe.O)(e).abs().minus(i).gt(0)&&(r=r.multipliedBy(t?1:-1)),null===(n=r)||void 0===n?void 0:n.toString()},getFundFeeRateDisplay:function(e,t){if(!e)return"-";var n=(0,fe.O)("0.0000208333"),i=(0,fe.O)(e),r=n.multipliedBy(100);return i.abs().minus(n).gt(0)&&(r=i.multipliedBy(100).multipliedBy(t?1:-1)),r.toFixed(4,1)},getConfirmStat:function(e){var t=e.pay,n=e.openFee,i=e.executionFee,r=e.size,a=e.leverageOption,l=e.existingPosition,s=e.hasExistingPosition,o=e.cleanFee;return{getCollateralDisplay:function(){var e=t.minus(n).minus(i),r=e;return s&&l&&(r=(0,fe.O)(l.initialCollateral).minus((0,fe.O)(l.fundingFee||0)).plus(t).minus(n).minus(i)),{rise:r.minus(e).toNumber(),mergePositionPrice:r,existingPositionPrice:(0,fe.O)(null==l?void 0:l.collateral)}},getLigPriceDisplay:function(e,t,n,i){var r=(0,fe.O)((null==l?void 0:l.liqPrice)||"0"),a=Ge.getNextLiqPrice({size:this.getNextSizeDisplay().mergePositionPrice,collateral:this.getCollateralDisplay().mergePositionPrice,isLong:n,fundingFee:(0,fe.O)((null==l?void 0:l.fundingFee)||0),positionFeeRate:i,entryPrice:e,maxLeverage:t,cleanFee:o},"Swap liq.Price");return{rise:a.minus(r).toNumber(),existingPositionPrice:r,mergePositionPrice:a}},getLeverageDisplay:function(){var e=(0,fe.O)(a);if(!s)return{rise:0,existingPositionPrice:e,mergePositionPrice:e};var t=this.getCollateralDisplay(),n=this.getNextSizeDisplay().mergePositionPrice.dividedBy(t.mergePositionPrice);return{rise:n.minus(e).toNumber(),existingPositionPrice:(0,fe.O)((null==l?void 0:l.leverage)||"0"),mergePositionPrice:n}},getNextSizeDisplay:function(){var e=(0,fe.O)(s&&(null==l?void 0:l.size)||0),t=r.plus(e),n=l?e:t;return{existingPositionPrice:n,mergePositionPrice:t,rise:t.minus(n).toNumber()}}}},getNextLiqPrice:function(e,t){var n=e.size,i=e.entryPrice,r=e.isLong,a=e.positionFeeRate,l=e.fundingFee,s=e.maxLeverage,o=e.collateral,c=e.amount,u=e.cleanFee;if(n.eq(0))return(0,fe.O)(0);null==s&&(s=(0,fe.O)(200)),null==c&&(c=(0,fe.O)(0));var d=n.dividedBy(s||30),p="".concat(n.toNumber(),"/").concat(s||30,"}");u.gt(d)&&(d=u,p="5");var m=n.multipliedBy(a||0),v="".concat(n.toNumber()," * ").concat(null==a?void 0:a.toNumber()),f=n.minus(o).plus(l).plus(m).plus(d),y="".concat(n.toNumber()," - ").concat(o.toNumber()," + ").concat(l.toNumber(),"+ ").concat(v," + ").concat(p);r||(f=n.plus(o).minus(l).minus(m).minus(d),y="".concat(n.toNumber()," + ").concat(o.toNumber()," - ").concat(l.toNumber()," - ").concat(v," - ").concat(p)),null!=c&&f[r?"minus":"plus"](c);var x=f.dividedBy(n).multipliedBy(i);return t&&console.log(t,"(".concat(y,")/").concat(n.toNumber(),"*").concat(i.toNumber())),x},getNextPay:function(e,t,n,i){return(0,fe.O)(e).multipliedBy(Ge.getFeeRate(n,i)).multipliedBy((0,fe.O)(t))},getNextAmount:function(e,t,n,i){return e.gt(0)?e.dividedBy(Ge.getFeeRate(n,i)).dividedBy(t):(0,fe.O)(0)},getSize:function(e,t,n){return e.gt(0)?(0,fe.O)(e).dividedBy(Ge.getFeeRate(t,n)):(0,fe.O)(0)},getOpenFee:function(e,t){return e.multipliedBy(t)}},We=n(74595),Ye=(0,ve.a)();var Je="trade____bxq4",Qe=n(49808),Ke=n(3410),Xe=Object.defineProperty,et=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,it=(e,t,n)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const rt=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))tt.call(t,n)&&it(e,n,t[n]);if(et)for(var n of et(t))nt.call(t,n)&&it(e,n,t[n]);return e})({width:80,height:80,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{opacity:.12,fillRule:"evenodd",clipRule:"evenodd",d:"M66.668 46.667c0-18.41-14.924-33.334-33.333-33.334v5c15.648 0 28.333 12.686 28.333 28.334h5Zm-8.324 0c0-13.808-11.193-25-25-25h-.01v5.166h.012c10.954 0 19.833 8.88 19.833 19.834h5.165Zm-7.332 17.677a24.926 24.926 0 0 0 7.144-14.677H52.94a19.78 19.78 0 0 1-5.583 11.023l3.654 3.654ZM15.656 28.99a24.927 24.927 0 0 1 14.678-7.144v5.213a19.78 19.78 0 0 0-11.025 5.584l-3.653-3.653Zm17.679 34.344C42.539 63.333 50 55.871 50 46.667 50.002 37.462 42.54 30 33.335 30c-9.205 0-16.667 7.462-16.667 16.667h5C21.668 40.223 26.891 35 33.335 35 39.778 35 45 40.223 45 46.667c0 6.443-5.223 11.666-11.666 11.666v5Z",fill:"url(#default_svg__a)"}),o.createElement("rect",{x:1,y:1,width:78,height:78,rx:39,stroke:"url(#default_svg__b)",strokeOpacity:.12,strokeWidth:2}),o.createElement("defs",null,o.createElement("linearGradient",{id:"default_svg__a",x1:15.656,y1:13.333,x2:78.101,y2:30.645,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"})),o.createElement("linearGradient",{id:"default_svg__b",x1:0,y1:0,x2:97.93,y2:27.149,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"}))));var at="default___EwMje",lt="icon___urVDk",st=function(e){var t=e.text;return(0,ue.jsx)("div",{className:at,children:(0,ue.jsxs)("div",{className:lt,children:[(0,ue.jsx)(rt,{}),(0,ue.jsx)("div",{children:t})]})})},ot=n(96714),ct="colorGrn___KLrrw",ut="colorRed___dWF0l",dt=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return+e>=0?(0,ue.jsx)("span",{className:V()(h()({},ct,n)),children:"".concat((0,ot.xP)(e,void 0,"+$"),"(").concat((0,ot.xP)(t,void 0,"+"),"%)")}):(0,ue.jsx)("span",{className:V()(h()({},ut,n)),children:"".concat((0,ot.xP)(Math.abs(+e).toString(),void 0,"-$"),"(").concat((0,ot.xP)(Math.abs(+t).toString(),void 0,"-"),"%)")})},pt="card___tsQVf",mt="table___aXY5t",vt="colorGrn___kLWyZ",ft="colorRed___i8TYm",yt="pagination___H7koN",xt="button___dRDb2",ht="containerH5___PZhTu",gt="orderListItem___HY67m",_t="pair___pZNcc",bt="pairLeft___iDcUx",jt="pos___M0sff",Pt="limit___uwUie",Nt="orderListItemContent___Nz2ZH",Lt="label___RLBGg",kt="text___k9r6s",wt="long___fQO97",Tt="short___X_7_i",Ot=function(e){var t=e.data;return(0,ue.jsx)("div",{className:ht,children:t.map((function(e){var t;return(0,ue.jsxs)("div",{className:gt,children:[(0,ue.jsxs)("div",{className:_t,children:[(0,ue.jsxs)("div",{className:bt,children:[(0,ue.jsx)("div",{children:e.market}),(0,ue.jsx)("div",{className:V()(jt,(t={},h()(t,wt,e.isLong),h()(t,Tt,!e.isLong),t)),children:e.isLong?"Long":"Short"})]}),(0,ue.jsx)("div",{className:Pt,children:(0,ue.jsx)(Ke._H,{id:"Limit"})})]}),[{renderTitle:function(){return(0,ue.jsx)(Ke._H,{id:"Size"})},value:(0,ot.xP)(e.size,void 0,"$")},{renderTitle:function(){return(0,ue.jsx)(Ke._H,{id:"Collateral"})},value:(0,ot.$d)(e.collateral,void 0,null!=e&&e.isIncrease?"+$":"-$")},{renderTitle:function(){return(0,ue.jsx)(Ke._H,{id:"Price"})},value:(0,ot.$d)(e.price,void 0,"$")},{renderTitle:function(){return"PNL"},value:+(null==e?void 0:e.PNL)>0?dt(null==e?void 0:e.PNL,(Math.floor(1e4*+(null==e?void 0:e.PNLRate))/100).toString()):"-"},{renderTitle:function(){return(0,ue.jsx)(Ke._H,{id:"Time"})},value:(0,ot.mr)(null==e?void 0:e.timestamp)||""},{renderTitle:function(){return(0,ue.jsx)(Ke._H,{id:"Status"})},value:e.status}].map((function(e,t){return(0,ue.jsxs)("div",{className:Nt,children:[(0,ue.jsx)("span",{className:Lt,children:e.renderTitle()}),(0,ue.jsx)("span",{className:kt,children:e.value})]})}))]})}))})},Ct=n(99126),St=function(e){var t=e.data,n=[{title:"Pair",width:150,key:"market",dataIndex:"market"},{title:"Side",render:function(e){var t;return(0,ue.jsx)("div",{className:V()((t={},h()(t,vt,"Long"===e.side||"Open Long"===e.side||"Close Short"===e.side),h()(t,ft,"Short"===e.side||"Open Short"===e.side||"Close Long"===e.side),t)),children:null==e?void 0:e.side})}},{title:"Type",dataIndex:"type",key:"type"},{title:"Size",dataIndex:"size",render:function(e){return(0,ot.$d)(e,void 0,"$")}},{title:"Collateral",render:function(e){return(0,ot.$d)(e.collateral,void 0,function(e){var t,n,i,r,a=e.type,l=e.side,s=null==l||null===(t=l.split(" "))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.toLowerCase();return null!=a&&null!==(i=a.toLowerCase())&&void 0!==i&&i.includes("deposit")?"+$":null!=a&&null!==(r=a.toLowerCase())&&void 0!==r&&r.includes("withdraw")?"-$":"open"===s?"+$":"close"===s?"-$":"$"}(e))}},{title:"Price",dataIndex:"price",render:function(e){return(0,ot.$d)(e,void 0,"$")}},{title:"PNL",render:function(e){return(0,ue.jsx)("span",{children:0!=+(null==e?void 0:e.PNL)?dt(null==e?void 0:e.PNL,(Math.floor(1e4*+(null==e?void 0:e.PNLRate))/100).toString()):"-"})}},{title:"Time",dataIndex:"timestamp",key:"timestamp",render:function(e){return(0,ot.mr)(e)||""}},{title:"Status",dataIndex:"status",key:"Status"}];return(0,ue.jsx)(Ct.ZP,{emptyText:"",className:mt,data:t,columns:n})};var Ft=(0,f.tq)()?Ot:St,It=function(e){var t=(0,c.sJ)(I),n=(0,o.useState)(1),i=l()(n,2),r=i[0],a=i[1],s=(0,o.useMemo)((function(){var e=50*r,n=e-50;return t.slice(n,e)}),[r,t]);return(0,ue.jsxs)("div",{className:pt,children:[(0,ue.jsx)(Ft,{data:s}),!(null!=s&&s.length)&&(0,ue.jsx)(st,{text:"No trades yet"}),(0,ue.jsxs)("div",{className:yt,children:[r>1&&(0,ue.jsx)("button",{className:xt,onClick:function(){a(r-1)},children:(0,ue.jsx)("div",{children:"Prev"})}),s&&s.length>=50&&(0,ue.jsx)("button",{className:xt,onClick:function(){a(r+1)},children:(0,ue.jsx)("div",{children:"Next"})})]})]})},Mt=n(28722),Dt=function(){var e=H()(R()().mark((function e(t,n,i){var r,a,l;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,Mt.x7)(i),a='query myQuery {\n    orders(orderDirection: desc, orderBy: timestamp,where: {account: "'.concat(null==t?void 0:t.toLowerCase(),'", marketName:"').concat(n,'", isDeleted: false}){\n          id\n          tp\n          sl\n          market\n          timestamp\n          collateral\n          triggerPrice\n          timestamp\n          isLong\n          isIncrease\n          orderId\n          size\n          triggerAbove\n        }\n      }\n      '),e.next=4,(0,Mt.Dw)(r,a);case 4:return l=e.sent,e.abrupt("return",(null==l?void 0:l.orders)||[]);case 6:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),Et=function(){var e=H()(R()().mark((function e(t){var n,i,r;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.accountAddress&&null!=t.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Dt(t.accountAddress,null==t?void 0:t.marketName,null==t||null===(n=t.market)||void 0===n?void 0:n._chainId);case 4:return i=e.sent,r=[],i.forEach((function(e){var n=At(e,t);r.push(n)})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function At(e,t){var n,i,r,a,l,s,o,c=null!=e&&e.isIncrease?"Limit":"Trigger",u=null!=e&&e.isIncrease?"Open":"Close",d=e.isIncrease;t.openFeeRate;return p()(p()({},e),{},{pair:null==t?void 0:t.marketName,orderID:e.orderId,type:c,side:null!=e&&e.isLong?u+" Long":u+" Short",collateral:null==t||null===(n=t.market)||void 0===n||null===(i=n.formatNum(e.collateral))||void 0===i?void 0:i.toString(),triggerPrice:null==t||null===(r=t.market)||void 0===r?void 0:r.formatPrice(e.triggerPrice),tp:d?null==t||null===(a=t.market)||void 0===a?void 0:a.formatPrice(e.tp):"0",sl:d?null==t||null===(l=t.market)||void 0===l?void 0:l.formatPrice(e.sl):"0",time:(0,ot.mr)(e.timestamp),isIncrease:null==e?void 0:e.isIncrease,isLong:null==e?void 0:e.isLong,size:null!==(s=null==t||null===(o=t.market)||void 0===o?void 0:o.formatNum(null==e?void 0:e.size))&&void 0!==s?s:"0"})}var zt=function(){var e=H()(R()().mark((function e(t){var n,i,r,a,l,s,o,c,u,d,m,v,f,y,x;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.accountAddress&&""!=t.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,t.reader.getPositions(t.accountAddress,t.market._address);case 4:r=e.sent,a=t.openFeeRate,l=t.executionFee,s=[],r=null===(n=r)||void 0===n||null===(i=n.filter((function(e){return+e.size>0})))||void 0===i?void 0:i.sort((function(e,t){var n,i;return+(null==t||null===(n=t.lastTime)||void 0===n?void 0:n.toString())-+(null==e||null===(i=e.lastTime)||void 0===i?void 0:i.toString())})),o=0;case 10:if(!(o<r.length)){e.next=22;break}return e.next=13,Ge.getFundFee(t,null===(c=r[o])||void 0===c?void 0:c.isLong);case 13:return f=e.sent,e.next=16,Ge.getFundFeeRete(t,null===(u=r)||void 0===u||null===(d=u[o])||void 0===d?void 0:d.isLong);case 16:y=e.sent,x=Ge.getFundFeeRateLimit(y,null===(m=r)||void 0===m||null===(v=m[o])||void 0===v?void 0:v.isLong),s.push(Rt(t,p()(p()({},r[o]),{},{fundingFee:f,fundFeeRate:x}),t.accountAddress,a,l));case 19:o++,e.next=10;break;case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Rt(e,t,n,i,r){var a=e.market,l=t.fundFeeRate;try{var s,o={account:n,isLong:t.isLong,size:a.formatNum(t.size),collateral:"0",averagePrice:a.formatPrice(t.averagePrice),fundingFee:(null==t?void 0:t.fundingFee)||"0",realisedPnl:a.formatNum(t.realisedPnl),hasProfit:t.hasProfit,lastTime:t.lastTime,pair:e.marketName,side:t.isLong?"Long":"Short",leverage:"",netValue:"0",PNL:"0",PNLRate:"0",liqPrice:"0",initialCollateral:a.formatNum(t.collateral),fundFeeDay:"0",openCloseFees:"0",PNLAfterFees:"0",orderIDs:null==t?void 0:t.orderIDs,feeRate:i,executionFee:r};o.collateral=(0,fe.O)(o.initialCollateral).minus(o.fundingFee).toString(),o.leverage="0"===o.collateral?"0":(0,fe.O)(o.size).dividedBy(o.collateral).toString();var c=null==e?void 0:e.openFeeRate,u=null==a||null===(s=a._valid)||void 0===s?void 0:s.maxLev,d=(0,fe.O)((null==u?void 0:u.toNumber())||100),p=(0,fe.O)(null==e?void 0:e.cleanFee);return o.liqPrice=Bt(o,i,d,(0,fe.O)(c),p),Ht(e,o,i,l),o}catch(e){console.log("convertRow",e)}return{}}function Bt(e,t,n,i,r,a){var l,s=e.fundingFee,o=e.isLong,c=e.collateral,u=e.size,d=(0,fe.O)(u).multipliedBy(t);return e.positionFee=d.toString(),null===(l=Ge.getNextLiqPrice({size:(0,fe.O)(u),collateral:(0,fe.O)(c),isLong:o,fundingFee:(0,fe.O)(s),positionFeeRate:i,entryPrice:(0,fe.O)(null==e?void 0:e.averagePrice),maxLeverage:n,cleanFee:r},a))||void 0===l?void 0:l.toString()}function Ht(e,t,n,i){var r=(0,fe.O)(t.initialCollateral),a=((0,fe.O)(t.collateral),(0,fe.O)(t.indexPrice)),l=(0,fe.O)(t.averagePrice),s=(0,fe.O)(t.size),o=(0,fe.O)(t.isLong?1:-1).multipliedBy(a.minus(l)).multipliedBy(s).dividedBy(l);t.PNL=o.toString(),function(e,t,n){var i,r,a,l,s=(0,fe.O)(e.size),o=(0,fe.O)(t),c=s.multipliedBy(o).multipliedBy(2);e.openCloseFee=null===(i=s.multipliedBy(o).multipliedBy(1))||void 0===i?void 0:i.toString(),e.fundFeeDay=s.multipliedBy(n).multipliedBy(24).toString(),e.PNLAfterFees=null===(r=(0,fe.O)(null==e?void 0:e.PNL).minus(c).minus((0,fe.O)(null==e?void 0:e.fundingFee)))||void 0===r?void 0:r.toString(),e.pnlAfterFeesRate=null===(a=(0,fe.O)(null==e?void 0:e.PNLAfterFees).div((0,fe.O)(null==e?void 0:e.initialCollateral)))||void 0===a||null===(l=a.multipliedBy(100))||void 0===l?void 0:l.toString()}(t,n,i);var c=r.plus(o).minus(null==t?void 0:t.fundingFee).minus(null==t?void 0:t.openCloseFee);return t.PNLRate=o.div(r).multipliedBy(100).toString(),t.netValue=c.toString(),o.toString()}var Zt=n(75291),Vt=n(83446),$t=n(90645),qt=function(){var e=H()(R()().mark((function e(){var t,n,i,r,a,l,s=arguments;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,n=s.length>1?s[1]:void 0,i=(0,Mt.x7)(n),r=null!=t?'account:"'+(null==t?void 0:t.toLowerCase())+'"':"",a="query MyQuery {\n      trades(orderDirection: desc, orderBy: timestamp,where: {".concat(r,"}) {\n        collateral\n        pnl\n        price\n        size\n        side\n        timestamp\n        type\n        status\n        market\n      }\n    }\n      "),e.next=7,(0,Mt.Dw)(i,a);case 7:return l=e.sent,e.abrupt("return",null!=l&&l.trades?(0,$t.Z)(null==l?void 0:l.trades,null==l?void 0:l.orders)||[]:(null==l?void 0:l.orders)||[]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ut=function(){var e=H()(R()().mark((function e(t){var n,i,r;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.accountAddress&&null!=t.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,qt(t.accountAddress,null==t||null===(n=t.market)||void 0===n?void 0:n._chainId);case 4:return i=e.sent,r=[],i.forEach((function(e){r.push(Gt(e,t))})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Gt(e,t){var n=t.market,i=p()(p()({},e),{},{type:(0,Zt.Z)(null==e?void 0:e.type),size:(0,Vt.Z)(null==e?void 0:e.size)?"0":n.formatNum(null==e?void 0:e.size),collateral:n.formatNum(null==e?void 0:e.collateral),price:(0,Vt.Z)(null==e?void 0:e.price)?"-":n.formatPrice(null==e?void 0:e.price),PNL:(0,Vt.Z)(null==e?void 0:e.pnl)?"0":n.formatNum(null==e?void 0:e.pnl)});return i.PNLRate=(0,Vt.Z)(null==e?void 0:e.pnl)?"-":i.pnl/i.collateral,i}var Wt=n(335),Yt="switch___V_gYU",Jt="rounded___Q_7Ny",Qt="switchEnabled___Ca9FC",Kt=function(e){var t=e.checked,n=e.className,i=e.onChange;return(0,ue.jsx)(Wt.r,{checked:t,className:V()(Yt,h()({},Qt,t),n),onChange:i,children:(0,ue.jsx)("div",{className:Jt})})},Xt=n(70794),en=n(69499),tn=n(26977),nn=Object.defineProperty,rn=Object.getOwnPropertySymbols,an=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,sn=(e,t,n)=>t in e?nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const on=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))an.call(t,n)&&sn(e,n,t[n]);if(rn)for(var n of rn(t))ln.call(t,n)&&sn(e,n,t[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m3 6 5 5 5-5",stroke:"#9597B5",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));var cn=Object.defineProperty,un=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,pn=Object.prototype.propertyIsEnumerable,mn=(e,t,n)=>t in e?cn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const vn=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))dn.call(t,n)&&mn(e,n,t[n]);if(un)for(var n of un(t))pn.call(t,n)&&mn(e,n,t[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.7-9V4.6H7.3V6h1.4Zm0 6V7.467H7.3V12h1.4Z",fill:"#797B96"}));var fn=n(9679),yn={advanced:"advanced___MBdTe",header:"header___ifyUh",collectIcon:"collectIcon___x8hbZ",collectedIcon:"collectedIcon___dhQWJ",item:"item___oTlSJ",input:"input___wbzXJ",flex:"flex___RaHI3",label:"label___E6FRI",questionIcon:"questionIcon___bN9mo",overlay:"overlay___eaqfY",dropdown:"dropdown___itkxP",var:"var___pOK0z",panel:"panel____HyG6",openPanel:"openPanel___unKQ2"},xn=function(e){var t=(0,o.useState)(!1),n=l()(t,2),i=n[0],r=n[1],a=e.ifSlippage,s=e.value,c=void 0===s?{}:s,u=e.stopLossPNL,d=e.onChange,m=e.ifStopLoss,v=e.ifTakeProfit,f=e.ifAll,y=e.tkpPNL,x=(0,o.useMemo)((function(){return"\n    When Index Price reaches ".concat(c.takeProfit||"--"," USD, it will trigger Take Profit, and the estimated PNL will be ").concat(y||"--"," USD.")}),[c.takeProfit,y]),g=(0,o.useMemo)((function(){return"When Index Price reaches ".concat(c.stopLoss||"--"," USD, it will trigger Stop Loss, and the estimated PNL will be ").concat(u||"--"," USD.")}),[c.stopLoss,u]);return(0,ue.jsxs)("div",{className:yn.advanced,children:[(0,ue.jsxs)("div",{className:yn.header,onClick:function(){r((function(e){return!e}))},children:[(0,ue.jsx)("div",{className:yn.title,children:"Advanced"}),(0,ue.jsx)(on,{className:V()(yn.collectIcon,h()({},yn.collectedIcon,i))})]}),(0,ue.jsxs)("div",{className:V()(yn.panel,h()({},yn.openPanel,i)),children:[(m||f)&&(0,ue.jsx)("div",{className:yn.item,children:(0,ue.jsx)(tn.ZP,{value:c.stopLoss,onChange:function(e){d(p()(p()({},c),{},{stopLoss:e}))},label:(0,ue.jsxs)("div",{className:yn.flex,children:[(0,ue.jsx)("div",{className:yn.label,children:"Stop Loss"}),(0,ue.jsx)(fn.Z,{placement:"top",overlay:(0,ue.jsx)("div",{className:yn.overlay,children:g}),children:(0,ue.jsx)(vn,{className:yn.questionIcon})})]}),children:(0,ue.jsx)("div",{className:yn.var,children:"USD"})})}),(v||f)&&(0,ue.jsx)("div",{className:yn.item,children:(0,ue.jsx)(tn.ZP,{value:c.takeProfit,onChange:function(e){d(p()(p()({},c),{},{takeProfit:e}))},label:(0,ue.jsxs)("div",{className:yn.flex,children:[(0,ue.jsx)("div",{className:yn.label,children:"Take Profit"}),(0,ue.jsx)(fn.Z,{placement:"top",overlay:(0,ue.jsx)("div",{className:yn.overlay,children:x}),children:(0,ue.jsx)(vn,{className:yn.questionIcon})})]}),children:(0,ue.jsx)("div",{className:yn.var,children:"USD"})})}),(a||f)&&(0,ue.jsx)("div",{className:yn.item,children:(0,ue.jsx)(tn.ZP,{value:c.slippage,decimals:2,onChange:function(e){d(p()(p()({},c),{},{slippage:e}))},label:(0,ue.jsxs)("div",{className:yn.flex,children:[(0,ue.jsx)("div",{className:yn.label,children:"Slippage"}),(0,ue.jsx)(fn.Z,{placement:"top",overlay:(0,ue.jsxs)("div",{className:yn.overlay,children:["Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are volatile."," "]}),children:(0,ue.jsx)(vn,{className:yn.questionIcon})})]}),children:(0,ue.jsx)("div",{className:yn.var,children:"%"})})})]})]})},hn=Object.defineProperty,gn=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,jn=(e,t,n)=>t in e?hn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Pn=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))_n.call(t,n)&&jn(e,n,t[n]);if(gn)for(var n of gn(t))bn.call(t,n)&&jn(e,n,t[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M7.652 12h2.319L13.5 8 9.97 4H7.653l2.795 3.234H2.5v1.532h7.947L7.652 12Z"}));var Nn="field___AEG_L",Ln="label___JBZb5",kn="value___dSa5M",wn="nextValue___o1dcE",Tn="oldValue___XDLug",On="arrowRed___HnTAV",Cn="arrowGrn___ttBc1",Sn=function(e,t,n,i,r){var a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=l.ntAppend,o=void 0===s?r:s,c=l.ntPrefix,u=void 0===c?i:c,d=function(e,t){var n;return n={},h()(n,Cn,+e<+t),h()(n,On,+e>+t),n},p=n&&+n!=+t;return(0,ue.jsx)(ue.Fragment,{children:(0,ue.jsxs)("div",{className:Nn,children:[(0,ue.jsx)("div",{className:Ln,children:e}),(0,ue.jsxs)("div",{className:kn,children:[(0,ue.jsx)("div",{className:V()((a={},h()(a,"".concat(kn," ").concat(Tn),p),h()(a,wn,!p),a)),children:!Number.isNaN(t)&&isFinite(+t)&&"".concat(i||"").concat((0,ot.xP)(t)).concat(r||"")||ot.PW}),p&&!Number.isNaN(n)&&isFinite(+n)&&(0,ue.jsxs)("div",{className:wn,children:[(0,ue.jsx)("span",{className:V()(d(t,n)),children:(0,ue.jsx)(Pn,{})}),null==l?void 0:l.defaultValue,!(null!=l&&l.defaultValue)&&"".concat(u||"").concat((0,ot.xP)(n,2,"","","")).concat(o||"")]})||""]})]})})},Fn={card:"card___fdBku",header:"header___mYjMg",title:"title___DaWZ7",right:"right___VLVON",switch:"switch___JvgPx",table:"table___fNLlk",pnl:"pnl___pZIIu",side:"side___qR1Jt",editCancel:"editCancel___JKw0Q",edit:"edit___DUhY3",submitBtn:"submitBtn___pc5K5",fields:"fields___FDpLc",field:"field___bbKYP",label:"label___CTyu8",value:"value___madrW",old:"old___XZbZw",new:"new___sFZEB",colorGrn:"colorGrn___FQhdW",colorRed:"colorRed___WPYKL",container:"container___FOa3G",orderListItem:"orderListItem___Gatca",pair:"pair___FE70j",pairLeft:"pairLeft___qFO3w",pos:"pos___d4i57",limit:"limit___fouyr",orderListItemContent:"orderListItemContent___vcvzS",text:"text___Kq6d1",btnsH5:"btnsH5___X2Ryv",btnH5:"btnH5___PjA4_",long:"long___ViDnD",short:"short___GTRN3"},In=function(e){return void 0===e||0==+e||(0,Vt.Z)(e)?"":(0,fe.O)(e||"").toFixed(2,1)},Mn=function(e){var t,n,i=e.isVisible,r=e.setIsVisible,a=e.row,u=e.tradeShowArgs,d=e.successCb,m=(0,o.useState)(In(null==a?void 0:a.triggerPrice)),v=l()(m,2),f=v[0],y=v[1],x=(0,s.Ge)(),h=x.active,g=x.account,_=(0,o.useState)(!1),b=l()(_,2),j=b[0],P=b[1],N=(0,o.useState)(In(null==a?void 0:a.sl)),L=l()(N,2),T=L[0],O=L[1],C=(0,o.useState)(In(null==a?void 0:a.tp)),S=l()(C,2),F=S[0],I=S[1],M=(0,c.sJ)(w),D=null==a?void 0:a.isLong,E=null==u||null===(t=u.market)||void 0===t||null===(n=t._valid)||void 0===n?void 0:n.maxLev,A=(0,fe.O)((null==E?void 0:E.toNumber())||100),z=(0,c.sJ)(k),R=(0,o.useMemo)((function(){if(M&&M.length>0){var e="".concat(D?"Long":"Short");return M.find((function(t){return t.pair===(null==a?void 0:a.pair)&&t.side===e}))}return null}),[M,D]),B=(0,o.useMemo)((function(){return Boolean(R&&R.size&&(0,fe.O)(R.size).gt(0))}),[R]),H=(0,o.useMemo)((function(){var e,t,n=f,i=(0,fe.O)(null==a?void 0:a.size),r=null==u?void 0:u.executionFee,l=(0,fe.O)(r||0),s=null==u?void 0:u.openFeeRate,o=(0,fe.O)(s||0),c=Ge.getOpenFee(i,o),d=(0,fe.O)(null!==(e=null==u?void 0:u.cleanFee)&&void 0!==e?e:"0"),m=Ge.getEntryPriceDisplay((0,fe.O)(null==a?void 0:a.triggerPrice),i,D,R),v=Ge.getEntryPriceDisplay((0,fe.O)(f),i,D,R),y=Ge.getConfirmStat({size:(0,fe.O)(null==a?void 0:a.size),leverageOption:0,executionFee:l,entryPrice:(0,fe.O)(null==a?void 0:a.triggerPrice),existingPosition:R,positionFeeRate:(0,fe.O)(s||0),hasExistingPosition:B,pay:(0,fe.O)(null==a?void 0:a.collateral),openFee:c,cleanFee:d}),x=Ge.getConfirmStat({size:(0,fe.O)(null==a?void 0:a.size),leverageOption:0,executionFee:l,entryPrice:v.mergePositionPrice,existingPosition:R,positionFeeRate:(0,fe.O)(s||0),hasExistingPosition:B,pay:(0,fe.O)(null==a?void 0:a.collateral),openFee:c,cleanFee:d}).getLigPriceDisplay(v.mergePositionPrice,A,D,o),h=y.getLigPriceDisplay(m.mergePositionPrice,A,D,o),g=x.mergePositionPrice.toString(),_=R?null==R?void 0:R.liqPrice:h.mergePositionPrice.toString(),b=(0,fe.O)(null==R?void 0:R.size).minus((0,fe.O)(null==a?void 0:a.size)),j=(0,fe.O)(null==R?void 0:R.collateral).minus((0,fe.O)(null==a?void 0:a.collateral)),P=null===(t=(0,fe.O)(null==R?void 0:R.feeRate))||void 0===t?void 0:t.toString(),N=(0,fe.O)(s),L=(0,fe.O)(d),k=Bt(p()(p()({},a),{},{fundingFee:"0",size:b.toString(),collateral:j.toString(),averagePrice:null==R?void 0:R.averagePrice}),P,A,N,L,"trigger");return{nextOrderPrice:n,nextLiqPrice:g,initLiqPrice:_,nextTriggerLiq:null==k?void 0:k.toString()}}),[f,null==R?void 0:R.PNL]),Z=H.nextOrderPrice,V=H.nextLiqPrice,$=H.initLiqPrice,q=H.nextTriggerLiq,U=(0,o.useMemo)((function(){return new Xt.Z(f).isEqualTo(new Xt.Z(null==a?void 0:a.triggerPrice))?$:V}),[f,A,z]),G=function(){var e=function(){if(!f)return"Enter A Price";if(null!=a&&a.isIncrease)if(null!=a&&a.isLong){if(+f>=+z)return"Price Above Current Price";if(""!=T){if(+T>=+f)return"Stop Loss Above Order Price";if(+T<=+U)return"Stop Loss Below Liq.Price"}if(""!=F&&+F<=+f)return"Take Profit Below Order Price"}else{if(+f<=+z)return"Price Below Current Price";if(""!=T){if(+T<=+f)return"Stop Loss Below Order Price";if(+T>=+U)return"Stop Loss Above Liq.Price"}if(""!=F&&+F>=+f)return"Take Profit Above Order Price"}else if(null!=a&&a.isLong&&B){if(+f>=+U)return"Price Above Liq.Price";if(+f<=+U)return"Price Below Liq.Price"}return j?"Updating Order":""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:"Update Order",btnValid:!0}},W=(0,o.useMemo)((function(){return G()}),[f,j,D,null==a?void 0:a.isIncrease,T,F,$,U,B,z]),Y=W.btnTxt,J=W.btnValid,Q=(0,o.useMemo)((function(){return[F?Ge.getEstimatedPNL({isLong:D,entryPrice:(0,fe.O)(f),price:(0,fe.O)(F),size:(0,fe.O)(null==a?void 0:a.size)}).toFixed(2,1):"",T?Ge.getEstimatedPNL({isLong:D,entryPrice:(0,fe.O)(f),price:(0,fe.O)(T),size:(0,fe.O)(null==a?void 0:a.size)}).toFixed(2,1):""]}),[F,T,D,f]),K=l()(Q,2),X=K[0],ee=K[1];return(0,ue.jsx)("div",{className:Fn.modal,children:(0,ue.jsxs)(en.Z,{title:"Edit ".concat(null==a?void 0:a.type," Order"),onClose:function(){return r(!1)},visible:i,width:512,children:[(0,ue.jsx)(tn.tV,{value:f,onChange:y,decimals:2}),(null==a?void 0:a.isIncrease)&&(0,ue.jsx)(xn,{value:{stopLoss:T,takeProfit:F},ifStopLoss:!0,ifTakeProfit:!0,onChange:function(e){O((null==e?void 0:e.stopLoss)||""),I((null==e?void 0:e.takeProfit)||"")},tkpPNL:X,stopLossPNL:ee}),(0,ue.jsxs)("div",{className:Fn.fields,children:[Sn("Order Price",null==a?void 0:a.triggerPrice,f,null!=a&&a.triggerAbove?">$":"<$","",{ntPrefix:+Z<+z?"<$":">$"}),Sn("Index Price",z,"","$"),B?null!=a&&a.isIncrease?Sn("Liq Price",$,V,"$"):Sn("Liq Price",q,"","$"):null!=a&&a.isIncrease?Sn("Liq Price",V,"","$"):Sn("Liq Price","-","-","$")]}),(0,ue.jsx)("button",{className:Fn.submitBtn,disabled:j||!J,onClick:function(){h&&g&&(P(!0),function(e,t,n,i,r,a,l){var s=e.market;return i?e.market.updateIncreaseOrder(+t,s.getPriceDecimals(n),s.getPriceDecimals(a||0),s.getPriceDecimals(l||0),r):e.market.updateDecreaseOrder(+t,s.getPriceDecimals(n),r)}(u,null==a?void 0:a.orderID,f,null==a?void 0:a.isIncrease,a.isLong,F,T).then((function(e){d(),r(!1)})).catch((function(e){return console.log("confirm",e)})).finally((function(){P(!1)})))},children:Y})]})})},Dn=(0,f.tq)()?function(e){var t=e.orders,n=e.handleEdit,i=e.handleCancel;return(0,ue.jsx)("div",{className:Fn.container,children:t.map((function(e){var t,r;return(0,ue.jsxs)("div",{className:Fn.orderListItem,children:[(0,ue.jsxs)("div",{className:Fn.pair,children:[(0,ue.jsxs)("div",{className:Fn.pairLeft,children:[(0,ue.jsxs)("div",{children:[" ",e.pair," "]}),(0,ue.jsx)("div",{className:V()(Fn.pos,(t={},h()(t,Fn.long,e.isLong),h()(t,Fn.short,!e.isLong),t)),children:e.isLong?"Long":"Short"})]}),(0,ue.jsx)("div",{className:Fn.limit,children:(0,ue.jsx)(Ke._H,{id:"Limit"})})]}),[{title:function(){return(0,ue.jsx)(Ke._H,{id:"Size"})},value:(0,ot.xP)(e.size,void 0,"$")},{title:function(){return(0,ue.jsx)(Ke._H,{id:"Collateral"})},value:+e.isIncrease?(0,ot.$d)(e.collateral,void 0,"+$"):(0,ot.$d)(null===(r=Math.abs(+e.collateral))||void 0===r?void 0:r.toString(),void 0,"-$")},{title:function(){return(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(Ke._H,{id:"Order"})," ",(0,ue.jsx)(Ke._H,{id:"Price"})]})},value:(0,ot.$d)(null==e?void 0:e.triggerPrice,void 0,null!=e&&e.triggerAbove?">$":"<$")},{title:function(){return(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(Ke._H,{id:"Index"})," ",(0,ue.jsx)(Ke._H,{id:"Price"})]})},value:(0,ot.xP)(e.indexPrice,void 0,"$")},{title:function(){return"TP/SL"},value:(+(null==e?void 0:e.tp)>0&&(0,ot.$d)(null==e?void 0:e.tp,void 0,"$")||"-")+"/"+(+(null==e?void 0:e.sl)>0&&(0,ot.$d)(null==e?void 0:e.sl,void 0,"$")||"-")},{title:function(){return(0,ue.jsx)(Ke._H,{id:"Time"})},dataIndex:"time",value:e.time}].map((function(e,t){return(0,ue.jsxs)("div",{className:Fn.orderListItemContent,children:[(0,ue.jsx)("span",{className:Fn.label,children:e.title()}),(0,ue.jsx)("span",{className:Fn.text,children:e.value})]})})),(0,ue.jsxs)("div",{className:Fn.btnsH5,children:[(0,ue.jsx)("div",{className:Fn.btnH5,onClick:function(){return n(e)},children:(0,ue.jsx)(Ke._H,{id:"Edit"})}),(0,ue.jsx)("div",{className:Fn.btnH5,onClick:function(){return i(e)},children:(0,ue.jsx)(Ke._H,{id:"Cancel"})})]})]})}))})}:function(e){var t=e.orders,n=e.handleCancel,i=e.handleEdit,r=e.handleCancelAll,a=[{title:"Pair",dataIndex:"pair",width:150,render:function(e){return e||"-"}},{title:"Side",width:250,key:"side",render:function(e){var t;return(0,ue.jsx)("div",{className:V()((t={},h()(t,Fn.colorGrn,(null==e?void 0:e.isLong)==(null==e?void 0:e.isIncrease)),h()(t,Fn.colorRed,(null==e?void 0:e.isLong)!==(null==e?void 0:e.isIncrease)),t)),children:null==e?void 0:e.side})}},{title:"Type",dataIndex:"type",key:"type"},{title:"Size",dataIndex:"size",key:"size",render:function(e){return(0,ot.$d)(e,void 0,"$")}},{title:"Collateral",key:"collateral",render:function(e){var t;return+e.isIncrease?(0,ot.$d)(e.collateral,void 0,"+$"):(0,ot.$d)(null===(t=Math.abs(+e.collateral))||void 0===t?void 0:t.toString(),void 0,"-$")}},{title:"Order Price",width:120,render:function(e){return(0,ot.$d)(null==e?void 0:e.triggerPrice,void 0,null!=e&&e.triggerAbove?">$":"<$")}},{title:"Index Price",width:120,render:function(e){return(0,ot.xP)(e.indexPrice,void 0,"$")}},{title:"TP/SL",render:function(e){return(+(null==e?void 0:e.tp)>0&&(0,ot.$d)(null==e?void 0:e.tp,void 0,"$")||"-")+"/"+(+(null==e?void 0:e.sl)>0&&(0,ot.$d)(null==e?void 0:e.sl,void 0,"$")||"-")}},{title:"Time",dataIndex:"time",key:"time"},{width:120,title:null!=t&&t.length?(0,ue.jsx)("span",{onClick:r,children:"Cancel All"}):(0,ue.jsx)(ue.Fragment,{}),render:function(e){return(0,ue.jsxs)("div",{className:Fn.editCancel,children:[(0,ue.jsx)("div",{className:Fn.edit,onClick:function(){return i(e)},children:"Edit"}),(0,ue.jsx)("div",{className:Fn.edit,onClick:function(){return n(e)},children:"Cancel"})]})}}];return(0,ue.jsx)(Ct.ZP,{emptyText:"",className:Fn.table,data:t,columns:a})},En=function(e){var t=e.tradeShowArgs,n=e.successCb,i=(0,c.sJ)(F),r=(0,o.useState)(!1),a=l()(r,2),s=a[0],u=a[1],d=(0,o.useState)({}),p=l()(d,2),m=p[0],v=p[1];return(0,ue.jsxs)(ue.Fragment,{children:[s&&(0,ue.jsx)(Mn,{isVisible:s,setIsVisible:u,tradeShowArgs:t,row:m,successCb:n}),(0,ue.jsxs)("div",{className:Fn.card,children:[(0,ue.jsx)(Dn,{orders:i,handleCancel:function(e){var i,r,a,l;(i=t,r=e.isIncrease,a=null==e?void 0:e.orderID,l=null==e?void 0:e.isLong,i.market.cancelOrder(r,Number(a),l)).then((function(e){n(),u(!1)})).catch((function(e){return console.log("handleCancel err",e)})).finally((function(){}))},handleEdit:function(e){v(e),u(!0)},handleCancelAll:function(){var e,i,r,a,l;(e=t,r=[],a=[],l=[],null===(i=e.Orders)||void 0===i||i.forEach((function(e){r.push(e.isIncrease),a.push(Number(e.orderID)),l.push(e.isLong)})),e.market.cancelOrderList(r,a,l)).then((function(e){n()})).catch((function(e){return console.log("cancel All",e)}))}}),!(null!=i&&i.length)&&(0,ue.jsx)(st,{text:"No open orders"})]})]})},An="orderPanel___weQ4q",zn="tabList___iDvkP",Rn="tabItem___UJec7",Bn="selected___lGODG",Hn="header___Y18Vk",Zn="right___ExK0Y",Vn="switch___yJrUb",$n="moreIcon___LxjYg",qn="overlay___LURQM",Un="collateral___I5qZP",Gn="collateralTxt___sEChq",Wn="underline___SHqOx",Yn="col___hLUTs",Jn="menu___enVPl",Qn="card___XRXfM",Kn=function(){var e=H()(R()().mark((function e(t,n){var i,r,a;return R()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={isLimit:n.isLimit,sizeDelta:(0,Re._b)(0),price:(0,Re._b)(0),slippage:(0,Re._b)(0),isLong:n.isLong,isExec:!1,account:t.accountAddress,isKeepLev:n.keepLeverage},r=t.market,i.sizeDelta=r.getNumDecimals(n.sizeDelta),i.price=r.getPriceDecimals(n.price),i.slippage=r.getSlippageDecimals(r.formatPercentage(t.slippage)),e.next=7,r.decreaseTrade(i);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Xn={table:"table___O1XQH",header:"header___cnc5K",submitBtn:"submitBtn___GOq9M",orderPanel:"orderPanel___UpOZv",tabList:"tabList___Ynh2Z",tabItem:"tabItem___mxzqS",selected:"selected___hpXfr",fields:"fields___jqoiL",field:"field___gznn3",dField:"dField___smjTW",title:"title___cDyBA",label:"label___d6Gje",value:"value___VUuPy",modal:"modal___yrezj","ant-modal-content":"ant-modal-content___YHsA0",tabs:"tabs___bazyO",cut:"cut___xmhqm",receive:"receive___P7iU3"},ei=function(){return(0,ue.jsx)("div",{className:Xn.cut})},ti=function(e){var t,n=e.isVisible,i=e.setIsVisible,r=e.row,a=void 0===r?{}:r,c=e.tradeShowArgs,u=e.successCb,d=e.indexPrice,m=a.size,v=void 0===m?"2000.999999":m,f=a.initialCollateral,y=void 0===f?"200,000000000001":f,x=a.leverage,g=void 0===x?"10.000001":x,_=a.fundingFee,b=void 0===_?"20":_,j=a.liqPrice,P=void 0===j?"0.00000001":j,N=(0,o.useState)(0),L=l()(N,2),k=L[0],w=L[1],T=(0,o.useState)(""),O=l()(T,2),C=O[0],S=O[1],F=(0,o.useState)(d),I=l()(F,2),M=I[0],D=I[1],E=(0,o.useState)(!0),A=l()(E,2),z=A[0],R=A[1],B=(0,s.Ge)(),H=B.active,Z=B.account,$=(0,o.useState)(!1),q=l()($,2),U=q[0],G=q[1],W=(0,o.useState)("0.3"),Y=l()(W,2),J=Y[0],Q=Y[1],K=null!==(t=+(null==c?void 0:c.cleanFee))&&void 0!==t?t:"5.0",X=function(){var e=function(){if(!M&&k)return"Enter A Price";if(!+C)return"Enter an amount";if(+C!=+(null==a?void 0:a.size)){if(k){if(null!=a&&a.isLong&&+M<+P)return"Price Below Liq. Price";if((null==a||!a.isLong)&&+M>+P)return"Price Above Liq. Price"}if(+C>+v)return"Max close amount exceeded";if(+re<2)return" Min Leverage: 2.00x";if(+re>100)return"Max Leverage: 100.00x";if(+ie<K)return"Leftover Collateral Size below ".concat(K," USD");if(+pe<K)return"Leftover Net Value Size below ".concat(K," USD")}return U?k?"Creating Order":"Closing":""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:k?"Create Order":"Close",btnValid:!0}},ee=(0,ot.xP)(null==a?void 0:a.size),te=(0,o.useMemo)((function(){var e=0!==k,t=function(e,t,n,i,r,a,l){var s,o,c,u=t.initialCollateral,d=void 0===u?"200":u,m=t.executionFee,v=void 0===m?"0.09":m,f=t.fundingFee,y=void 0===f?"10":f,x=t.feeRate,h=t.size,g=void 0===h?"2000":h,_=new Xt.O(d),b=new Xt.O(i||0),j=new Xt.O(g),P=j.minus(b).isGreaterThan(0)?j.minus(b):new Xt.O(0),N=j.minus(b).isGreaterThan(0),L=0===j.minus(i).toNumber(),k=null==b?void 0:b.gt(0),w=new Xt.O(x),T=a?new Xt.O(v):0,O=new Xt.O(y),C=b.dividedBy(j),S=null==e?void 0:e.fundFeeRate,F=+i>0?b.multipliedBy(w):j.multipliedBy(w),I=O.plus(T).plus(F),M=new Xt.O(+Ht(0,p()(p()({},t),{},{indexPrice:n,size:b.toString()}),null==e?void 0:e.openFeeRate,S)),D=k?L?_.plus(M).minus(I):r?_.multipliedBy(C).plus(M).minus(I):M.minus(I):new Xt.O(0),E=L?new Xt.O(0):r?N?new Xt.O(1).minus(C).multipliedBy(_):new Xt.O(0):_;D.lte(0)&&(E=E.plus(D));var A=M.toString(),z=P.toString(),R=N?P.dividedBy(E).toString():"0.01",B=(0,fe.O)((null==e||null===(s=e.market)||void 0===s||null===(o=s._valid)||void 0===o||null===(c=o.maxLev)||void 0===c?void 0:c.toNumber())||100),H=(0,fe.O)(null==e?void 0:e.openFeeRate),Z=(0,fe.O)(null==e?void 0:e.cleanFee),V=Bt(p()(p()({},t),{},{fundingFee:"0",size:P.toString(),collateral:E.toString()}),null==t?void 0:t.feeRate,B,H,Z),$=new Xt.O(+Ht(0,p()(p()({},t),{},{indexPrice:n,size:null==j?void 0:j.toString()}),null==e?void 0:e.openFeeRate,S)),q=P.multipliedBy(w),U=E.plus($).minus(q).toString(),G=M.dividedBy(_).multipliedBy(100);return{nextSize:z,nextLeverage:R,nextLiqPrice:null==V?void 0:V.toString(),nextCollateral:E.toString(),receive:D.toString(),nextPNL:A,nextPNLRate:G.toString(),fees:I.toString(),positionFee:F.toString(),nextNetValue:U.toString(),ifAll:L}}(c,a,d,C,z,e);return p()({isLimit:e},t)}),[C,k,z,M,d,v]),ne=te.nextSize,ie=te.nextCollateral,re=te.nextLeverage,ae=te.nextLiqPrice,le=te.isLimit,se=te.receive,oe=te.nextPNL,ce=te.fees,de=te.positionFee,pe=te.nextNetValue,me=te.nextPNLRate,ve=te.ifAll,ye=(0,o.useMemo)((function(){return+C>+(null==a?void 0:a.size)?{btnTxt:"Max close amount exceeded",btnValid:!1}:X()}),[v,M,C,U,z,pe,ie,re,k]),xe=ye.btnTxt,he=ye.btnValid;return(0,ue.jsx)("div",{className:Xn.modal,children:(0,ue.jsxs)(en.Z,{title:"Close ".concat(null!=a&&a.isLong?"Long":"Short"," ETH"),onClose:function(){return i(!1)},visible:n,width:512,children:[(0,ue.jsx)("div",{className:Xn.tabs,children:(0,ue.jsx)(Qe.O.Group,{defaultIndex:k,onChange:function(e){S(""),D(""),w(e)},children:(0,ue.jsx)("div",{className:Xn.header,children:(0,ue.jsxs)(Qe.O.List,{className:Xn.tabList,children:[(0,ue.jsx)(Qe.O,{className:function(e){var t=e.selected;return V()(Xn.tabItem,h()({},Xn.selected,t))},children:"Market"}),(0,ue.jsx)(Qe.O,{className:function(e){var t=e.selected;return V()(Xn.tabItem,h()({},Xn.selected,t))},children:"Trigger"})]})})})}),(0,ue.jsx)(tn.tV,{value:le?M:d,disabled:!le,onChange:D,decimals:2}),(0,ue.jsxs)("div",{className:Xn.dField,children:[(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsxs)("div",{className:Xn.label,children:["Index Price:",(0,ue.jsx)("span",{children:""})]}),(0,ue.jsx)("div",{className:Xn.value,children:d})]}),(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsxs)("div",{className:Xn.label,children:["Available:",(0,ue.jsx)("span",{children:""})]}),(0,ue.jsxs)("div",{className:Xn.value,children:["$",ee]})]})]}),(0,ue.jsx)(tn.gp,{label:"Close",onClickMaxBtn:function(){S(null==a?void 0:a.size)},value:C,onChange:function(e){S(e)}}),!le&&(0,ue.jsx)(xn,{value:{slippage:J},ifSlippage:!0,onChange:function(e){Q((null==e?void 0:e.slippage)||"")}}),(0,ue.jsxs)("div",{className:Xn.fields,children:[Sn("Position Size",v,ne,"$"),Sn("Collateral",y,0==+C?y:ie,"$"),Sn("Leverage",g,0==+C?g:re,"","x",{defaultValue:"0.01"===re?"-":""}),(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsx)("div",{className:Xn.label,children:"PNL"}),(0,ue.jsx)("div",{className:Xn.value,children:+C>0?dt(oe,me):dt(null==a?void 0:a.PNL,null==a?void 0:a.PNLRate)})]}),(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsxs)("div",{className:Xn.label,children:["Fees",(0,ue.jsx)(fn.Z,{placement:"bottom",overlay:(0,ue.jsxs)("div",{className:Xn.overlay,children:["Fees",(0,ue.jsx)("br",{}),"Fund Fee: ".concat((0,ot.xP)(b,2,"$")),(0,ue.jsx)("br",{}),"Close Fee: ".concat((0,ot.xP)(de,2,"$")),(0,ue.jsx)("br",{}),"Execution Fee: ".concat((0,ot.xP)(le?null==a?void 0:a.executionFee:"0",2,"$"))]}),children:(0,ue.jsx)(vn,{className:Xn.questionIcon})})]}),(0,ue.jsx)("div",{className:Xn.value,children:(0,ot.xP)(ce,2,"$")})]}),(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsx)("div",{className:Xn.label,children:"Keep Leverage"}),(0,ue.jsx)("div",{className:Xn.value,children:(0,ue.jsx)(Kt,{checked:z,onChange:R})})]}),(0,ue.jsx)(ei,{}),(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsx)("div",{className:Xn.label,children:"Entry Price"}),(0,ue.jsx)("div",{className:Xn.value,children:(0,ot.xP)(null==a?void 0:a.averagePrice,2,"$")})]}),ve?Sn("Liq. Price","0",void 0,"$"):Sn("Liq. Price",P,isFinite(+ae)?+C>0?ae:P:"0.000001","$")]}),(0,ue.jsx)(ei,{}),(0,ue.jsxs)("div",{className:Xn.fields,children:[Sn("Spread","0",void 0,"","%"),Sn("Slippage",J||"0.3","","","%"),(0,ue.jsx)("div",{className:Xn.receive,children:Sn("Receive",+se>0?se:"0",void 0,void 0," USDC")})]}),(0,ue.jsx)("button",{className:Xn.submitBtn,disabled:U||!he,onClick:function(){H&&Z&&(G(!0),Kn(c,{keepLeverage:z,slippage:J,sizeDelta:C,price:M,isLong:null==a?void 0:a.isLong,isLimit:le,nextSize:ne,nextPNL:oe}).then((function(e){i(!1),u()})).catch((function(e){return console.log("confirm",e)})).finally((function(){G(!1)})))},children:xe})]})})},ni=1e5,ii=function(e){var t=e.isVisible,n=e.setIsVisible,i=e.row,r=void 0===i?{}:i,a=e.market,c=e.tradeShowArgs,u=e.successCb,d=e.indexPrice,m=r.collateral,v=void 0===m?"200":m,f=r.leverage,y=void 0===f?"10":f,x=r.fundingFee,g=void 0===x?"20":x,_=r.liqPrice,b=void 0===_?"0.001":_,j=r.isLong,P=(0,o.useState)(0),N=l()(P,2),L=N[0],k=N[1],w=(0,o.useState)(""),T=l()(w,2),O=T[0],C=T[1],S=(0,s.Ge)(),F=S.active,I=S.account,M=(0,o.useState)(!1),D=l()(M,2),E=D[0],A=D[1],z="Deposit",R=(0,o.useMemo)((function(){return 0===L}),[L]),B=(0,o.useMemo)((function(){return function(e,t,n,i,r,a){e.collateral;var l,s,o,c=e.size,u=e.fundingFee,d=e.initialCollateral,m=new Xt.O(u),v=new Xt.O(n),f=n?function(e){var n,i,r,a=t?"plus":"minus";return null===(n=new Xt.O(d))||void 0===n||null===(i=n[a])||void 0===i||null===(r=i.call(n,new Xt.O(e)).minus(m))||void 0===r?void 0:r.toString()}(n):null==e?void 0:e.collateral,y=n?new Xt.O(null==e?void 0:e.size).dividedBy(new Xt.O(f)).toString():null==e?void 0:e.leverage,x=n?"0":u,h=new Xt.O(c),g=(0,fe.O)(null==a||null===(l=a.market)||void 0===l||null===(s=l._valid)||void 0===s?void 0:s.maxLev.toNumber()),_=(0,fe.O)(null==a?void 0:a.cleanFee),b=(0,fe.O)(null==a?void 0:a.openFeeRate),j=n&&Bt(p()(p()({},e),{},{collateral:null===(o=new Xt.O(f).plus(m))||void 0===o?void 0:o.toString()}),null==e?void 0:e.feeRate,g,b,_)||"",P=new Xt.O(d).minus(u).minus(h.dividedBy(100).isLessThan(10)?10:h.dividedBy(100));return{nextCollateral:f,nextLeverage:y,nextFund:x,nextLiqPrice:j,nextAvlb:t?i:P.isGreaterThan(0)?P.toString():"0",delta:(t?v:m.gte(0)?v.plus(m):v).toString()}}(r,R,O,null==c?void 0:c.avlb,0,c)}),[O,L,d,R]),H=B.nextCollateral,Z=B.nextLeverage,$=B.nextLiqPrice,q=B.nextAvlb,U=B.delta,G=function(){var e=function(){if(!+O)return"Enter an amount";if(!R){if(j&&+$>+d)return"Invalid Liq.Price";if(!j&&+$<+d)return"Invalid Liq.Price"}return!L&&+O>+q?"Insufficient USDC Balance":L&&+H<10?"Min residual collateral: 10 USD":+Z<2?" Min Leverage: 2.00x":+Z>100?"Max Leverage: 100.00x":E?L?"Withdrawing":"Depositing":""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:L?"Withdraw":"Deposit",btnValid:!0}},W=(0,o.useMemo)((function(){return G()}),[L,O,E,R,j,d,$,q,H,Z]),Y=W.btnTxt,J=W.btnValid;return(0,ue.jsx)("div",{className:Xn.modal,children:(0,ue.jsxs)(en.Z,{title:"Edit Collateral",onClose:function(){return n(!1)},visible:t,width:512,children:[(0,ue.jsx)("div",{className:Xn.tabs,children:(0,ue.jsx)(Qe.O.Group,{defaultIndex:L,onChange:function(e){C(""),k(e)},children:(0,ue.jsx)("div",{className:Xn.header,children:(0,ue.jsxs)(Qe.O.List,{className:Xn.tabList,children:[(0,ue.jsx)(Qe.O,{className:function(e){var t=e.selected;return V()(Xn.tabItem,h()({},Xn.selected,t))},children:z}),(0,ue.jsx)(Qe.O,{className:function(e){var t=e.selected;return V()(Xn.tabItem,h()({},Xn.selected,t))},children:"Withdraw"})]})})})}),(0,ue.jsx)(tn.gp,{onClickMaxBtn:function(){C(q)},value:O,onChange:function(e){C(e)},label:R?"Pay":"Receive"}),(0,ue.jsxs)("div",{className:Xn.fields,children:[(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsxs)("div",{className:Xn.label,children:[(R?z:"Withdraw")+": ",(0,ue.jsx)("span",{children:""})]}),(0,ue.jsx)("div",{className:Xn.value,children:(0,ot.xP)(""===O?"0":O,void 0,"$")})]}),(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsxs)("div",{className:Xn.label,children:[R?"Balance: ":"Available: ",(0,ue.jsx)("span",{children:""})]}),(0,ue.jsx)("div",{className:Xn.value,children:(0,ot.xP)(q,R?4:2,void 0,R?" USDC":"$")})]})]}),Sn("Collateral",v,H,"$"),Sn("Leverage",y,Z,"","X"),(0,ue.jsxs)("div",{className:Xn.field,children:[(0,ue.jsx)("div",{className:Xn.label,children:"Index Price"}),(0,ue.jsx)("div",{className:Xn.value,children:(0,ot.xP)(d,void 0,"$")||"-"})]}),Sn("Liq. Price",b,$,"$"),Sn("Fund Fee",g,+O>0?"0.00000001":"","$")]}),(0,ue.jsx)("button",{className:Xn.submitBtn,disabled:E||!J,onClick:function(){F&&I&&(A(!0),function(e,t,n,i){if(n){var r=n.getNumDecimals(t);return i?n.increaseCollateral(r,e):(console.log("---decreaseCollateral----amount-isLong-isDeposit-bigAmount",t,e,i,r.toString()),n.decreaseCollateral(r,e))}return Promise.resolve("confirmEditCollateral failed")}(null==r?void 0:r.isLong,U,a,R).then((function(e){console.log("collateral succussed",e),u(),n(!1)})).catch((function(e){return console.log("confirm",e)})).finally((function(){A(!1)})))},children:Y})]})})},ri="table___XB6MA",ai="position___Dwf6N",li="postionHlgt___apngF",si="pos___wBIvY",oi="long___fCOYz",ci="short___miFCO",ui="options___MVyBD",di="closeBtn___cuv0U",pi="positionList___o82d0",mi="containerH5___XiJLb",vi="positionLeft___JDFdk",fi="field___eLfxe",yi="label___lrAei",xi="text___y9DiE",hi="pnlText___RcCTf",gi="btnsH5___PgCSD",_i="btnH5___mI2KK",bi=function(e,t,n){e!==t&&n(e)},ji=n(96963),Pi=n(21922),Ni=n(8193),Li=function(e){var t=e.row,n=e.handleEditCollateral;return(0,ue.jsx)("div",{children:(0,ue.jsxs)("div",{className:Un,children:[(0,ue.jsx)(ji.Z,{placement:"bottom",overlay:(0,ue.jsxs)("div",{className:qn,children:["Collateral",(0,ue.jsx)("br",{}),"Collateral:  Initial Collateral - Fund Fee",(0,ue.jsx)("br",{}),"Initial Collateral: ".concat(+(null==t?void 0:t.initialCollateral)<0?(0,ot.xP)(Math.abs(+(null==t?void 0:t.initialCollateral)).toString(),void 0,"-$"):(0,ot.xP)(Math.abs(+(null==t?void 0:t.initialCollateral)).toString(),void 0,"+$")),(0,ue.jsx)("br",{}),"Fund Fee: ".concat((0,ot.xP)(null==t?void 0:t.fundingFee,void 0,"$")),(0,ue.jsx)("br",{}),"Fund Fee / Day: ".concat((0,ot.xP)(null==t?void 0:t.fundFeeDay,void 0,"$")),(0,ue.jsx)("br",{}),"Use the Edit Collateral icon to deposit or withdraw collateral."]}),children:(0,ue.jsx)(Pi.Z.Text,{className:Gn,children:(0,ot.xP)(t.collateral,void 0,"$")})}),(0,ue.jsx)(Ni.$iz,{style:{cursor:"pointer"},size:"16",onClick:function(){return n(t)}})]})})},ki=function(e){var t,n=e.openCloseFee,i=e.PNLAfterFees,r=e.pnlAfterFeesRate;return(0,ue.jsxs)("div",{className:Yn,children:[(0,ot.xP)(null==e?void 0:e.netValue,void 0,"$"),(0,ue.jsx)("span",{children:dt(null==e?void 0:e.PNL,null==e?void 0:e.PNLRate)}),(0,ue.jsx)(ji.Z,{placement:"bottom",overlay:(0,ue.jsxs)("div",{className:qn,children:["Net Value",(0,ue.jsx)("br",{}),"Net Value: Initial Collateral + PnL - Fund Fee - Close Fee",(0,ue.jsx)("br",{}),"Initial Collateral: ".concat((null==e||e.initialCollateral,(0,ot.xP)(Math.abs(+(null==e?void 0:e.initialCollateral)).toString(),void 0,"$"))),(0,ue.jsx)("br",{}),"PnL: ".concat(+(null==e?void 0:e.PNL)>0?(0,ot.xP)(Math.abs(+(null==e?void 0:e.PNL)).toString(),void 0,"+$"):(0,ot.xP)(Math.abs(+(null==e?void 0:e.PNL)).toString(),void 0,"-$")),(0,ue.jsx)("br",{}),"Fund Fee: ".concat((0,ot.xP)(null==e?void 0:e.fundingFee,void 0,"$")),(0,ue.jsx)("br",{}),"Open Fee: ".concat((0,ot.xP)(n.toString(),void 0,"$")),(0,ue.jsx)("br",{}),"Close Fee: ".concat((0,ot.xP)(n.toString(),void 0,"$")),(0,ue.jsx)("br",{}),"PnL After Fees:",dt(i.toString(),r.toString(),!1)]}),children:(0,ue.jsx)("div",{className:Wn,style:{cursor:"pointer"},children:new Array((null===(t=(0,ot.xP)(null==e?void 0:e.netValue,void 0,""))||void 0===t?void 0:t.length)||0).fill("-").join("")})})]})},wi=n(87943),Ti="content___VzqrF",Oi="coin___lxZ8a",Ci="operationContainer___pVVjp",Si="longColor___i6mFX",Fi="shortColor___kUd2O",Ii="leverageText___M5MFB",Mi="pnlContainer___qPyrN",Di="pnl___m2VoU",Ei="pnlValue___QYeuB",Ai="prices___kiXby",zi="priceContainer___BYY83",Ri="priceTitle___MzCfX",Bi="priceValue____kzul",Hi=function(e){var t=e.row,n=e.children,i=t.isLong,r=t.pair,a=t.leverage,l=t.PNLRate,s=t.averagePrice,o=t.indexPrice;return(0,ue.jsx)(wi.T,{title:"Share Position",downloadName:"Dei.io_share",coin:r,content:(0,ue.jsx)(wi.v,{startTimestamp:Date.now(),children:(0,ue.jsxs)("div",{className:Ti,children:[(0,ue.jsxs)("span",{className:Oi,children:[r," Perpetual"]}),(0,ue.jsxs)("div",{className:Ci,children:[(0,ue.jsx)("span",{className:i?Si:Fi,children:i?"LONG":"SHORT"}),(0,ue.jsxs)("span",{className:Ii,children:[a,"x"]})]}),(0,ue.jsxs)("div",{className:Mi,children:[(0,ue.jsx)("span",{className:Di,children:"PNL"}),(0,ue.jsxs)("span",{className:"".concat(Ei," ").concat(Number(l)<0?Fi:Si),children:[Number(l)<0?"":"+",l,"%"]})]}),(0,ue.jsx)("div",{className:Ai,children:[{titleId:"Entry",price:s},{titleId:"Index",price:o}].map((function(e){return(0,ue.jsxs)("div",{className:zi,children:[(0,ue.jsxs)("span",{className:Ri,children:[(0,ue.jsx)(Ke._H,{id:e.titleId})," ",(0,ue.jsx)(Ke._H,{id:"Price"})]}),(0,ue.jsx)("span",{className:Bi,children:(t=e.price,t?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t):"$--")})]},e.titleId);var t}))})]})}),children:(0,ue.jsx)("span",{children:n})})},Zi=Object.defineProperty,Vi=Object.getOwnPropertySymbols,$i=Object.prototype.hasOwnProperty,qi=Object.prototype.propertyIsEnumerable,Ui=(e,t,n)=>t in e?Zi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Gi=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))$i.call(t,n)&&Ui(e,n,t[n]);if(Vi)for(var n of Vi(t))qi.call(t,n)&&Ui(e,n,t[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M11 6a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 12a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 18a1 1 0 1 0 2 0 1 1 0 0 0-2 0Z",fill:"#fff"}),o.createElement("path",{d:"M11 6a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 12a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 18a1 1 0 1 0 2 0 1 1 0 0 0-2 0Z",stroke:"#fff"}));var Wi=n(13012),Yi=n.n(Wi),Ji=n(32170),Qi=n(51172),Ki=function(e){var t=Object.assign({},(Yi()(e),e));return(0,ue.jsx)(Ji.ZP,{theme:{token:{colorBgElevated:"#313348",colorText:"#fff",controlItemBgHover:"rgba(255,255,255,.1)"}},children:(0,ue.jsx)(Qi.Z,p()({},t))})},Xi=function(e){var t=e.row,n=e.handleSelectMarket,i=e.handleEditCollateral,r=[{key:"1",label:(0,ue.jsx)("span",{className:Jn,onClick:function(){return i(t)},children:"Edit Collateral"})},{key:"2",label:(0,ue.jsx)("span",{className:Jn,onClick:n,children:"Select Market"})},{key:"3",label:(0,ue.jsxs)(Hi,{row:t,children:[(0,ue.jsx)(Ke._H,{id:"Share"})," ",(0,ue.jsx)(Ke._H,{id:"Position"})]})}];return(0,ue.jsx)(Ki,{placement:"bottom",trigger:["click"],menu:{items:r},children:(0,ue.jsx)(Gi,{className:$n})})},er=(0,f.tq)()?function(e){var t=e.data,n=e.handleClosePositon,i=e.handleEditCollateral,r=(0,ye.x)().chainId,a=(0,c.FV)(L(r)),s=l()(a,2),o=s[0],u=s[1];return(0,ue.jsx)("div",{className:pi,children:t.map((function(e,t){var r;return(0,ue.jsxs)("div",{className:mi,children:[(0,ue.jsxs)("div",{className:ai,onClick:function(){return bi(null==e?void 0:e.pair,(null==o?void 0:o.name)||"",u)},children:[(0,ue.jsxs)("div",{className:vi,children:[(0,ue.jsxs)("div",{children:[" ",e.pair," "]})," ",(0,ue.jsxs)("div",{children:[Number(null==e?void 0:e.leverage).toFixed(2),"x"]})," ",(0,ue.jsx)("div",{className:V()(si,(r={},h()(r,oi,e.isLong),h()(r,ci,!e.isLong),r)),children:e.isLong?"Long":"Short"})," "]}),(0,ue.jsx)("span",{className:hi,children:dt(null==e?void 0:e.PNL,null==e?void 0:e.PNLRate)})]}),[{renderTitle:function(){return(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(Ke._H,{id:"Postion"})," ",(0,ue.jsx)(Ke._H,{id:"Size"})]})},value:(0,ot.xP)(e.size,void 0,"$")},{renderTitle:function(){return(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(Ke._H,{id:"Net"})," ",(0,ue.jsx)(Ke._H,{id:"Value"})]})},value:(0,ot.xP)(null==e?void 0:e.netValue,void 0,"$")},{renderTitle:function(){return(0,ue.jsx)(Ke._H,{id:"Collateral"})},value:(0,ue.jsx)(Li,{row:e,handleEditCollateral:function(){return i(e)}})},{renderTitle:function(){return(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(Ke._H,{id:"Open"})," ",(0,ue.jsx)(Ke._H,{id:"Price"})," ","/ ",(0,ue.jsx)(Ke._H,{id:"Mark"})," ",(0,ue.jsx)(Ke._H,{id:"Price"})]})},value:"".concat((0,ot.xP)(null==e?void 0:e.averagePrice,void 0,"$")," / ").concat((0,ot.xP)(null==e?void 0:e.indexPrice,void 0,"$"))},{renderTitle:function(){return(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(Ke._H,{id:"Liq"}),". ",(0,ue.jsx)(Ke._H,{id:"Price"})]})},value:(0,ot.xP)(e.liqPrice,void 0,"$")}].map((function(e,t){return(0,ue.jsxs)("div",{className:fi,children:[(0,ue.jsx)("span",{className:yi,children:e.renderTitle()}),(0,ue.jsx)("span",{className:xi,children:e.value})]},t)})),(0,ue.jsxs)("div",{className:gi,children:[(0,ue.jsx)("div",{className:_i,onClick:function(){return n(e,t)},children:(0,ue.jsx)(Ke._H,{id:"Close"})}),(0,ue.jsxs)("div",{className:_i,onClick:function(){return i(e)},children:[(0,ue.jsx)(Ke._H,{id:"Edit"})," ",(0,ue.jsx)(Ke._H,{id:"Collateral"})]}),(0,ue.jsx)("div",{className:_i,children:(0,ue.jsx)(Hi,{row:e,children:(0,ue.jsx)(Ke._H,{id:"Share"})})})]})]})}))})}:function(e){var t=e.data,n=e.handleEditCollateral,i=e.handleClosePositon,r=e.handleSelectMarket,a=(0,ye.x)().chainId,s=(0,o.useState)(-1),u=l()(s,2),d=u[0],p=u[1],m=(0,c.FV)(L(a)),v=l()(m,2),f=v[0],y=v[1],x=function(e){p(e)},g=[{title:"Position",render:function(e,t){var n,i;return(0,ue.jsxs)("div",{className:V()((n={},h()(n,ai,d!==t),h()(n,li,d===t),n)),onClick:function(){return bi(null==e?void 0:e.pair,(null==f?void 0:f.name)||"",y)},onMouseOver:function(){return x(t)},onMouseLeave:function(){return x(-1)},children:[(0,ue.jsx)("div",{children:e.pair}),(0,ue.jsx)("div",{children:(0,ot.xP)(null==e?void 0:e.leverage,void 0,"","x")}),(0,ue.jsx)("div",{className:V()(si,(i={},h()(i,oi,e.isLong),h()(i,ci,!e.isLong),i)),children:e.isLong?"Long":"Short"}),d===t&&(0,ue.jsx)("span",{children:">"})]})}},{title:"Size",dataIndex:"size",key:"size",render:function(e){return(0,ot.xP)(e,void 0,"$")}},{title:"Collateral",render:function(e){return(0,ue.jsx)(Li,{row:e,handleEditCollateral:n})}},{width:120,title:"NetValue",render:ki},{title:"Entry Price",dataIndex:"averagePrice",key:"averagePrice",render:function(e){return(0,ot.xP)(e,void 0,"$")}},{title:"Index Price",width:120,render:function(e){return(0,ot.xP)(e.indexPrice,void 0,"$")}},{title:"Liq. Price",dataIndex:"liqPrice",render:function(e){return(0,ot.xP)(e,void 0,"$")}},{width:120,title:"",render:function(e,t,a){return(0,ue.jsxs)("div",{className:ui,children:[(0,ue.jsx)("div",{className:di,onClick:function(){return i(e,a)},children:"Close"}),(0,ue.jsx)(Xi,{row:e,handleEditCollateral:n,handleSelectMarket:r})]})}}];return(0,ue.jsx)(Ct.ZP,{emptyText:"",className:ri,columns:g,data:t})},tr=function(e){var t=e.market,n=e.successCb,i=e.tradeShowArgs,r=(0,o.useState)(),a=l()(r,2),s=a[0],u=a[1],d=(0,o.useState)(),p=l()(d,2),m=p[0],v=p[1],f=(0,o.useState)(void 0),y=l()(f,2),x=y[0],h=y[1],g=(0,o.useState)(!1),_=l()(g,2),b=_[0],j=_[1],P=(0,o.useState)(!1),N=l()(P,2),L=N[0],k=N[1],w=(0,c.sJ)(S);return(0,o.useEffect)((function(){void 0!==x&&w[x]&&u(w[x])}),[w]),(0,ue.jsxs)(ue.Fragment,{children:[b&&m&&(0,ue.jsx)(ii,{isVisible:b,setIsVisible:j,row:m,market:t,tradeShowArgs:e.tradeShowArgs,successCb:n}),L&&s&&(0,ue.jsx)(ti,{isVisible:L,setIsVisible:k,row:s,tradeShowArgs:i,successCb:n}),(0,ue.jsxs)("div",{className:Qn,children:[(0,ue.jsx)(er,{data:w,handleClosePositon:function(e,t){k(!0),u(e),h(t)},handleEditCollateral:function(e){j(!0),v(e)}}),!(null!=w&&w.length)&&(0,ue.jsx)(st,{text:"No open positions"})]})]})},nr=function(e){var t=(0,ye.x)().chainId,n=e.market,i=e.infoTokens,r=void 0===i?{"0x0000000000000000000000000000000000000000":{isWrapped:!0,symbol:"WETH",baseSymbol:"ETH"}}:i,a=e.tradeShowArgs,s=e.showPnlAfterFees,u=(0,o.useState)(0),d=l()(u,2),p=d[0],m=d[1],v=(0,c.FV)(C),f=l()(v,2),y=f[0],x=f[1],g=(0,o.useState)([]),_=l()(g,2)[1],b=We.I.useContainer(),j=b.tableFlag,P=b.setTableFlag,N=(0,c.FV)(w),L=l()(N,2)[1],k=(0,c.FV)(T),O=l()(k,2)[1],S=(0,c.sJ)(M),F=(0,c.sJ)(D);(0,o.useEffect)((function(){if(!a)return O([]),L([]),void _([]);Et(a).then((function(e){return O(e)})),zt(a).then((function(e){return L(e)})),Ut(a).then((function(e){return _(e)}))}),[a,j,t]);var I=function(){P(!j)};return(0,ue.jsx)("div",{className:An,children:(0,ue.jsxs)(Qe.O.Group,{defaultIndex:p,onChange:function(e){m(e)},children:[(0,ue.jsxs)("div",{className:Hn,children:[(0,ue.jsxs)(Qe.O.List,{className:zn,children:[(0,ue.jsxs)(Qe.O,{className:function(e){var t=e.selected;return V()(Rn,h()({},Bn,t))},children:["Positions ",S]}),(0,ue.jsxs)(Qe.O,{className:function(e){var t=e.selected;return V()(Rn,h()({},Bn,t))},children:["Orders ",F]}),(0,ue.jsx)(Qe.O,{className:function(e){var t=e.selected;return V()(Rn,h()({},Bn,t))},children:"Trades"})]}),(0,ue.jsxs)("div",{className:Zn,children:[(0,ue.jsx)(Ke._H,{id:"Hide Other Pairs"}),(0,ue.jsx)(Kt,{className:Vn,checked:y,onChange:x})]})]}),(0,ue.jsxs)(Qe.O.Panels,{children:[(0,ue.jsx)(Qe.O.Panel,{children:(0,ue.jsx)(tr,{successCb:I,showPnlAfterFees:s,market:n,tradeShowArgs:a},+j)}),(0,ue.jsx)(Qe.O.Panel,{children:(0,ue.jsx)(En,{tradeShowArgs:e.tradeShowArgs,successCb:I},+j)}),(0,ue.jsx)(Qe.O.Panel,{children:(0,ue.jsx)(It,{infoTokens:r,successCb:I},+j)})]})]})})},ir=n(73539),rr=n(35386),ar=Object.defineProperty,lr=Object.getOwnPropertySymbols,sr=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,cr=(e,t,n)=>t in e?ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const ur=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))sr.call(t,n)&&cr(e,n,t[n]);if(lr)for(var n of lr(t))or.call(t,n)&&cr(e,n,t[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M11.478 18h3.478l5.294-6-5.294-6h-3.478l4.193 4.85H3.75v2.3h11.921L11.478 18Z",fill:"#F44364"}));var dr=Object.defineProperty,pr=Object.getOwnPropertySymbols,mr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable,fr=(e,t,n)=>t in e?dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const yr=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))mr.call(t,n)&&fr(e,n,t[n]);if(pr)for(var n of pr(t))vr.call(t,n)&&fr(e,n,t[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M7.652 12h2.319L13.5 8 9.97 4H7.653l2.795 3.234H2.5v1.532h7.947L7.652 12Z",fill:"#3DDB7C"}));var xr="value___QTafV",hr="old___nWboE",gr="new___MFwco",_r="arrowIcon___wpnLP",br="red___ta54J",jr=function(e){var t=e.symbolPrefix,n=void 0===t?"$":t,i=e.suffix,r=void 0===i?"":i,a=e.hasExistingPosition,l=e.priceDisplay,s=function(e){return e&&Number(e)>0?"".concat(n).concat(e).concat(r):"-"};return(0,ue.jsx)("div",{className:xr,children:a&&l&&l.mergePositionPrice&&l.mergePositionPrice.gt(0)?(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)("div",{className:hr,children:s(null==l?void 0:l.existingPositionPrice.toFixed(2,1))}),(0,ue.jsx)(yr,{className:V()(_r,h()({},br,((null==l?void 0:l.rise)||0)<0))}),(0,ue.jsx)("div",{className:gr,children:s(null==l?void 0:l.mergePositionPrice.toFixed(2,1))})]}):(0,ue.jsx)("div",{className:gr,children:s(null==l?void 0:l.mergePositionPrice.toFixed(2,1))})})},Pr={arrowIcon:"arrowIcon___iG0uS",red:"red___cXHfH",header:"header___hkqkP",row:"row___gfzWa",price:"price___k5Z9o",tip:"tip___F0_el",title:"title___FCH8V",changeInfoItem:"changeInfoItem___LaDtd",titleLabel:"titleLabel___EWjyx",changeInfo:"changeInfo___rSff6",changeInfoText:"changeInfoText___RTV2Y",fields:"fields___x3gUc",field:"field___qxsTj",label:"label___J7n5A",value:"value___m6nh9",old:"old___CU5un",new:"new___dIyoY",cut:"cut___T5uNM",submitBtn:"submitBtn___aBHIR",longColor:"longColor___DWLUi"},Nr=Pi.Z.Text,Lr=function(e){var t,n,i,r=e.size,a=e.slippage,l=e.liqPriceDisplay,s=e.positionFee,u=e.collateralDisplay,d=e.leverageDisplay,p=e.positionSizeDisplay,m=e.tradeShowArgs,v=e.fundingFee,f=e.hasExistingPosition,y=e.isPendingConfirmation,x=e.isMarketOrder,g=e.isLong,_=e.fromValue,b=e.toValue,j=e.toSymbol,P=e.entryPriceDisplay,N=(0,ye.x)().chainId,k=e.visible,w=e.existingPosition,O=e.onClickSubmit,C=e.onClose,S=(0,c.sJ)(T),F=(0,c.sJ)(L(N)),I=null===(t=(0,Re.H2)((null==m||null===(n=m.market)||void 0===n||null===(i=n._args)||void 0===i?void 0:i.spread)||0,10))||void 0===t?void 0:t.toNumber(),M=(0,o.useMemo)((function(){if(f)return" You already have an ".concat(g?"long":"short"," position that will increase the size of an existing position.");if(F){var e=(S||[]).filter((function(e){return"Trigger"===e.type&&e.pair===F.name&&e.isLong===g}));if(1===e.length)return"You have an active trigger order that could impact this Position";if(e.length>1)return"You have multiple active trigger orders that could impact this Position";var t=(S||[]).filter((function(e){return"Limit"===e.type&&e.pair===F.name&&e.isLong===g}));if(t.length>0)return t.length>1?"You have multiple existing Increase ".concat(g?"Long":"Short"," ").concat(j," limit orders"):"You have an active Limit Order that could impact this Position"}}),[F,S,w,g,f]),D=[{label:"Position Size",display:p},{label:"Leverage",display:d,prefix:"",suffix:"x"},{label:"Collateral",display:u}],E=(0,o.useMemo)((function(){return(0,fe.O)(_||0).toFixed(2,1)}),[_]);return(0,ue.jsx)(en.Z,{width:512,title:x?"Confirm ".concat(j,g?" Long":" Short"):"Confirm Limit Order",onClose:C,visible:k,children:(0,ue.jsxs)("div",{className:Pr.wrapper,children:[(0,ue.jsxs)("div",{className:Pr.header,children:[(0,ue.jsxs)("div",{className:Pr.title,children:[(0,ue.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iMTYiIGZpbGw9InVybCgjYSkiLz48cmVjdCB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHJ4PSIxNiIgZmlsbD0idXJsKCNiKSIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTEuMDUgNS45NWExLjIgMS4yIDAgMCAxIDEuMi0xLjJIMTZhMTEuMjIgMTEuMjIgMCAwIDEgOC4yNDggMy42SDExLjA1di0yLjRabTAgOC4yNWgxNi4wNTdhMTEuMzM3IDExLjMzNyAwIDAgMSAwIDMuNkgxMS4wNXYtMy42Wm0wIDkuNDV2Mi40YTEuMiAxLjIgMCAwIDAgMS4yIDEuMkgxNmExMS4yMiAxMS4yMiAwIDAgMCA4LjI0OC0zLjZIMTEuMDVaIiBmaWxsPSIjZmZmIi8+PHBhdGggb3BhY2l0eT0iLjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNi44MzQgOS40NzVhMTEuMjAxIDExLjIwMSAwIDAgMC0xLjcgMy42aDIxLjczMmExMS4yMDIgMTEuMjAyIDAgMCAwLTEuNy0zLjZINi44MzNabTAgMTMuMDVhMTEuMjAzIDExLjIwMyAwIDAgMS0xLjctMy42aDIxLjczMmExMS4yMDUgMTEuMjA1IDAgMCAxLTEuNyAzLjZINi44MzNabTkuMTQ4IDQuNzI1aC4wMzUtLjAzNVoiIGZpbGw9IiNmZmYiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwIiB5MT0iMCIgeDI9IjM5LjE3MiIgeTI9IjEwLjg2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzNDRUFBQSIvPjxzdG9wIG9mZnNldD0iLjc3MSIgc3RvcC1jb2xvcj0iIzVDNzJGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMCIgeTE9IjAiIHgyPSIzOS4xNzIiIHkyPSIxMC44NiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiMzQ0VBQUEiLz48c3RvcCBvZmZzZXQ9Ii43NzEiIHN0b3AtY29sb3I9IiM1QzcyRkYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4="}),(0,ue.jsxs)("div",{className:V()(Pr.titleLabel,h()({},Pr.longColor,g)),children:[null==F?void 0:F.name," ",g?"LONG":"SHORT"]})]}),(0,ue.jsxs)("div",{className:Pr.changeInfo,children:[(0,ue.jsxs)(Nr,{className:"".concat(Pr.changeInfoText," c200 f16 fw3 tc"),children:["Pay ",E," USDC ($",E,")"]}),(0,ue.jsx)("div",{children:(0,ue.jsx)(ur,{className:V()(Pr.arrowIcon,{cLong:g})})}),(0,ue.jsxs)(Nr,{className:"".concat(Pr.changeInfoText," c200 f16 fw3 tc"),children:[g?"Long":"Short"," ","".concat((0,fe.O)(b).toFixed(4,1)," ")," ",j," ($",r,")"]})]})]}),M&&(0,ue.jsx)("div",{className:Pr.tip,children:M}),(0,ue.jsxs)("div",{className:Pr.fields,children:[(D||[]).map((function(e){var t=e.display,n=e.suffix,i=e.prefix,r=e.label;return(0,ue.jsxs)("div",{className:Pr.field,children:[(0,ue.jsx)("div",{className:Pr.label,children:(0,ue.jsx)(Ke._H,{id:r})}),(0,ue.jsx)(jr,{suffix:n,symbolPrefix:i,hasExistingPosition:f,priceDisplay:t})]},r)})),(0,ue.jsxs)("div",{className:Pr.field,children:[(0,ue.jsx)("div",{className:Pr.label,children:(0,ue.jsx)(Ke._H,{id:"Open Fee"})}),(0,ue.jsx)("div",{className:Pr.value,children:(0,ue.jsxs)("div",{className:Pr.new,children:["$",s]})})]}),(0,ue.jsxs)("div",{className:Pr.field,children:[(0,ue.jsx)("div",{className:Pr.label,children:(0,ue.jsx)(Ke._H,{id:"Fund Fee"})}),(0,ue.jsx)("div",{className:Pr.value,children:(0,ue.jsx)("div",{className:Pr.new,children:"".concat(v||"-")})})]}),(0,ue.jsx)("div",{className:Pr.cut}),(0,ue.jsxs)("div",{className:Pr.field,children:[(0,ue.jsx)("div",{className:Pr.label,children:(0,ue.jsx)(Ke._H,{id:"Entry Price"})}),(0,ue.jsx)(jr,{hasExistingPosition:f,priceDisplay:P})]}),(0,ue.jsxs)("div",{className:Pr.field,children:[(0,ue.jsx)("div",{className:Pr.label,children:(0,ue.jsx)(Ke._H,{id:"Liq. Price"})}),(0,ue.jsx)(jr,{hasExistingPosition:f,priceDisplay:l})]}),(0,ue.jsx)("div",{className:Pr.cut}),(0,ue.jsxs)("div",{className:Pr.field,children:[(0,ue.jsx)("div",{className:Pr.label,children:(0,ue.jsx)(Ke._H,{id:"Type"})}),(0,ue.jsx)("div",{className:Pr.value,children:(0,ue.jsx)("div",{className:Pr.new,children:x?"Market":"Limit"})})]}),(0,ue.jsxs)("div",{className:Pr.field,children:[(0,ue.jsx)("div",{className:Pr.label,children:(0,ue.jsx)(Ke._H,{id:"Spread"})}),(0,ue.jsx)("div",{className:Pr.value,children:(0,ue.jsxs)("div",{className:Pr.new,children:[I,"%"]})})]}),(0,ue.jsxs)("div",{className:Pr.field,children:[(0,ue.jsx)("div",{className:Pr.label,children:(0,ue.jsx)(Ke._H,{id:"Slippage"})}),(0,ue.jsx)("div",{className:Pr.value,children:(0,ue.jsxs)("div",{className:Pr.new,children:[a,"%"]})})]})]}),(0,ue.jsx)("button",{disabled:y,type:"button",className:Pr.submitBtn,onClick:O,children:function(){if(!y){false;var e=x?g?"Long":"Short":"Create Order";return x&&he.bD>0?"Accept minimum and ".concat(e):e}return x?g?"Longing...":"Shorting...":"Creating Order..."}()})]})})},kr=n(6277),wr=n(6226),Tr=n(15560),Or=(n(39843),{header:"header___TC62F",field:"field___SKQvO",value:"value___ZPyQn",leverage:"leverage___DJlMu",multiple:"multiple___TgITL",customInput:"customInput___vG08t",item:"item___kY23e",active:"active___NJOgJ",sliderBox:"sliderBox___OugRQ",slider:"slider___JsDOm"}),Cr=["10","20","50","100"],Sr={2:"2x",100:"100x"},Fr=function(e){var t=e.onChange,n=e.value,i=(0,o.useState)(!1),r=l()(i,2),a=r[0],s=r[1];return(0,ue.jsxs)("div",{children:[(0,ue.jsxs)("div",{className:Or.header,children:[(0,ue.jsxs)("div",{className:Or.field,children:[(0,ue.jsx)("div",{className:Or.label,children:"Leverage: "}),(0,ue.jsxs)("div",{className:Or.value,children:[n||"0","x"]})]}),(0,ue.jsx)(Kt,{checked:a,onChange:s})]}),a?(0,ue.jsx)("div",{className:Or.sliderBox,children:(0,ue.jsx)(Tr.Z,{value:Number(n),railStyle:{opacity:.2,background:"linear-gradient(105.49deg, #3CEAAA 0%, #5C72FF 79.56%)"},onChange:function(e){return t(String(e))},className:Or.slider,min:2,max:100,marks:Sr,step:.1})}):(0,ue.jsxs)(kr.Z,{gutter:8,style:{marginBottom:"12px"},children:[(0,ue.jsx)(wr.Z,{flex:1,children:(0,ue.jsx)(tn.ZP,{decimals:2,value:n,onChange:function(e){return t(e)},className:Or.customInput})}),Cr.map((function(e){return(0,ue.jsx)(wr.Z,{children:(0,ue.jsx)("div",{onClick:function(){return t(e)},className:V()(Or.item,h()({},Or.active,e===n)),children:"".concat(e,"x")},e)},e)}))]})]})},Ir=Object.defineProperty,Mr=Object.getOwnPropertySymbols,Dr=Object.prototype.hasOwnProperty,Er=Object.prototype.propertyIsEnumerable,Ar=(e,t,n)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const zr=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))Dr.call(t,n)&&Ar(e,n,t[n]);if(Mr)for(var n of Mr(t))Er.call(t,n)&&Ar(e,n,t[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m10 12.586 4-4 5.707 5.707L22 12v6h-6l2.293-2.293L14 11.414l-4 4-7.707-7.707 1.414-1.414L10 12.586Z",fill:"#F44364"}));var Rr=Object.defineProperty,Br=Object.getOwnPropertySymbols,Hr=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,Vr=(e,t,n)=>t in e?Rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const $r=e=>o.createElement("svg",((e,t)=>{for(var n in t||(t={}))Hr.call(t,n)&&Vr(e,n,t[n]);if(Br)for(var n of Br(t))Zr.call(t,n)&&Vr(e,n,t[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m10 12.414 4 4 5.707-5.707L22 13V7h-6l2.293 2.293L14 13.586l-4-4-7.707 7.707 1.414 1.414L10 12.414Z",fill:"#fff"}));var qr=n(70215),Ur=n.n(qr),Gr={"dei-button":"dei-button___j8sPT","dei-button-middle":"dei-button-middle___KSv19","dei-button-large":"dei-button-large___BjyGb",primary:"primary___M4RdZ",default:"default___d9Xff",border:"border___QcMcN",disabled:"disabled___bsAvV"},Wr=["size","onClick","children","className","disabled","type"],Yr=function(e){var t=e.size,n=void 0===t?"large":t,i=e.onClick,r=e.children,a=e.className,l=e.disabled,s=e.type,c=void 0===s?"primary":s,u=Ur()(e,Wr),d=(0,o.useMemo)((function(){return V()(Gr["dei-button"],Gr["dei-button-".concat(n)],Gr[c],a,h()({},Gr.disabled,l))}),[n,a,l,c]);return(0,ue.jsx)("button",p()(p()({onClick:i,className:d,disabled:l},u),{},{children:r}))},Jr=n(13805),Qr="field___lFCUO",Kr="label___Ut9cW",Xr="value___TeWjD",ea=function(e){var t=e.liqPriceDisplay,n=e.entryPriceDisplay,i=e.hasExistingPosition,r=e.fundingFee,a=e.availableLiquidity,l=e.positionFee,s=function(e){return e&&Number(e)>0?"$".concat(e):"-"};return(0,ue.jsxs)("div",{children:[(0,ue.jsxs)("div",{className:Qr,children:[(0,ue.jsx)("div",{className:Kr,children:"Entry Price"}),(0,ue.jsx)(jr,{hasExistingPosition:i,priceDisplay:n})]}),(0,ue.jsxs)("div",{className:Qr,children:[(0,ue.jsx)("div",{className:Kr,children:"Liq. Price"}),(0,ue.jsx)(jr,{hasExistingPosition:i,priceDisplay:t})]}),(0,ue.jsxs)("div",{className:Qr,children:[(0,ue.jsx)("div",{className:Kr,children:"Open Fee"}),(0,ue.jsx)("div",{className:Xr,children:s(l)})]}),(0,ue.jsxs)("div",{className:Qr,children:[(0,ue.jsx)("div",{className:Kr,children:"Fund Fee"}),(0,ue.jsx)("div",{className:Xr,children:r})]}),(0,ue.jsxs)("div",{className:Qr,children:[(0,ue.jsx)("div",{className:Kr,children:"Available Liquidity"}),(0,ue.jsx)("div",{className:Xr,children:s(a)})]})]})},ta={tabList:"tabList___yWdXa",tabLong:"tabLong___tGsCL",tabShort:"tabShort___bAVl0",selected:"selected___YaUw9",label:"label___V2PWs",tradeBar:"tradeBar___CpLnN",tradePanel:"tradePanel___AMHi2",options:"options___ewpuO",option:"option___NDplS",optionActive:"optionActive___Kv41n",row:"row___dT_JX",size:"size___EuhIT",value:"value___BtMri",field:"field___ob36v",panel:"panel___lJHih",cut:"cut___YHMHw",advanced:"advanced___UjvFf"},na=function(e){var t=e.indexPrice,n=e.tradeShowArgs,i=e.orderOption,a=e.swapOption,d=e.onChangeSwapOption,m=e.onChangOrderOption,v=(0,s.Ge)(),f=v.active,y=v.account,x=(0,ye.x)().chainId,g=(0,c.sJ)(L(x)),_=(0,o.useState)(!1),b=l()(_,2),P=b[0],N=b[1],k=(0,o.useState)(t),T=l()(k,2),O=T[0],C=T[1],S=(0,o.useState)(!1),F=l()(S,2),I=F[0],M=F[1],D=i===he.YO,E=a===he.FB,A=(0,o.useState)(!1),z=l()(A,2),R=z[0],B=z[1],H=(0,o.useState)(!0),Z=l()(H,2),$=Z[0],q=Z[1],U=(0,o.useState)(""),G=l()(U,2),W=G[0],Y=G[1],J=(0,o.useState)(""),Q=l()(J,2),K=Q[0],X=Q[1],ee=We.I.useContainer().setWalletVisible,te=(0,c.sJ)(w),ne=(0,o.useState)(),ie=l()(ne,2),re=ie[0],ae=ie[1],le=We.I.useContainer().setPendingTxns,se=null==n?void 0:n.openFeeRate,oe=null==n?void 0:n.executionFee,ce=null==n?void 0:n.market,de=null==ce?void 0:ce._valid.maxLev,pe=D?t:O,me=We.I.useContainer(),ve=me.tableFlag,xe=me.setTableFlag;(0,o.useEffect)((function(){!re&&n&&ae({takeProfit:null==n?void 0:n.takeProfit,stopLoss:null==n?void 0:n.stopLoss,slippage:null==n?void 0:n.slippage})}),[null==n?void 0:n.takeProfit,null==n?void 0:n.stopLoss,null==n?void 0:n.slippage]);var ge=(0,ir.Z)(Object.create(null)),_e=l()(ge,2),be=(_e[0],_e[1]),je=be.set,Pe=(0,be.get)(y);(0,o.useEffect)((function(){!Pe&&y&&null!=n&&n.market&&n.market.allowance(y).then((function(e){je(y,e&&e.gt&&e.gt(0))}))}),[null==n?void 0:n.market,y,Pe]);var Ne=function(e){i!==e&&(e!==he.VZ||O&&"0"!==O||C(t),ae(p()(p()({},re),{},{stopLoss:"",takeProfit:""})),m(e))},Le=function(e){e!==a&&(ae(p()(p()({},re),{},{stopLoss:"",takeProfit:""})),C(""),d(e))},ke=(0,o.useMemo)((function(){if(g&&te&&te.length>0){var e="".concat(E?"Long":"Short");return te.find((function(t){return t.pair===g.name&&t.account===y&&t.side===e}))}return null}),[te,E,g]);(0,o.useEffect)((function(){q(!0),Y("")}),[D,E]);var we=(0,o.useMemo)((function(){return Boolean(ke&&ke.size&&(0,fe.O)(ke.size).gt(0))}),[ke]),Te=(0,u.ZP)((function(){return y&&null!=g&&g.address?[y,null==g?void 0:g.address]:null}),(function(){var e;return null==n||null===(e=n.reader)||void 0===e?void 0:e.availableLiquidity(y,g.address,E)})).data,Oe=(0,o.useMemo)((function(){return null==n?void 0:n.market.formatNum(Te,2)}),[Te,null==n?void 0:n.market.getTokenDigits()]),Ce=(0,u.ZP)((function(){return null!=n&&n.market?n:null}),(function(){return Ge.getFundFeeRete(n,E)})).data,Se=(0,o.useMemo)((function(){return null!=g&&g.name?g.name.split("/")[0]:""}),[g]),Fe=j([x,"depx-swap-leverage-option"],"10"),Ie=l()(Fe,2),Me=Ie[0],De=Ie[1];console.log("isAllowanced",Pe);var Ee=(0,o.useMemo)((function(){return Ge.getSize((0,fe.O)(W),(0,fe.O)(se||"0"),Number(Me))}),[W,Me,se]);(0,rr.Z)((function(){var e=(0,fe.O)(pe),t=(0,fe.O)(se||"0");if($){if(!W)return void X("");if(!se||0===Number(pe))return;var n=Ge.getNextAmount((0,fe.O)(W),e,t,Number(Me)).toFixed(18,1);X(n)}else if(K&&Me&&0!==Number(pe)){var i=Ge.getNextPay((0,fe.O)(K),e,t||(0,fe.O)(0),Number(Me)).toFixed(8,1);Y(i)}else Y("")}),400,[n,K,$,Me,se,W]);var Ae=(0,o.useMemo)((function(){var e,t=(0,fe.O)(se||0),i=Ge.getOpenFee(Ee,t),r=(0,fe.O)(pe),a=(0,fe.O)(W),l=(0,fe.O)(D?0:oe),s=(0,fe.O)(null!==(e=null==n?void 0:n.cleanFee)&&void 0!==e?e:"0"),o=Ge.getEntryPriceDisplay(r,Ee,E,ke);if(W&&Me&&pe){var c=Ge.getConfirmStat({size:Ee,leverageOption:Number(Me),executionFee:l,entryPrice:o.mergePositionPrice,existingPosition:ke,positionFeeRate:(0,fe.O)(se||0),hasExistingPosition:we,pay:a,openFee:i,cleanFee:s}),u=c.getCollateralDisplay(),d=(0,fe.O)((null==de?void 0:de.toNumber())||100),p=c.getLigPriceDisplay(o.mergePositionPrice,d,E,t),m=c.getNextSizeDisplay(),v=c.getLeverageDisplay();return{entryPriceDisplay:o,openFee:i.toFixed(2,1),liqPriceDisplay:p,collateralDisplay:u,leverageDisplay:v,positionSizeDisplay:m}}return{entryPriceDisplay:o,openFee:i.toFixed(2,1)}}),[W,Ee,de,ke,pe,K,oe,E,D,Me,se]),ze=Ae.openFee,Re=Ae.liqPriceDisplay,Be=Ae.collateralDisplay,He=Ae.leverageDisplay,Ze=Ae.positionSizeDisplay,Ve=Ae.entryPriceDisplay,$e=function(){if(P)return[(0,ue.jsx)(Ke._H,{id:"Approving..."}),!0];if(I)return[E?"Longing...":"Shorting...",!0];if(!f)return[(0,ue.jsx)(Ke._H,{id:"Connect Wallet"}),!1];if(!Pe)return[(0,ue.jsx)(Ke._H,{id:"Approve"}),!1];if(!(0,Jr.EC)(x))return[(0,ue.jsx)(Ke._H,{id:"Incorrect Network"}),!0];var e=function(){if(!(D||O&&"0"!==O))return(0,ue.jsx)(Ke._H,{id:"Enter A Price"});if(!pe)return(0,ue.jsx)(Ke._H,{id:"Enter A Price"});var e=(0,fe.O)(pe);if(!D){if(E&&e.gt((0,fe.O)(t)))return(0,ue.jsx)(Ke._H,{id:"Price Above Current Price"});if(!E&&e.lt((0,fe.O)(t)))return(0,ue.jsx)(Ke._H,{id:"Price Below Current Price"})}if(!K||"0"===K)return(0,ue.jsx)(Ke._H,{id:"Enter An Amount"});var i=(0,fe.O)(W);if(i.gt((0,fe.O)((null==n?void 0:n.avlb)||W)))return(0,ue.jsx)(Ke._H,{id:"Insufficient USDC Balance"});if((0,fe.O)(W).lt(10))return(0,ue.jsx)(Ke._H,{id:"MinPayUSD",values:{min:10}});if(i.gt(ni))return(0,ue.jsx)(Ke._H,{id:"MaxPayUSD",values:{max:ni}});var r=(0,fe.O)(Te);if(r.gt(0)&&Ee.gt(r))return(0,ue.jsx)(Ke._H,{id:"MAXExceeded",values:{toSymbol:Se,pos:E?"long":"short"}});var a=(null==de?void 0:de.toNumber())||100;if(Number(Me)>a)return(0,ue.jsx)(Ke._H,{id:"MAXLeverage",values:{max:a}});if(Number(Me)<2)return(0,ue.jsx)(Ke._H,{id:"MinLeverage",values:{min:2}});if(null!=re&&re.stopLoss){var l=(0,fe.O)(re.stopLoss);if(E&&l.gte(e))return(0,ue.jsx)(Ke._H,{id:"Stop Loss Above Current Price"});if(!E&&l.lte(e))return(0,ue.jsx)(Ke._H,{id:"Stop Loss Below Current Price"});if(E&&null!=Re&&Re.mergePositionPrice&&l.lte(Re.mergePositionPrice))return(0,ue.jsx)(Ke._H,{id:"Stop Loss Below Liq. Price"});if(!E&&null!=Re&&Re.mergePositionPrice&&l.gte(Re.mergePositionPrice))return(0,ue.jsx)(Ke._H,{id:"Stop Loss Above Liq. Price"})}if(null!=re&&re.takeProfit){var s=(0,fe.O)(re.takeProfit);if(E&&s.lte(e))return(0,ue.jsx)(Ke._H,{id:"Take Profit Below Current Price"});if(!E&&s.gte(e))return(0,ue.jsx)(Ke._H,{id:"Take Profit Above Current Price"});if(E&&null!=Re&&Re.mergePositionPrice&&s.lte(Re.mergePositionPrice))return(0,ue.jsx)(Ke._H,{id:"Take Profit Below Liq. Price"});if(!E&&null!=Re&&Re.mergePositionPrice&&s.gte(Re.mergePositionPrice))return(0,ue.jsx)(Ke._H,{id:"Take Profit Above Liq. Price"})}if(null!=re&&re.slippage){if(Number(re.slippage)>5)return(0,ue.jsx)(Ke._H,{id:"Slippage should be less than ".concat(5,"%")});if(Number(re.slippage)<.01)return(0,ue.jsx)(Ke._H,{id:"Slippage should be more than ".concat(.01,"%")})}return""}();return e?[e,!0]:Se?D?["".concat(E?"Long":"Short"," ").concat(Se),!1]:[(0,ue.jsx)(Ke._H,{id:"Create Limit Order"}),!1]:[(0,ue.jsx)(Ke._H,{id:"Create"}),!1]}(),qe=l()($e,2),Ue=qe[0],Ye=qe[1],Je=(0,o.useMemo)((function(){return[null!=re&&re.takeProfit?Ge.getEstimatedPNL({isLong:E,entryPrice:(0,fe.O)(pe),price:(0,fe.O)(null==re?void 0:re.takeProfit),size:Ee}).toFixed(2,1):"",null!=re&&re.stopLoss?Ge.getEstimatedPNL({isLong:E,entryPrice:(0,fe.O)(pe),price:(0,fe.O)(null==re?void 0:re.stopLoss),size:Ee}).toFixed(2,1):""]}),[null==re?void 0:re.takeProfit,null==re?void 0:re.stopLoss,E,Ee,pe]),Qe=l()(Je,2),Xe=Qe[0],et=Qe[1],tt=(0,o.useMemo)((function(){return Ce?"".concat(Ge.getFundFeeRateDisplay(Ce,E),"%/1 h"):"-"}),[Ce,E]);return(0,ue.jsxs)("div",{className:ta.tradeBar,children:[(0,ue.jsxs)("div",{className:ta.tradePanel,children:[(0,ue.jsx)(Lr,{size:null==Ee?void 0:Ee.toFixed(2,1),entryPriceDisplay:Ve,slippage:(null==re?void 0:re.slippage)||"0",tradeShowArgs:n,positionFee:ze,liqPriceDisplay:Re,collateralDisplay:Be,leverageDisplay:He,positionSizeDisplay:Ze,fundingFee:tt,isPendingConfirmation:I,existingPosition:ke,hasExistingPosition:we,toSymbol:Se,fromValue:W,onClickSubmit:function(){f?I||y&&pe&&(M(!0),function(e,t,n,i,r){if(n.market){var a={isLimit:n.isLimit,payDelta:n.market.getNumDecimals(n.pay),sizeDelta:n.market.getNumDecimals(n.size),price:n.market.getPriceDecimals(n.price),tpPrice:n.market.getPriceDecimals(n.takeProfit||"0"),slPrice:n.market.getPriceDecimals(n.stopLoss||"0"),slippage:n.market.getSlippageDecimals(n.market.formatPercentage(n.slippage)),isLong:n.isLong,isExec:!1,isKeepLev:!1,account:t};return console.log("[confirmSwap]  ",a),n.market.setChainId(e),n.market.setPendingTxns(i),n.market.increaseTrade(a,r)}return Promise.reject()}(x,y,p()(p()(p()({},n),re),{},{pay:W,isLimit:!D,size:Ee.toFixed(18,1),price:pe,isLong:E}),le,(function(){M(!1)})).then((function(e){e||M(!1),xe(!ve),B(!1)})).catch((function(e){console.error(e),M(!1)}))):ee(!0)},isMarketOrder:D,isLong:E,chainId:x,visible:R,toValue:K,onClose:function(){B(!1)}}),(0,ue.jsxs)("div",{className:ta.tabList,children:[(0,ue.jsxs)("div",{className:V()(ta.tabLong,h()({},ta.selected,E)),onClick:function(){Le(he.FB)},children:[(0,ue.jsx)($r,{}),(0,ue.jsx)("div",{className:ta.label,children:"Long"})]}),(0,ue.jsxs)("div",{className:V()(ta.tabShort,h()({},ta.selected,!E)),onClick:function(){Le(he.Qo)},children:[(0,ue.jsx)(zr,{}),(0,ue.jsx)("div",{className:ta.label,children:"Short"})]})]}),(0,ue.jsxs)("div",{className:ta.options,children:[(0,ue.jsx)("div",{onClick:function(){Ne(he.YO)},className:V()(ta.option,h()({},ta.optionActive,D)),children:"Market"}),(0,ue.jsx)("div",{onClick:function(){Ne(he.VZ)},className:V()(ta.option,h()({},ta.optionActive,!D)),children:"Limit"})]}),(0,ue.jsx)(tn.tV,{disabled:D,onChange:C,value:pe,decimals:2}),(0,ue.jsx)(tn.bW,{symbol:Se,value:K,decimals:2,onChange:function(e){q(!1),X(e)}}),(0,ue.jsxs)("div",{className:ta.row,children:[Ee&&(0,ue.jsxs)("div",{className:"".concat(ta.field," ").concat(ta.size),children:[(0,ue.jsx)("div",{className:ta.label,children:"Size:"}),(0,ue.jsxs)("div",{className:ta.value,title:Ee.toFixed(2,1),children:["$",Ee.toFixed(2,1)]})]}),(0,ue.jsxs)("div",{className:ta.field,children:[(0,ue.jsx)("div",{className:ta.label,children:"Balance:"}),(0,ue.jsx)("div",{className:ta.value,children:null!=n&&n.avlb?"".concat((0,fe.O)((null==n?void 0:n.avlb)||0).toFixed(4,1)," USDC"):"-"})]})]}),(0,ue.jsx)(tn.gp,{onClickMaxBtn:function(){q(!0),Y((null==n?void 0:n.avlb)||"0")},value:W,decimals:18,onChange:function(e){q(!0),Y(e)}}),(0,ue.jsx)(Fr,{value:Me,onChange:function(e){return De(e)}}),(0,ue.jsx)(Yr,{className:ta.submitBtn,disabled:Ye,onClick:function(){if(f)if(Pe)B(!0);else{N(!0);var e=n.market.getNumDecimals(Math.max(1e5,1e3*(Number(W)||1)));null==n||n.market.approve(y,e,!0).then((function(e){var t=e;if(t.hash){var n={hash:t.hash,message:"USDC Approved!",callback:function(){je(y,!0),N(!1)}};le((function(e){return[].concat(r()(e),[n])}))}else N(!1)})).catch((function(e){console.error(e),N(!1)}))}else ee(!0)},children:Ue})]}),(0,ue.jsxs)("div",{className:ta.panel,children:[(0,ue.jsx)(xn,{tkpPNL:Xe,stopLossPNL:et,onChange:ae,value:re,ifAll:!0}),(0,ue.jsx)("div",{className:ta.cut}),(0,ue.jsx)(ea,{hasExistingPosition:we,positionFee:ze,fundingFee:tt,entryPriceDisplay:Ve,availableLiquidity:Oe,liqPriceDisplay:Re})]})]})},ia=function(){var e=(0,ye.x)().chainId,t=(0,s.Ge)(),n=t.account,i=t.library,a=We.I.useContainer().setPendingTxns,d=(0,o.useState)(he.YO),p=l()(d,2),y=p[0],x=p[1],h=(0,o.useState)(he.FB),g=l()(h,2),_=g[0],b=g[1],j=(0,c.FV)(L(e)),P=l()(j,2),N=P[0],w=P[1],T=function(){var e=(0,c.sJ)(m),t=(0,c.FV)(v),n=l()(t,2),i=n[0],r=n[1];return(0,o.useEffect)((function(){var t=setInterval(H()(R()().mark((function t(){var n,i,a;return R()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.map(f.do),t.next=3,Ye.getIndexPrices(n);case 3:if(i=t.sent){t.next=6;break}return t.abrupt("return");case 6:a=i.reduce((function(e,t){return e[t.symbol]||(e[t.symbol]=t.price),e}),{}),r(a);case 8:case"end":return t.stop()}}),t)}))),1e3);return function(){return clearInterval(t)}}),[]),{indexPricesMap:i}}(),O=T.indexPricesMap,C=(0,c.FV)(k),S=l()(C,2),F=S[0],I=S[1],M=(0,u.ZP)("".concat(e),(function(){return(0,Le.t)(e,i)})).data;(0,o.useEffect)((function(){try{var e,t=(0,f.do)(null==N?void 0:N.name);I(null===(e=O[t])||void 0===e?void 0:e.toFixed(2,1))}catch(e){console.error(e)}}),[N,O]),(0,o.useEffect)((function(){if(M&&M.length>0){if(!N)return void w(M[0]);M.find((function(e){return e.name===(null==N?void 0:N.name)&&e.address===N.address}))||w(M[0])}}),[M,N]);var D=(0,u.ZP)(null!=N&&N.address?[e,null==N?void 0:N.address,null==N?void 0:N.name,i,n]:null,(function(e){return $e.apply(void 0,[F,a].concat(r()(e)))})).data;return N?(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsxs)("div",{className:Je,children:[(0,ue.jsx)(Ne,{indexPrice:F,markets:M||[],onChangeMarketSelection:function(e){w(e)},swapOption:_}),(0,ue.jsx)(na,{indexPrice:F,tradeShowArgs:D,swapOption:_,orderOption:y,onChangOrderOption:x,onChangeSwapOption:b})]}),(0,ue.jsx)(nr,{market:null==D?void 0:D.market,tradeShowArgs:D})]}):(0,ue.jsx)(ue.Fragment,{})},ra=function(){return(0,ue.jsx)(c.Wh,{children:(0,ue.jsx)(ia,{})})}}}]);